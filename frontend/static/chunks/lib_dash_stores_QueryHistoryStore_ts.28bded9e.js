"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkaxiom_local_dash"] = self["webpackChunkaxiom_local_dash"] || []).push([["lib_dash_stores_QueryHistoryStore_ts"],{

/***/ 30413:
/*!*******************************************!*\
  !*** ./lib/dash/stores/LogStreamStore.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"LogStreamStore\": () => (/* binding */ LogStreamStore),\n/* harmony export */   \"MarkerType\": () => (/* binding */ MarkerType),\n/* harmony export */   \"StreamingState\": () => (/* binding */ StreamingState),\n/* harmony export */   \"dateToTimestamp36\": () => (/* binding */ dateToTimestamp36),\n/* harmony export */   \"isLog\": () => (/* binding */ isLog),\n/* harmony export */   \"parseQueryMessages\": () => (/* binding */ parseQueryMessages)\n/* harmony export */ });\n/* harmony import */ var lodash_isEqual__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash/isEqual */ 47184);\n/* harmony import */ var lodash_isEqual__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_isEqual__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var mobx__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mobx */ 50265);\n/* harmony import */ var moment_timezone__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! moment-timezone */ 47812);\n/* harmony import */ var moment_timezone__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(moment_timezone__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _components_Notification__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../components/Notification */ 2022);\n/* harmony import */ var _shared_dash__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../shared/dash */ 81002);\n/* harmony import */ var _util_dates__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../util/dates */ 38478);\n/* harmony import */ var _util_numbers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../util/numbers */ 64684);\n/* harmony import */ var _DatasetStore__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./DatasetStore */ 33998);\n/* harmony import */ var _ElementsDatasetStore__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./ElementsDatasetStore */ 92446);\n/* harmony import */ var _StoreBase__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./StoreBase */ 53769);\n/* harmony import */ var _UserProfileStore__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./UserProfileStore */ 99193);\n/* harmony import */ var _ViewStore__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ViewStore */ 77776);\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n// cSpell:ignore dedup imurmurhash MurmurHash3 containerd nocache ntpd syslog systemd udevd vfield\n\n\n\n\n\n\n\n\n\n\n\n\nconst DEFAULT_LOGS_REFRESH_RATE = 1000;\nconst E2E_TESTING = \"false\" === 'true';\nconst MAX_NUM_LOGS = 500;\nconst LOGS_PER_PAGE = 100;\nconst TOAST_ID = 'getLogs';\nconst LOGS_REFRESH_RATE = Number(undefined) || DEFAULT_LOGS_REFRESH_RATE;\nvar MarkerType;\n(function (MarkerType) {\n    MarkerType[\"DateRangeStart\"] = \"dateRangeStart\";\n    MarkerType[\"DateRangeEnd\"] = \"dateRangeEnd\";\n    MarkerType[\"DayDivider\"] = \"dayDivider\";\n    MarkerType[\"Line\"] = \"line\";\n})(MarkerType || (MarkerType = {}));\nvar StreamingState;\n(function (StreamingState) {\n    StreamingState[\"Live\"] = \"live\";\n    StreamingState[\"Polling\"] = \"polling\";\n    StreamingState[\"PausedManually\"] = \"pausedManually\";\n    StreamingState[\"PausedScrolling\"] = \"pausedScrolling\";\n})(StreamingState || (StreamingState = {}));\nfunction isLog(arg) {\n    return !!arg && arg.data !== undefined;\n}\nclass LogStreamStore extends _StoreBase__WEBPACK_IMPORTED_MODULE_3__.StoreBase {\n    constructor(datasetStore, getLogsDelay = 0) {\n        super();\n        this.highlightIn = false;\n        this.highlightRowId = '';\n        // Currently no need to observe each individual log object. Observing just the array is enough.\n        this.logs = [];\n        this.queryParams = {\n            // Need to initialize to undefined so Mobx can observe it.\n            timestampStart: undefined,\n            timestampEnd: undefined,\n            quickRange: undefined,\n            queryString: undefined,\n            caseSensitive: undefined,\n            integrationsFilter: undefined,\n        };\n        this.reachedOldest = false;\n        this.reachedNewest = false;\n        this.scrolledToBottom = false;\n        this.scrolledToTop = true;\n        this.scrollTop = 0;\n        this.getLogsDelay = 0;\n        this.streamingEnabled = true;\n        this.ignoreEndTime = false;\n        this.isPartial = false;\n        this.overflows = false;\n        this.searchDirection = 'past';\n        this.streamingInterval = LOGS_REFRESH_RATE;\n        this.isPolling = false;\n        this.getLogsOp = new _StoreBase__WEBPACK_IMPORTED_MODULE_3__.SimpleOperationsTracker('getLogsOp');\n        this.isInitialLoad = true;\n        this.cancelEnableStreaming = false;\n        this.disposing = false;\n        this.previousOnScrollLogsCount = 0;\n        this.shouldReEnableStreaming = false;\n        this.streamingTimer = 0;\n        this.visibilityChangeTimer = 0;\n        this.wasStreamingEnabledWhenHidden = false;\n        this.lastQueryId = 0;\n        this.pollLogSearchTimeout = 0;\n        this.datasetStore = datasetStore;\n        this.getLogsDelay = getLogsDelay;\n        // Setup a reaction to call getLogs whenever the queryParams change.\n        this.queryParamsReaction = (0,mobx__WEBPACK_IMPORTED_MODULE_1__.reaction)(() => {\n            // React to any queryParams prop changing, or the selectedDatasetId.\n            return [\n                this.datasetStore.selectedDatasetId,\n                this.datasetStore.getVirtualFieldsOps.operation.hasRun,\n                Object.assign({}, this.queryParams),\n            ];\n        }, () => {\n            // Only call `getLogs` if something changed and there is a selectedDatasetId.\n            // `setQueryParams` can be called multiple times and end up the same.\n            // Especially in `LogStreamViewStore.urlReactions`\n            const jsQueryParams = (0,mobx__WEBPACK_IMPORTED_MODULE_1__.toJS)(this.queryParams);\n            if (this.datasetStore.selectedDatasetId) {\n                if (this.datasetStore.getVirtualFieldsOps.operation.hasRun) {\n                    const datasetChanged = this.datasetStore.selectedDatasetId !== this.previousSelectedDatasetId;\n                    if (datasetChanged) {\n                        // Fetch Dataset details.\n                        this.datasetStore.getActiveDataset();\n                    }\n                    if (datasetChanged || !lodash_isEqual__WEBPACK_IMPORTED_MODULE_0___default()(this.previousQueryParams, jsQueryParams)) {\n                        // Cancel any in-flight requests\n                        this.cancelGetLogs();\n                        window.clearInterval(this.streamingTimer);\n                        // Kick off a new query.\n                        this.getLogs();\n                    }\n                    this.previousSelectedDatasetId = this.datasetStore.selectedDatasetId;\n                    this.previousQueryParams = jsQueryParams;\n                }\n                else {\n                    // FIXME: When viewing a dataset's stream, this gets called twice.\n                    // Once here and once in LogsStreamFilter\n                    // Fix once virtual fields are returned with the Dataset info (getActiveDataset)\n                    // https://github.com/axiomhq/axiom/issues/1962\n                    this.datasetStore.getActiveDatasetVirtualFields();\n                }\n            }\n            else {\n                // Clear timers and streaming since there is no longer a selectedDatasetId.\n                window.clearTimeout(this.getLogsRetryTimer);\n                this.disableStreaming();\n                this.cancelGetLogs();\n            }\n        }, \n        // Since our default timestamp is undefined, something should call `setQueryParams` to kick this off.\n        { fireImmediately: false });\n        this.visibilityChangeReaction = (0,mobx__WEBPACK_IMPORTED_MODULE_1__.reaction)(() => [_ViewStore__WEBPACK_IMPORTED_MODULE_4__.viewStore.isHidden], () => {\n            window.clearTimeout(this.visibilityChangeTimer);\n            if (_ViewStore__WEBPACK_IMPORTED_MODULE_4__.viewStore.isHidden) {\n                // Tab is NOT active.\n                this.wasStreamingEnabledWhenHidden = this.streamingEnabled;\n                if (this.streamingEnabled) {\n                    this.streamingInterval = 5000;\n                    // Need to re-call enableStreaming to setup a new `setInterval`.\n                    this.enableStreaming();\n                    // Turn off streaming altogether after a bit.\n                    this.visibilityChangeTimer = window.setTimeout(() => {\n                        this.disableStreaming();\n                    }, 60000);\n                }\n            }\n            else {\n                // Tab is active again.\n                if (this.wasStreamingEnabledWhenHidden) {\n                    this.streamingInterval = LOGS_REFRESH_RATE;\n                    this.enableStreaming();\n                }\n            }\n        }, \n        // Don't fire immediately otherwise if the tab is \"hidden\" on load\n        // `wasStreamingEnabledWhenHidden` will be `true` and when you finally\n        // view the tab enableStreaming will be called and a dataset may not be selected.\n        { fireImmediately: false });\n    }\n    dispose() {\n        window.clearTimeout(this.getLogsRetryTimer);\n        window.clearTimeout(this.visibilityChangeTimer);\n        this.disposing = true;\n        this.disableStreaming();\n        this.queryParamsReaction();\n        this.visibilityChangeReaction();\n        this.cancelGetLogs();\n    }\n    get isLive() {\n        return this.streamingState === StreamingState.Live;\n    }\n    get isDateRange() {\n        const timestampStart = (0,_util_dates__WEBPACK_IMPORTED_MODULE_5__.currentTimestampStart)(this.queryParams.quickRange, this.queryParams.timestampStart);\n        return !!timestampStart;\n    }\n    get scrollToRowId() {\n        if ((0,_util_numbers__WEBPACK_IMPORTED_MODULE_6__.isNumeric)(this.scrollToIndex) && this.scrollToIndex < this.logs.length) {\n            return this.logs[this.scrollToIndex] && this.logs[this.scrollToIndex]._rowId;\n        }\n        else {\n            return undefined;\n        }\n    }\n    get streamingState() {\n        if (this.streamingEnabled) {\n            return StreamingState.Live;\n        }\n        else {\n            if (this.scrolledToBottom) {\n                // If date range has an \"end\" that isn't \"now\" then force PausedScrolling state,\n                // so that the \"Jump to Live\" arrow is displayed.\n                const timestampEnd = (0,_util_dates__WEBPACK_IMPORTED_MODULE_5__.parseTimestampNotNow)(this.queryParams.timestampEnd);\n                if (timestampEnd) {\n                    return StreamingState.PausedScrolling;\n                }\n                else {\n                    return StreamingState.PausedManually;\n                }\n            }\n            else {\n                return StreamingState.PausedScrolling;\n            }\n        }\n    }\n    get activeRow() {\n        const log = this.activeRowId && this.logs.find((l) => l._rowId === this.activeRowId);\n        return (log && isLog(log) && log) || undefined;\n    }\n    get newerRow() {\n        if (this.activeRowId) {\n            let index = this.logs.findIndex((ll) => ll._rowId === this.activeRowId);\n            index += 1;\n            while (index >= 0 && index < this.logs.length) {\n                if (isLog(this.logs[index])) {\n                    return this.logs[index];\n                }\n                index += 1;\n            }\n        }\n        return undefined;\n    }\n    get olderRow() {\n        if (this.activeRowId) {\n            let index = this.logs.findIndex((ll) => ll._rowId === this.activeRowId);\n            index -= 1;\n            while (index >= 0) {\n                if (isLog(this.logs[index])) {\n                    return this.logs[index];\n                }\n                index -= 1;\n            }\n        }\n        return undefined;\n    }\n    get activeQuery() {\n        const { queryString, caseSensitive, integrationsFilter } = (0,mobx__WEBPACK_IMPORTED_MODULE_1__.toJS)(this.queryParams);\n        const timestampStart = (0,_util_dates__WEBPACK_IMPORTED_MODULE_5__.currentTimestampStartNowAsUndefined)(this.queryParams.quickRange, this.queryParams.timestampStart);\n        const timestampEnd = (0,_util_dates__WEBPACK_IMPORTED_MODULE_5__.currentTimestampEndNowAsUndefined)(this.queryParams.quickRange, this.queryParams.timestampEnd);\n        return {\n            datasetId: this.datasetStore.selectedDatasetId,\n            queryString: queryString,\n            timestampStart: timestampStart,\n            timestampEnd: timestampEnd,\n            caseSensitive: caseSensitive,\n            integrationsFilter: integrationsFilter,\n        };\n    }\n    get activeQueryRequest() {\n        const { queryString, timestampStart, timestampEnd, caseSensitive, integrationsFilter } = this.activeQuery;\n        const queryOptions = {};\n        const queryParams = {\n            resolution: 'auto',\n            // Would be nice not to have to default but we live in a world where nobody gives a crap about making things easier for the frontend.\n            // We'll get to convert these back into undefined/blank later since the values will get put into Saved Queries.\n            startTime: timestampStart ? new Date(timestampStart).toISOString() : _util_dates__WEBPACK_IMPORTED_MODULE_5__.MIN_DATE.toISOString(),\n            endTime: timestampEnd ? new Date(timestampEnd).toISOString() : _util_dates__WEBPACK_IMPORTED_MODULE_5__.MAX_DATE.toISOString(),\n            queryOptions: queryOptions,\n        };\n        // Only add queryOptions if the user explicitly added them, otherwise it's harder to detect later if queryParams changed.\n        if (caseSensitive !== undefined) {\n            // 🐉🐉🐉\n            // Options pertain to filtering only right now and so might not be needed and are deleted below\n            queryOptions.caseSensitive = String(caseSensitive);\n        }\n        if (queryString) {\n            let actualQueryString = queryString;\n            // FUTURE: Remove someday?\n            // Make old Urls with `AxiomFilter:` in them work.\n            if (queryString.startsWith('AxiomFilter:')) {\n                actualQueryString = queryString.slice(12);\n            }\n            this.buildFilter(queryParams, actualQueryString);\n        }\n        // Remove empty queryOptions to keep from cluttering up the request\n        if (queryParams.queryOptions && !Object.keys(queryParams.queryOptions).length) {\n            delete queryParams.queryOptions;\n        }\n        if (integrationsFilter) {\n            queryOptions.integrationsFilter = integrationsFilter;\n        }\n        return queryParams;\n    }\n    scrollToBottom() {\n        this.scrollToIndex = this.logs.length - 1;\n        this.scrollToAlignment = 'bottom';\n        this.scrolledToBottom = true;\n        this.delayedClearScrollToIndex();\n    }\n    // Since we override in `LogStreamViewStore`, don't add a decorator, otherwise the parent won't be called.\n    setHighlightRowId(highlightRowId) {\n        (0,mobx__WEBPACK_IMPORTED_MODULE_1__.runInAction)(() => {\n            this.highlightRowId = highlightRowId || '';\n        });\n    }\n    // Since we override in `LogStreamViewStore`, don't add a decorator, otherwise the parent won't be called.\n    setActiveDataRowId(rowId) {\n        (0,mobx__WEBPACK_IMPORTED_MODULE_1__.runInAction)(() => {\n            this.activeRowId = rowId;\n            // We need to disable streaming when a row is active or else it\n            // can suddenly not be active as new data streams in and it gets automatically\n            // dropped.\n            if (rowId && this.streamingEnabled) {\n                this.shouldReEnableStreaming = !this.isInitialLoad; // re-enabled by default, unless this is the initial load.\n                this.disableStreaming();\n            }\n            else if (!rowId && this.shouldReEnableStreaming) {\n                this.shouldReEnableStreaming = false;\n                this.enableStreaming();\n            }\n        });\n        // Reload if rowId doesn't exist.\n        // 🐉🐉🐉\n        // Hoping this doesn't cause issues 🤞️\n        // It's debatable whether we want this.\n        if (this.activeRowId && !this.activeRow && !this.isInitialLoad) {\n            window.location.reload();\n        }\n    }\n    setGetLogsDelay(delay) {\n        this.getLogsDelay = delay;\n    }\n    // Since we override in `LogStreamViewStore`, don't add a decorator, otherwise the parent won't be called.\n    setQueryParams(timestampStart, timestampEnd, quickRange, queryString, appendQueryString, caseSensitive) {\n        // Only change queryParams if they're not `undefined`, because places like `jumpToLive` want\n        // to change the timestamp but keep the rest of the queryParams the same.\n        (0,mobx__WEBPACK_IMPORTED_MODULE_1__.runInAction)(() => {\n            if (timestampStart !== undefined || timestampEnd !== undefined) {\n                this.queryParams.timestampStart = timestampStart;\n                this.queryParams.timestampEnd = timestampEnd;\n                // Clear the quickRange setting if a timestampStart or timestampEnd is set.\n                this.queryParams.quickRange = undefined;\n            }\n            if (quickRange !== undefined) {\n                this.queryParams.quickRange = quickRange;\n                // Clear timestampStart and timestampEnd setting if a quickRange is set.\n                this.queryParams.timestampStart = undefined;\n                this.queryParams.timestampEnd = undefined;\n            }\n            if (queryString !== undefined) {\n                if (appendQueryString && this.queryParams.queryString) {\n                    // Separate with a space.\n                    this.queryParams.queryString += ` ${queryString}`;\n                }\n                else {\n                    this.queryParams.queryString = queryString;\n                }\n            }\n            if (caseSensitive !== undefined) {\n                this.queryParams.caseSensitive = caseSensitive;\n            }\n        });\n    }\n    // Since we override in `LogStreamViewStore`, don't add a decorator, otherwise the parent won't be called.\n    // Similar to setQueryParams except we don't ignore `undefined` values we'll set them.\n    setQueryParamsDateRange(timestampStart, timestampEnd, quickRange) {\n        (0,mobx__WEBPACK_IMPORTED_MODULE_1__.runInAction)(() => {\n            this.queryParams.timestampStart = timestampStart;\n            this.queryParams.timestampEnd = timestampEnd;\n            this.queryParams.quickRange = quickRange;\n        });\n    }\n    // Since we override in `LogStreamViewStore`, don't add a decorator, otherwise the parent won't be called.\n    setQueryParamsFilter(filter) {\n        (0,mobx__WEBPACK_IMPORTED_MODULE_1__.runInAction)(() => {\n            this.queryParams.queryString = filter ? JSON.stringify(filter) : filter;\n        });\n    }\n    setOverflows(overflows) {\n        this.overflows = overflows;\n        // If the LogStream page isn't overflowing we should either enable streaming\n        // or keeping loading logs in the future until it does.\n        // Otherwise the UI will just get stuck because there is not Bottom row to scroll down to.\n        // This can be tested by setting LOGS_PER_PAGE to a low number.\n        if (!overflows) {\n            if (this.reachedNewest) {\n                // Respect if the User pressed the pause button (cancelEnableStreaming === true).\n                if (!this.streamingEnabled && !this.cancelEnableStreaming) {\n                    this.enableStreaming();\n                }\n            }\n            else {\n                this.loadMoreLogsInFuture();\n            }\n        }\n    }\n    enableStreaming() {\n        // Cancel any polling\n        this.cancelGetLogs();\n        // Clear partial flags because tailing logs won't treat any as partial results\n        this.isPartial = false;\n        // Don't enable streaming if the date range has an \"end\" that isn't \"now\".\n        const timestampEnd = (0,_util_dates__WEBPACK_IMPORTED_MODULE_5__.parseTimestampNotNow)(this.queryParams.timestampEnd);\n        // Never stream when E2E_TESTING. It causes all types of chaos.\n        if (!this.disposing && !timestampEnd && \"false\" !== 'true') {\n            this.streamingEnabled = true;\n            this.cancelEnableStreaming = false;\n            this.searchDirection = 'future';\n            window.clearInterval(this.streamingTimer);\n            this.streamingTimer = window.setInterval((0,mobx__WEBPACK_IMPORTED_MODULE_1__.action)(() => {\n                if (!this.datasetStore.selectedDatasetId) {\n                    // Shouldn't happen but it seems to be.\n                    console.warn('selectedDatasetId not set');\n                    this.disableStreaming();\n                    // Exit early since we don't have a datasetId.\n                    return;\n                }\n                if (this.getLogsOp && !this.getLogsOp.status.finished) {\n                    // wait the last fetch\n                    return;\n                }\n                const newestLog = this.findNewestLog();\n                this.scrollToIndex = undefined;\n                // eslint-disable-next-line @typescript-eslint/no-floating-promises\n                this.operate(this.getLogsOp.operation, this.performLogSearch(newestLog === null || newestLog === void 0 ? void 0 : newestLog._rowId, LOGS_PER_PAGE, newestLog ? 'asc' : 'desc', undefined, true), (results) => {\n                    // Clear old errors.\n                    _components_Notification__WEBPACK_IMPORTED_MODULE_7__.notification.dismiss(TOAST_ID);\n                    // Don't add the logs if the user paused streaming while we were fetching, otherwise\n                    // it will immediately re-enable streaming when onScroll is triggered by us adding these logs.\n                    if (this.streamingEnabled) {\n                        // Create a lookup table to dedupe partial results\n                        const mapRowIdLog = this.logs.reduce((map, ll) => {\n                            map[ll._rowId] = ll;\n                            return map;\n                        }, {});\n                        // Filter out logs that are already displayed\n                        const newLogs = results.logs.filter((ll) => !mapRowIdLog[ll._rowId]);\n                        this.highlightIn = true;\n                        this.addLogs(newLogs);\n                        if (this.logs.length > 0) {\n                            this.removeOldestLogs();\n                            this.scrollToBottom();\n                        }\n                        else {\n                            // If there aren't results, no reason to keep hammering the server.\n                            // I guess we want to do this now:\n                            // https://github.com/axiomhq/axiom/issues/851\n                            // this.disableStreaming();\n                        }\n                    }\n                }, false, () => {\n                    // If it's a Network Error, retry after a delay\n                    if (this.getLogsOp.operation.disconnected) {\n                        this.getLogsRetryTimer = window.setTimeout(() => {\n                            this.enableStreaming();\n                        }, 5000);\n                    }\n                    return true;\n                }, TOAST_ID);\n            }), this.streamingInterval);\n        }\n    }\n    disableStreaming() {\n        this.highlightIn = false;\n        this.streamingEnabled = false;\n        this.cancelEnableStreaming = true;\n        window.clearInterval(this.streamingTimer);\n        // Don't do this here or loading logs in the past won't work.\n        // Clear any polling\n        // this.cancelGetLogs();\n    }\n    jumpToLive(reset) {\n        // CDEUTSCH 20200728: Attempt to remove because `getLogs` resets streamingEnabled.\n        // // Set the streaming enabled flag so we'll scroll to the bottom after the next fetch\n        // this.streamingEnabled = true;\n        // Using `reset` will force us to clear the other query params and get to the latest.ß\n        if (!reset && this.reachedNewest) {\n            // scrollToBottom doesn't work if there aren't any logs or if there isn't an overflow.\n            if (this.logs.length === 0 || !this.overflows) {\n                this.enableStreaming();\n            }\n            else {\n                this.scrollToBottom();\n            }\n        }\n        else {\n            // We don't know how many logs we'd need to load to get back to live, so\n            // jump to right now.\n            //\n            // There are cases where `queryParams.quickRange`, `this.queryParams.timestampStart`,\n            // and `this.queryParams.timestampEnd` will already be undefined, so we need to check\n            // if we should force a call to `getLogs`.\n            if (this.queryParams.quickRange === undefined &&\n                this.queryParams.timestampStart === undefined &&\n                this.queryParams.timestampEnd === undefined) {\n                this.getLogs();\n            }\n            else {\n                this.setQueryParamsDateRange(undefined, undefined, undefined);\n            }\n        }\n    }\n    onScroll(clientHeight, scrollHeight, scrollTop, prevScrollTop) {\n        // Toggle streaming based on if the user is at the bottom.\n        // Use -1 as a slight buffer.\n        // prettier-ignore\n        const isBottom = (clientHeight + scrollTop - scrollHeight) >= -1;\n        this.scrollTop = scrollTop;\n        if (isBottom) {\n            this.scrolledToBottom = true;\n            this.scrolledToTop = false;\n            // Ignore scrolling due to logs being added.\n            //\n            // CDEUTSCH: I can't replicate \"scrolling due to logs being added\" by searching in the past and scrolling down on a large dataset.\n            // Not sure if the `previousOnScrollLogsCount` is for a different scenario. Like few log results eventually hitting the bottom?\n            // The way it was previously was  preventing `loadMoreLogsInFuture` from firing if you scroll really fast. Particularly\n            // if you have a mouse with a spinning scroll wheel and let it just keep spinning.\n            // Going to try move the \"if statement\" to just protect `enableStreaming`.\n            // FUTURE: We can possibly try remove `previousOnScrollLogsCount` altogether.\n            if (this.reachedNewest && this.logs.length === this.previousOnScrollLogsCount) {\n                if (!this.streamingEnabled) {\n                    this.enableStreaming();\n                }\n            }\n            else if (!this.reachedNewest) {\n                this.loadMoreLogsInFuture();\n            }\n        }\n        else {\n            this.scrolledToBottom = false;\n            this.disableStreaming();\n            this.scrolledToTop = scrollTop <= 3;\n        }\n        this.clearScrollToIndex();\n        this.previousOnScrollLogsCount = this.logs.length;\n    }\n    loadMoreLogsInPast() {\n        if (this.isPolling && this.searchDirection === 'past') {\n            // Already fetching partial results so do nothing\n            return;\n        }\n        window.clearTimeout(this.getLogsRetryTimer);\n        const oldestLog = this.findOldestLog();\n        // Make sure we haven't already fetched logs before this timestamp.\n        // And make sure we haven't reached the \"oldest\" (`reachedOldest` could also mean the start of the date range).\n        if (oldestLog && !this.reachedOldest && this.lastLogInPastTimestamp !== oldestLog._rowId) {\n            this.searchDirection = 'past';\n            this.lastLogInPastTimestamp = oldestLog._rowId;\n            // Clear lastLogInFutureTimestamp, now that we're going the opposite direction, otherwise loadMoreLogsInFuture may not run.\n            this.lastLogInFutureTimestamp = undefined;\n            this.scrollToIndex = undefined;\n            const numNewLogsRequested = LOGS_PER_PAGE;\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\n            this.pollLogSearch(oldestLog._rowId, numNewLogsRequested, 'desc', undefined, undefined, (results) => {\n                const newLogs = results.logs;\n                this.isPartial = Boolean(results.isPartial);\n                this.minBlockTime = results.minBlockTime;\n                this.maxBlockTime = results.maxBlockTime;\n                this.rowsExamined = results.rowsExamined;\n                this.fieldValueFormatters = results.fieldValueFormatters;\n                if (!this.isPartial) {\n                    // If we got fewer results then we asked for, we're at the oldest.\n                    if (results.matchesCountBeforeDedup < numNewLogsRequested) {\n                        this.reachedOldest = true;\n                    }\n                    if (this.scrolledToTop && newLogs.length === 0) {\n                        // If we're still scrolled to the top and didn't load any more logs, then \"Load more\" is still showing,\n                        // so we need to kick it off again.\n                        this.loadMoreLogsInPast();\n                    }\n                }\n                // No need to do any more work if there aren't logs to add.\n                if (newLogs.length > 0) {\n                    // Set to the log at the beginning of the array, since that should be the one visible after the \"Load more\" row.\n                    const scrollToLog = this.logs.length > 0 ? this.logs[0] : undefined;\n                    this.addLogs(newLogs);\n                    // Have to check scroll position because it could change if the user scrolls while waiting for partial results.\n                    // Use scrollTop instead of scrolledToTop because we need a buffer to accommodate how browsers react to new\n                    // rows being added when you're in an overflowing div.\n                    // If you're scrolled too close to the top they want to keep the scrolling position where it is, therefore\n                    // we need to manually adjust the position in that scenario.\n                    if (this.scrollTop <= 90) {\n                        // Set scrollToIndex to where the \"former oldest\" log is to avoid jumping when we prepend logs.\n                        this.scrollToIndex = this.logs.findIndex((ll) => ll._rowId === (scrollToLog === null || scrollToLog === void 0 ? void 0 : scrollToLog._rowId));\n                        if (this.scrollToIndex < 0) {\n                            this.scrollToIndex = 0;\n                        }\n                        this.scrollToAlignment = 'top';\n                        this.delayedClearScrollToIndex();\n                    }\n                    if (this.logs.length > MAX_NUM_LOGS) {\n                        // Remove logs from the \"future\" (end of array) since we're loading in the past.\n                        this.logs.splice(MAX_NUM_LOGS, this.logs.length - MAX_NUM_LOGS);\n                        this.reachedNewest = false;\n                    }\n                }\n                // Always call this (even if we don't have new logs), because `reachedOldest` could have changed.\n                this.addDateRangeStartMarker();\n            }, () => {\n                // If it's a Network Error, retry after a delay\n                if (this.getLogsOp.operation.disconnected) {\n                    this.getLogsRetryTimer = window.setTimeout(() => {\n                        this.loadMoreLogsInPast();\n                    }, 5000);\n                }\n                return true;\n            });\n        }\n    }\n    loadMoreLogsInFuture() {\n        if (this.isPolling && this.searchDirection === 'future') {\n            // Already fetching partial results so do nothing\n            return;\n        }\n        window.clearTimeout(this.getLogsRetryTimer);\n        const newestLog = this.findNewestLog();\n        // Make sure we haven't already fetched logs after this timestamp.\n        // Also make sure we haven't reached the \"newest\" (`reachedNewest` could also mean the end of the date range).\n        if (newestLog && !this.reachedNewest && this.lastLogInFutureTimestamp !== newestLog._rowId) {\n            this.searchDirection = 'future';\n            this.lastLogInFutureTimestamp = newestLog._rowId;\n            // Clear lastLogInPastTimestamp, now that we're going the opposite direction, otherwise loadMoreLogsInPast may not run.\n            this.lastLogInPastTimestamp = undefined;\n            this.scrollToIndex = undefined;\n            const numNewLogsRequested = LOGS_PER_PAGE;\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\n            this.pollLogSearch(newestLog._rowId, numNewLogsRequested, 'asc', undefined, undefined, (results) => {\n                const newLogs = results.logs;\n                this.isPartial = Boolean(results.isPartial);\n                this.minBlockTime = results.minBlockTime;\n                this.maxBlockTime = results.maxBlockTime;\n                this.rowsExamined = results.rowsExamined;\n                this.fieldValueFormatters = results.fieldValueFormatters;\n                if (!this.isPartial) {\n                    // If we got fewer results then we asked for, we're at the newest.\n                    if (results.matchesCountBeforeDedup < numNewLogsRequested) {\n                        this.reachedNewest = true;\n                    }\n                    if (this.scrolledToBottom && this.reachedNewest) {\n                        this.enableStreaming();\n                    }\n                }\n                // No need to do any more work if there aren't logs to add.\n                if (newLogs.length > 0) {\n                    // Set to the log at the end of the array, since that should be the one visible before the \"Load more\" row.\n                    const scrollToLog = this.logs.length > 0 ? this.logs[this.logs.length - 1] : undefined;\n                    this.addLogs(newLogs);\n                    this.removeOldestLogs();\n                    if (this.scrolledToBottom) {\n                        // Set scrollToIndex to where the \"former oldest\" log is to avoid jumping when we prepend logs.\n                        this.scrollToIndex = this.logs.findIndex((ll) => ll._rowId === (scrollToLog === null || scrollToLog === void 0 ? void 0 : scrollToLog._rowId));\n                        if (this.scrollToIndex < 0) {\n                            this.scrollToIndex = 0;\n                        }\n                        this.scrollToAlignment = 'bottom';\n                        this.delayedClearScrollToIndex();\n                    }\n                }\n                // Always call this (even if we don't have new logs), because `reachedNewest` could have changed.\n                this.addDateRangeEndMarker();\n            }, () => {\n                // If it's a Network Error, retry after a delay\n                if (this.getLogsOp.operation.disconnected) {\n                    this.getLogsRetryTimer = window.setTimeout(() => {\n                        this.loadMoreLogsInFuture();\n                    }, 5000);\n                }\n                return true;\n            });\n        }\n    }\n    forceLoadMoreLogsInFuture() {\n        // Signals that we should ignore queryParams.endTime so that we can actually load more logs past the current end time.\n        this.ignoreEndTime = true;\n        // Reset some state.\n        this.reachedNewest = false;\n        this.scrolledToBottom = true;\n        this.scrolledToTop = false;\n        // Remove DateRangeEnd marker.\n        const lastLog = this.logs[this.logs.length - 1];\n        const dateRangeEndExists = lastLog && !isLog(lastLog) && lastLog.markerType === MarkerType.DateRangeEnd;\n        if (dateRangeEndExists) {\n            this.logs.pop();\n        }\n        this.loadMoreLogsInFuture();\n    }\n    clearScrollToIndex() {\n        this.scrollToAlignment = undefined;\n        this.scrollToIndex = undefined;\n    }\n    cancelGetLogs() {\n        // Clear polling vars\n        this.isPolling = false;\n        window.clearTimeout(this.pollLogSearchTimeout);\n        // Never enable this.\n        // It will cause pollLogSearch to have unexpected results because `queryId` can have repeated values.\n        // this.lastQueryId = 0;\n        // Clear any fetching related vars\n        this.lastLogInPastTimestamp = undefined;\n        this.lastLogInFutureTimestamp = undefined;\n    }\n    // 🐉🐉🐉\n    // NOTE: Calling with the string `now` will have a different scroll behavior than with `Date.now()`\n    getLogs() {\n        window.clearTimeout(this.getLogsRetryTimer);\n        // Reset the state of getLogsOp every time getLogs is called.\n        // We want it to look like it hasn't run. (!hasRun)\n        this.getLogsOp = new _StoreBase__WEBPACK_IMPORTED_MODULE_3__.SimpleOperationsTracker('getLogsOp');\n        // Clear `last` variables, otherwise loadMoreLogsIn* may not run.\n        this.lastLogInFutureTimestamp = undefined;\n        this.lastLogInPastTimestamp = undefined;\n        // Reset all the state, since we want this to behave like a fresh loading of the LogsStreamPage.\n        this.logs = [];\n        this.highlightIn = false;\n        this.ignoreEndTime = false;\n        this.reachedOldest = false;\n        this.reachedNewest = false;\n        this.scrollToIndex = undefined;\n        this.isPartial = false;\n        this.minBlockTime = undefined;\n        this.maxBlockTime = undefined;\n        this.rowsExamined = undefined;\n        this.previousOnScrollLogsCount = 0;\n        this.streamingEnabled = false; // This used to be `true`, but with partial results we need to wait for those to finish (I think)\n        this.cancelEnableStreaming = false;\n        // For dateRanges, load records in the future relative to the requested timestamp (asc)\n        // For \"live\", load records in the past (desc).\n        const order = this.isDateRange ? 'asc' : 'desc';\n        this.searchDirection = order === 'asc' ? 'future' : 'past';\n        let scrolled = false;\n        const cursorRowId = this.activeRowId;\n        if (cursorRowId) {\n            this.cancelEnableStreaming = true;\n        }\n        // the delay allows the slide-up animation to finish while still displaying the loading spinner.\n        const fetch = (0,mobx__WEBPACK_IMPORTED_MODULE_1__.action)(() => {\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\n            this.pollLogSearch(cursorRowId, LOGS_PER_PAGE, order, undefined, true, (0,mobx__WEBPACK_IMPORTED_MODULE_1__.action)((results) => {\n                const newLogs = results.logs;\n                // Set partial results properties\n                this.isPartial = Boolean(results.isPartial);\n                this.minBlockTime = results.minBlockTime;\n                this.maxBlockTime = results.maxBlockTime;\n                this.rowsExamined = results.rowsExamined;\n                this.fieldValueFormatters = results.fieldValueFormatters;\n                if (this.isDateRange) {\n                    // Check if the specified row is out of the bounds of the date range.\n                    if (cursorRowId) {\n                        const cursor = newLogs.find((ll) => ll._rowId === cursorRowId);\n                        if (cursor) {\n                            const cursorDateTimestamp = new Date(cursor._time).getTime();\n                            if (cursorDateTimestamp < (this.activeQuery.timestampStart || Number.MIN_SAFE_INTEGER) ||\n                                cursorDateTimestamp > (this.activeQuery.timestampEnd || Number.MAX_SAFE_INTEGER)) {\n                                (0,mobx__WEBPACK_IMPORTED_MODULE_1__.runInAction)(() => {\n                                    this.setQueryParamsDateRange();\n                                });\n                            }\n                        }\n                    }\n                    if (!this.isPartial) {\n                        this.reachedNewest = results.matchesCountBeforeDedup < LOGS_PER_PAGE;\n                        // Since this is a time range, `reachedOldest` needs to be set to true,\n                        // unless a cursor was specified then we need to do another fetch to check.\n                        if (!cursorRowId) {\n                            this.reachedOldest = true;\n                        }\n                    }\n                    // No need to do any more work if there aren't logs to add.\n                    if (newLogs.length > 0) {\n                        // For the case where the user has scrolled to the top, set to the\n                        // log at the beginning of the array, since that should be the one visible after the \"Searched back to\" row.\n                        const scrollToLog = this.logs.length > 0 ? this.logs[0] : undefined;\n                        this.addLogs(newLogs);\n                        // Since a specific date was requested, insert a Line to indicate the\n                        // start of the date range.\n                        this.addDateRangeStartMarker(!cursorRowId);\n                        if (!scrolled) {\n                            scrolled = true;\n                            // Default to false since a timestamp was specified.\n                            this.scrolledToBottom = false;\n                        }\n                        else if (this.scrolledToTop) {\n                            // Set scrollToIndex to where the \"former oldest\" log is to avoid jumping when we prepend logs.\n                            this.scrollToIndex = this.logs.findIndex((ll) => ll._rowId === (scrollToLog === null || scrollToLog === void 0 ? void 0 : scrollToLog._rowId));\n                            if (this.scrollToIndex < 0) {\n                                this.scrollToIndex = 0;\n                            }\n                            this.scrollToAlignment = 'top';\n                            this.delayedClearScrollToIndex();\n                        }\n                        this.addDateRangeEndMarker();\n                    }\n                }\n                else {\n                    if (!this.isPartial) {\n                        // This likely won't be true is a cursorRowId is set so we skip the check.\n                        if (!cursorRowId) {\n                            // If a \"now\" timestamp was specified, we just returned the most recent data so we're at the end.\n                            this.reachedNewest = true;\n                        }\n                        this.reachedOldest = results.matchesCountBeforeDedup < LOGS_PER_PAGE; // If we didn't get the requested number of rows we hit the beginning.\n                        // This call was triggered with the intention to begin streaming,\n                        // but we needed to let partial results finish first. Now that\n                        // they're finished check if we're in the correct scrolling position; BUT first\n                        // handle one more edge case where the \"Loading more in past\" row is visible.\n                        // We need to prioritize loading in the past because there won't be a way to scroll to it in the case\n                        // where all rows are visible.\n                        // If there are zero logs total, then we want to enable streaming so that we keep\n                        // checking for logs in the background.\n                        if (this.scrolledToTop && newLogs.length === 0 && this.logs.length > 0) {\n                            // If we're scrolled to the top and didn't load any more logs, then \"Searching back to\" is showing,\n                            // and it's about to switch to the \"Loading more\" placeholder, but it won't load more unless we actually\n                            // call this.\n                            this.loadMoreLogsInPast();\n                        }\n                        else if (!cursorRowId && // Don't enable streaming if there was a specific row requested.\n                            ((!this.cancelEnableStreaming && this.scrolledToBottom) || this.logs.length === 0)) {\n                            this.enableStreaming();\n                        }\n                    }\n                    // No need to do any more work if there aren't logs to add.\n                    if (newLogs.length > 0) {\n                        // For the case where the user has scrolled to the top, set to the\n                        // log at the beginning of the array, since that should be the one visible after the \"Searched back to\" row.\n                        const scrollToLog = this.logs.length > 0 ? this.logs[0] : undefined;\n                        this.addLogs(newLogs);\n                        // Only scroll the first time we have some results.\n                        if (!scrolled) {\n                            scrolled = true;\n                            this.scrollToBottom();\n                            if (!this.isPartial && !cursorRowId) {\n                                // Enable streaming if we have a full result set.\n                                this.enableStreaming();\n                            }\n                        }\n                        else if (this.scrolledToTop) {\n                            // Set scrollToIndex to where the \"former oldest\" log is to avoid jumping when we prepend logs.\n                            this.scrollToIndex = this.logs.findIndex((ll) => ll._rowId === (scrollToLog === null || scrollToLog === void 0 ? void 0 : scrollToLog._rowId));\n                            if (this.scrollToIndex < 0) {\n                                this.scrollToIndex = 0;\n                            }\n                            this.scrollToAlignment = 'top';\n                            this.delayedClearScrollToIndex();\n                        }\n                    }\n                }\n                // Give the initial set of rows a moment to load. We don't need to highlight those.\n                window.setTimeout((0,mobx__WEBPACK_IMPORTED_MODULE_1__.action)(() => {\n                    this.highlightIn = true;\n                }), 500);\n                this.isInitialLoad = false;\n            }), (0,mobx__WEBPACK_IMPORTED_MODULE_1__.action)((err) => {\n                // If it's a Network Error, retry after a delay\n                if (this.getLogsOp.operation.disconnected) {\n                    this.getLogsRetryTimer = window.setTimeout(() => {\n                        this.getLogs();\n                    }, 5000);\n                }\n            }));\n        });\n        if (this.getLogsDelay) {\n            window.setTimeout(() => {\n                fetch();\n            }, this.getLogsDelay);\n        }\n        else {\n            fetch();\n        }\n        // reset to zero after every call.\n        this.setGetLogsDelay(0);\n    }\n    resetStore() {\n        this.previousSelectedDatasetId = undefined;\n    }\n    delayedClearScrollToIndex() {\n        // Clear scrollToIndex after a long enough time where the components have updated, but before another partial result comes in.\n        // This allows us to set scrollToIndex to the same `rowId` without `LogStream.tsx` rejecting it.\n        window.setTimeout(() => {\n            this.clearScrollToIndex();\n        }, 50);\n    }\n    findOldestLog() {\n        // Since logs are sorted oldest to newest, start search from the start of the array.\n        for (let i = 0; i < this.logs.length; i = i + 1) {\n            const item = this.logs[i];\n            if (isLog(item)) {\n                return item;\n            }\n        }\n        return undefined;\n    }\n    findNewestLog() {\n        // Since logs are sorted oldest to newest, start search from the end of the array.\n        for (let i = this.logs.length - 1; i >= 0; i = i - 1) {\n            const item = this.logs[i];\n            if (isLog(item)) {\n                return item;\n            }\n        }\n        return undefined;\n    }\n    buildFilter(queryRequest, query) {\n        var _a;\n        queryRequest.filter = JSON.parse(query);\n        // We need to manually add all VirtualFields that were referenced in the filter to the final queryRequest to prevent the server from having to do any extra work.\n        const containsVirtualField = (filter, virtualFieldName) => {\n            if (!filter) {\n                return false;\n            }\n            if (filter.field === virtualFieldName) {\n                return true;\n            }\n            else if (filter.children) {\n                return filter.children.some((child) => containsVirtualField(child, virtualFieldName));\n            }\n            else {\n                return false;\n            }\n        };\n        const queryVirtualFields = this.datasetStore.virtualFields.filter((vf) => containsVirtualField(queryRequest.filter, vf.name));\n        // Map virtual fields to columns\n        const virtualColumns = Object.values(queryVirtualFields).map(({ name, expression }) => ({\n            alias: name,\n            expr: expression,\n        }));\n        queryRequest.virtualFields = virtualColumns.length ? virtualColumns : undefined;\n        (0,_DatasetStore__WEBPACK_IMPORTED_MODULE_8__.setCaseSensitive)(queryRequest.filter, ((_a = queryRequest === null || queryRequest === void 0 ? void 0 : queryRequest.queryOptions) === null || _a === void 0 ? void 0 : _a.caseSensitive) === 'true');\n    }\n    performLogSearch(cursorRowId, // Cursor is on an event basis, so you can tell axiomdb to skip all events until after the cursor (useful to prevent duplicates on the Stream view)\n    limit, order, continuationToken, // ContinuationToken is on a query basis, i.e. axiomdb couldn’t build a complete result so its sending you a first part and a “cursor” which you can set on the same request and send it again to get a (more) complete result (aka streaming query)\n    stream, includeCursor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { datasetId } = this.activeQuery;\n            if (!datasetId) {\n                // This shouldn't happen (in theory)\n                throw new Error('DatasetId not set');\n            }\n            const payload = Object.assign(Object.assign({}, this.activeQueryRequest), { limit: limit, order: [{ field: '_time', desc: order === 'desc' }] });\n            // Used when a customer wants to \"load more in future\" on a custom date range.\n            if (this.ignoreEndTime) {\n                payload.endTime = _util_dates__WEBPACK_IMPORTED_MODULE_5__.MAX_DATE.toISOString();\n            }\n            if (cursorRowId) {\n                payload.cursor = cursorRowId;\n            }\n            if (continuationToken) {\n                payload.continuationToken = continuationToken;\n            }\n            payload.includeCursor = includeCursor;\n            const params = { id: datasetId };\n            if (stream) {\n                params['streaming-duration'] = '1s';\n            }\n            // Allow Axiom to set nocache via the page Url for debugging.\n            const { activeQuery } = _ViewStore__WEBPACK_IMPORTED_MODULE_4__.viewStore;\n            params.nocache = activeQuery.nocache === 'true';\n            const streamingEnabled = this.streamingEnabled;\n            // Have to do `payload as any` because of Filter mismatch.\n            return _shared_dash__WEBPACK_IMPORTED_MODULE_9__.dashApi.queryDataset(params, payload).then((results) => {\n                var _a;\n                // Skip parsing server error messages if we're streaming. (prevents errors continuing to popup after you dismiss them)\n                if (!streamingEnabled) {\n                    parseQueryMessages(results);\n                }\n                let rslts = (results.matches || []).map((item) => {\n                    const dateTime = new Date(item._time);\n                    const data = item.data || {};\n                    const dataKeys = (0,_DatasetStore__WEBPACK_IMPORTED_MODULE_8__.pickRawKeys)(data);\n                    const l = {\n                        _time: item._time,\n                        _sysTime: item._sysTime,\n                        _rowId: item._rowId,\n                        data: data,\n                        dataKeys: dataKeys,\n                        hostname: data.hostname,\n                        application: data.application,\n                        text: data.text,\n                        severity: (0,_DatasetStore__WEBPACK_IMPORTED_MODULE_8__.getSeverity)(item.data),\n                        // Format the date/time once/now, so we don't have to keep doing it inside the components when re-rendering.\n                        formattedDate: this.formatDate(dateTime),\n                        formattedDateTime: this.formatDateTime(dateTime),\n                    };\n                    return l;\n                });\n                // we always want ascending logs\n                if (order === 'desc') {\n                    rslts = rslts.reverse();\n                }\n                const status = results.status;\n                const fieldValueFormatters = (0,_ElementsDatasetStore__WEBPACK_IMPORTED_MODULE_10__.fieldsMetaToFieldValueFormatters)(results.fieldsMeta);\n                const searchResult = {\n                    isPartial: status.isPartial,\n                    continuationToken: status.continuationToken,\n                    matchesCountBeforeDedup: ((_a = results.matches) === null || _a === void 0 ? void 0 : _a.length) || 0,\n                    minBlockTime: status.minBlockTime,\n                    maxBlockTime: status.maxBlockTime,\n                    rowsExamined: status.rowsExamined,\n                    logs: rslts,\n                    fieldValueFormatters: fieldValueFormatters,\n                };\n                return searchResult;\n            });\n        });\n    }\n    pollLogSearch(cursorRowId, limit, order, continuationToken, includeCursor, next, onError) {\n        if (!this.datasetStore.selectedDatasetId) {\n            throw new Error('selectedDatasetId not set');\n        }\n        this.isPolling = true;\n        // clear timeout\n        window.clearTimeout(this.pollLogSearchTimeout);\n        const queryId = this.lastQueryId + 1;\n        this.lastQueryId = queryId;\n        const search = this.performLogSearch(cursorRowId, limit, order, continuationToken, true, includeCursor).then((results) => {\n            if (this.lastQueryId === queryId) {\n                if (results.isPartial && !E2E_TESTING) {\n                    this.pollLogSearchTimeout = window.setTimeout(() => {\n                        this.pollLogSearch(cursorRowId, limit, order, results.continuationToken, includeCursor, next, onError);\n                    }, 250);\n                }\n                else {\n                    (0,mobx__WEBPACK_IMPORTED_MODULE_1__.runInAction)(() => {\n                        this.isPolling = false;\n                    });\n                }\n            }\n            return results;\n        });\n        // Call fn with subsequent partial results if no other request has been made.\n        const nextWrapped = (results) => {\n            if (this.lastQueryId === queryId && next) {\n                // Clear old errors.\n                _components_Notification__WEBPACK_IMPORTED_MODULE_7__.notification.dismiss(TOAST_ID);\n                // Create a lookup table to dedupe partial results\n                const mapRowIdLog = this.logs.reduce((map, ll) => {\n                    map[ll._rowId] = ll;\n                    return map;\n                }, {});\n                // Filter out logs that are already displayed\n                results.logs = results.logs.filter((ll) => !mapRowIdLog[ll._rowId]);\n                next(results);\n            }\n        };\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\n        this.operate(this.getLogsOp.operation, search, nextWrapped, undefined, undefined, TOAST_ID, (0,mobx__WEBPACK_IMPORTED_MODULE_1__.action)((err) => {\n            // Ignore stale query errors.\n            if (this.lastQueryId === queryId) {\n                return this.handleError(this.getLogsOp.operation, err, false, onError);\n            }\n            else {\n                return undefined;\n            }\n        }));\n    }\n    addLogs(newLogs) {\n        // Add new logs.\n        this.logs.push(...newLogs);\n        // Remove old day dividers.\n        this.logs = this.logs.filter((log) => isLog(log) || log.markerType !== MarkerType.DayDivider);\n        // Sort logs.\n        this.logs = this.logs.slice().sort((a, b) => {\n            // According to mhr3 \"rowId is lexicographically sortable\"\n            return a._rowId.localeCompare(b._rowId);\n        });\n        // Re-add day dividers.\n        this.addDayDividers();\n    }\n    addDayDividers(start, end) {\n        const logs = this.logs;\n        const startIndex = !start || start < 0 ? 0 : start;\n        let endIndex = !end || end > logs.length ? logs.length : end;\n        for (let xx = startIndex; xx < endIndex; xx += 1) {\n            const prevLog = xx > 0 ? logs[xx - 1] : logs[xx];\n            // Skip Start and End Markers.\n            if (isLog(prevLog) ||\n                (prevLog.markerType !== MarkerType.DateRangeStart && prevLog.markerType !== MarkerType.DateRangeEnd)) {\n                const isSameDay = moment_timezone__WEBPACK_IMPORTED_MODULE_2___default().tz(logs[xx]._time, _UserProfileStore__WEBPACK_IMPORTED_MODULE_11__.userProfileStore.timeZone)\n                    .isSame(moment_timezone__WEBPACK_IMPORTED_MODULE_2___default().tz(prevLog._time, _UserProfileStore__WEBPACK_IMPORTED_MODULE_11__.userProfileStore.timeZone), 'day');\n                if (!isSameDay && logs[xx].markerType !== MarkerType.DayDivider) {\n                    // insert a day divider marker\n                    const dateTime = new Date(logs[xx]._time);\n                    const isoString = dateTime.toISOString();\n                    const marker = {\n                        _time: isoString,\n                        _sysTime: isoString,\n                        _rowId: dateToTimestamp36(dateTime),\n                        markerType: MarkerType.DayDivider,\n                        formattedDate: this.formatDate(dateTime),\n                        formattedDateTime: this.formatDateTime(dateTime),\n                    };\n                    logs.splice(xx, 0, marker);\n                    // we've just inserted new \"log\"\n                    endIndex += 1;\n                }\n            }\n        }\n    }\n    addDateRangeStartMarker(reachedOldestOverride) {\n        // Add a marker if there is a timestampStart and we reached the oldest one.\n        const timestampStart = this.activeQuery.timestampStart;\n        const firstLog = this.logs[0];\n        const dateRangeStartExists = firstLog && !isLog(firstLog) && firstLog.markerType === MarkerType.DateRangeStart;\n        if (!dateRangeStartExists &&\n            this.logs.length > 0 &&\n            timestampStart &&\n            (this.reachedOldest || reachedOldestOverride)) {\n            const dateTime = new Date(timestampStart);\n            const isoString = dateTime.toISOString();\n            const marker = {\n                _time: isoString,\n                _sysTime: isoString,\n                _rowId: dateToTimestamp36(dateTime),\n                markerType: MarkerType.DateRangeStart,\n                formattedDate: this.formatDate(dateTime),\n                formattedDateTime: this.formatDateTime(dateTime),\n            };\n            this.logs.unshift(marker);\n        }\n    }\n    addDateRangeEndMarker() {\n        // Ignore quickRange because \"end\" is always going to be \"now\".\n        const queryParamsTimestampEnd = (0,_util_dates__WEBPACK_IMPORTED_MODULE_5__.parseTimestampNotNow)(this.queryParams.timestampEnd);\n        // Add a marker if there is a timestampEnd and we reached the newest one.\n        const lastLog = this.logs[this.logs.length - 1];\n        const dateRangeEndExists = lastLog && !isLog(lastLog) && lastLog.markerType === MarkerType.DateRangeEnd;\n        if (!dateRangeEndExists && this.logs.length > 0 && queryParamsTimestampEnd && this.reachedNewest) {\n            const dateTime = new Date(queryParamsTimestampEnd);\n            const isoString = dateTime.toISOString();\n            const marker = {\n                _time: isoString,\n                _sysTime: isoString,\n                _rowId: dateToTimestamp36(dateTime),\n                markerType: MarkerType.DateRangeEnd,\n                formattedDate: this.formatDate(dateTime),\n                formattedDateTime: this.formatDateTime(dateTime),\n            };\n            this.logs.push(marker);\n        }\n    }\n    formatDate(dateTime) {\n        return (0,_util_dates__WEBPACK_IMPORTED_MODULE_5__.formattedDateShort)(_UserProfileStore__WEBPACK_IMPORTED_MODULE_11__.userProfileStore.timeZone, dateTime);\n    }\n    formatDateTime(dateTime) {\n        return (0,_util_dates__WEBPACK_IMPORTED_MODULE_5__.formattedDateShort)(_UserProfileStore__WEBPACK_IMPORTED_MODULE_11__.userProfileStore.timeZone, dateTime, {\n            hour: '2-digit',\n            minute: '2-digit',\n            second: '2-digit',\n            hourCycle: 'h23',\n        });\n    }\n    removeOldestLogs() {\n        if (this.logs.length > MAX_NUM_LOGS) {\n            // Remove logs from the \"past\" (beginning of array) since we're loading in the future.\n            const removedLogs = this.logs.splice(0, this.logs.length - MAX_NUM_LOGS);\n            this.reachedOldest = false;\n            return removedLogs.length;\n        }\n        return 0;\n    }\n}\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.observable\n], LogStreamStore.prototype, \"highlightIn\", void 0);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.observable\n], LogStreamStore.prototype, \"highlightRowId\", void 0);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.observable.shallow\n], LogStreamStore.prototype, \"logs\", void 0);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.observable\n], LogStreamStore.prototype, \"fieldValueFormatters\", void 0);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.observable\n], LogStreamStore.prototype, \"queryParams\", void 0);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.observable\n], LogStreamStore.prototype, \"queryParserError\", void 0);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.observable\n], LogStreamStore.prototype, \"reachedOldest\", void 0);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.observable\n], LogStreamStore.prototype, \"reachedNewest\", void 0);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.observable\n], LogStreamStore.prototype, \"scrollToAlignment\", void 0);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.observable\n], LogStreamStore.prototype, \"scrollToIndex\", void 0);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.observable\n], LogStreamStore.prototype, \"scrolledToBottom\", void 0);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.observable\n], LogStreamStore.prototype, \"scrolledToTop\", void 0);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.observable\n], LogStreamStore.prototype, \"scrollTop\", void 0);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.observable\n], LogStreamStore.prototype, \"getLogsDelay\", void 0);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.observable\n], LogStreamStore.prototype, \"streamingEnabled\", void 0);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.observable\n], LogStreamStore.prototype, \"activeRowId\", void 0);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.observable\n], LogStreamStore.prototype, \"ignoreEndTime\", void 0);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.observable\n], LogStreamStore.prototype, \"isPartial\", void 0);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.observable\n], LogStreamStore.prototype, \"maxBlockTime\", void 0);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.observable\n], LogStreamStore.prototype, \"minBlockTime\", void 0);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.observable\n], LogStreamStore.prototype, \"rowsExamined\", void 0);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.observable\n], LogStreamStore.prototype, \"overflows\", void 0);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.observable\n], LogStreamStore.prototype, \"searchDirection\", void 0);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.observable\n], LogStreamStore.prototype, \"streamingInterval\", void 0);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.observable\n], LogStreamStore.prototype, \"isPolling\", void 0);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.computed\n], LogStreamStore.prototype, \"isLive\", null);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.computed\n], LogStreamStore.prototype, \"isDateRange\", null);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.computed\n], LogStreamStore.prototype, \"scrollToRowId\", null);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.computed\n], LogStreamStore.prototype, \"streamingState\", null);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.computed\n], LogStreamStore.prototype, \"activeRow\", null);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.computed\n], LogStreamStore.prototype, \"newerRow\", null);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.computed\n], LogStreamStore.prototype, \"olderRow\", null);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.computed\n], LogStreamStore.prototype, \"activeQuery\", null);\n__decorate([\n    (0,mobx__WEBPACK_IMPORTED_MODULE_1__.computed)({ keepAlive: true }) // Add keepAlive to cache the result, because this isn't be observed anywhere.\n], LogStreamStore.prototype, \"activeQueryRequest\", null);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.action.bound\n], LogStreamStore.prototype, \"scrollToBottom\", null);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.action.bound\n], LogStreamStore.prototype, \"setGetLogsDelay\", null);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.action.bound\n], LogStreamStore.prototype, \"setOverflows\", null);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.action.bound\n], LogStreamStore.prototype, \"enableStreaming\", null);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.action.bound\n], LogStreamStore.prototype, \"disableStreaming\", null);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.action.bound\n], LogStreamStore.prototype, \"jumpToLive\", null);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.action.bound\n], LogStreamStore.prototype, \"onScroll\", null);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.action.bound\n], LogStreamStore.prototype, \"loadMoreLogsInPast\", null);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.action.bound\n], LogStreamStore.prototype, \"loadMoreLogsInFuture\", null);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.action.bound\n], LogStreamStore.prototype, \"forceLoadMoreLogsInFuture\", null);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.action.bound\n], LogStreamStore.prototype, \"clearScrollToIndex\", null);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.action.bound\n], LogStreamStore.prototype, \"cancelGetLogs\", null);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.action.bound\n], LogStreamStore.prototype, \"getLogs\", null);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.action.bound\n], LogStreamStore.prototype, \"resetStore\", null);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_1__.action.bound\n], LogStreamStore.prototype, \"pollLogSearch\", null);\n// Encode the TimeStamp so it matches the first chunk of our `rowId`.\nfunction dateToTimestamp36(date) {\n    const nanoSecs = BigInt(date.valueOf()) * BigInt(1000000);\n    const ts = nanoSecs.toString(36).padStart(13, '0');\n    return `${ts}-0000000000000000-0000`;\n}\nfunction parseQueryMessages(response) {\n    var _a;\n    const messages = ((_a = response.status) === null || _a === void 0 ? void 0 : _a.messages) || [];\n    messages.forEach((message) => {\n        let priority = 'Error';\n        switch (message.priority) {\n            // Skip localizing the debug and trace since that shouldn't really happen.\n            case 'trace':\n                priority = 'Trace';\n                break;\n            case 'debug':\n                priority = 'Debug';\n                break;\n            case 'info':\n                priority = 'Info';\n                break;\n            case 'warn':\n                priority = 'Warning';\n                break;\n            case 'error':\n                priority = 'Error';\n                break;\n            case 'fatal':\n                priority = 'Fatal';\n                break;\n        }\n        if (['trace', 'debug', 'info'].includes(message.priority)) {\n            _components_Notification__WEBPACK_IMPORTED_MODULE_7__.notification.info({ message: priority, description: message.msg }, { autoClose: false, toastId: message.msg });\n        }\n        else {\n            _components_Notification__WEBPACK_IMPORTED_MODULE_7__.notification.error({ message: priority, description: message.msg }, { autoClose: false, toastId: message.msg });\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RyxPQUFPLENBQUM7Z0JBQ25CLE1BQU07WUFDUixLQUFLLE1BQU07Z0JBQ1QsUUFBUSxHQUFHLE1BQU0sQ0FBQztnQkFDbEIsTUFBTTtZQUNSLEtBQUssTUFBTTtnQkFDVCxRQUFRLEdBQUcsU0FBUyxDQUFDO2dCQUNyQixNQUFNO1lBQ1IsS0FBSyxPQUFPO2dCQUNWLFFBQVEsR0FBRyxPQUFPLENBQUM7Z0JBQ25CLE1BQU07WUFDUixLQUFLLE9BQU87Z0JBQ1YsUUFBUSxHQUFHLE9BQU8sQ0FBQztnQkFDbkIsTUFBTTtTQUNUO1FBRUQsSUFBSSxDQUFDLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUN6RCx1RUFBaUIsQ0FBQyxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsV0FBVyxFQUFFLE9BQU8sQ0FBQyxHQUFHLEVBQUUsRUFBRSxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLE9BQU8sQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO1NBQ2hIO2FBQU07WUFDTCx3RUFBa0IsQ0FBQyxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsV0FBVyxFQUFFLE9BQU8sQ0FBQyxHQUFHLEVBQUUsRUFBRSxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLE9BQU8sQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO1NBQ2pIO0lBQ0gsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDIiwic291cmNlcyI6WyJmaWxlOi8vL1VzZXJzL3dhdGVybWVsb24vUHJvamVjdHMvQXhpb20vY29kZS9heGlvbWhxLWFwcC9mcm9udGVuZC9saWIvZGFzaC9zdG9yZXMvTG9nU3RyZWFtU3RvcmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gY1NwZWxsOmlnbm9yZSBkZWR1cCBpbXVybXVyaGFzaCBNdXJtdXJIYXNoMyBjb250YWluZXJkIG5vY2FjaGUgbnRwZCBzeXNsb2cgc3lzdGVtZCB1ZGV2ZCB2ZmllbGRcbmltcG9ydCBpc0VxdWFsIGZyb20gJ2xvZGFzaC9pc0VxdWFsJztcbmltcG9ydCB7IGFjdGlvbiwgY29tcHV0ZWQsIElSZWFjdGlvbkRpc3Bvc2VyLCBvYnNlcnZhYmxlLCByZWFjdGlvbiwgcnVuSW5BY3Rpb24sIHRvSlMgfSBmcm9tICdtb2J4JztcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50LXRpbWV6b25lJztcblxuaW1wb3J0IHsgbm90aWZpY2F0aW9uIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Ob3RpZmljYXRpb24nO1xuaW1wb3J0IHsgZGFzaEFwaSwgRW50cnksIEZpbHRlciwgUXVlcnlEYXRhc2V0UGFyYW1zLCBRdWVyeVJlcXVlc3RXaXRoT3B0aW9ucywgU3RhdHVzIH0gZnJvbSAnLi4vc2hhcmVkL2Rhc2gnO1xuaW1wb3J0IHtcbiAgY3VycmVudFRpbWVzdGFtcEVuZE5vd0FzVW5kZWZpbmVkLFxuICBjdXJyZW50VGltZXN0YW1wU3RhcnQsXG4gIGN1cnJlbnRUaW1lc3RhbXBTdGFydE5vd0FzVW5kZWZpbmVkLFxuICBGYW5jeVRpbWUsXG4gIGZvcm1hdHRlZERhdGVTaG9ydCxcbiAgTUFYX0RBVEUsXG4gIE1JTl9EQVRFLFxuICBwYXJzZVRpbWVzdGFtcE5vdE5vdyxcbiAgUXVpY2tSYW5nZSxcbn0gZnJvbSAnLi4vdXRpbC9kYXRlcyc7XG5pbXBvcnQgeyBpc051bWVyaWMgfSBmcm9tICcuLi91dGlsL251bWJlcnMnO1xuXG5pbXBvcnQge1xuICBEYXRhc2V0U3RvcmUsXG4gIEZpZWxkVmFsdWVGb3JtYXR0ZXJzLFxuICBnZXRTZXZlcml0eSxcbiAgcGlja1Jhd0tleXMsXG4gIHNldENhc2VTZW5zaXRpdmUsXG4gIFNldmVyaXR5LFxufSBmcm9tICcuL0RhdGFzZXRTdG9yZSc7XG5pbXBvcnQgeyBmaWVsZHNNZXRhVG9GaWVsZFZhbHVlRm9ybWF0dGVycyB9IGZyb20gJy4vRWxlbWVudHNEYXRhc2V0U3RvcmUnO1xuaW1wb3J0IHsgT3BlcmF0aW9uLCBTaW1wbGVPcGVyYXRpb25zVHJhY2tlciwgU3RvcmVCYXNlIH0gZnJvbSAnLi9TdG9yZUJhc2UnO1xuaW1wb3J0IHsgdXNlclByb2ZpbGVTdG9yZSB9IGZyb20gJy4vVXNlclByb2ZpbGVTdG9yZSc7XG5pbXBvcnQgeyB2aWV3U3RvcmUgfSBmcm9tICcuL1ZpZXdTdG9yZSc7XG5cbmNvbnN0IERFRkFVTFRfTE9HU19SRUZSRVNIX1JBVEUgPSAxMDAwO1xuY29uc3QgRTJFX1RFU1RJTkcgPSBwcm9jZXNzLmVudi5FMkVfVEVTVElORyA9PT0gJ3RydWUnO1xuY29uc3QgTUFYX05VTV9MT0dTID0gNTAwO1xuY29uc3QgTE9HU19QRVJfUEFHRSA9IDEwMDtcbmNvbnN0IFRPQVNUX0lEID0gJ2dldExvZ3MnO1xuY29uc3QgTE9HU19SRUZSRVNIX1JBVEUgPSBOdW1iZXIocHJvY2Vzcy5lbnYuTE9HU19SRUZSRVNIX1JBVEUpIHx8IERFRkFVTFRfTE9HU19SRUZSRVNIX1JBVEU7XG5cbmV4cG9ydCB0eXBlIE9yZGVyRGlyZWN0aW9uID0gJ2FzYycgfCAnZGVzYyc7XG5cbmV4cG9ydCBlbnVtIE1hcmtlclR5cGUge1xuICBEYXRlUmFuZ2VTdGFydCA9ICdkYXRlUmFuZ2VTdGFydCcsXG4gIERhdGVSYW5nZUVuZCA9ICdkYXRlUmFuZ2VFbmQnLFxuICBEYXlEaXZpZGVyID0gJ2RheURpdmlkZXInLFxuICBMaW5lID0gJ2xpbmUnLFxufVxuXG5leHBvcnQgZW51bSBTdHJlYW1pbmdTdGF0ZSB7XG4gIExpdmUgPSAnbGl2ZScsXG4gIFBvbGxpbmcgPSAncG9sbGluZycsXG4gIFBhdXNlZE1hbnVhbGx5ID0gJ3BhdXNlZE1hbnVhbGx5JyxcbiAgUGF1c2VkU2Nyb2xsaW5nID0gJ3BhdXNlZFNjcm9sbGluZycsXG59XG5cbmV4cG9ydCB0eXBlIFNjcm9sbFRvQWxpZ25tZW50ID0gJ3RvcCcgfCAnY2VudGVyJyB8ICdib3R0b20nO1xuXG5leHBvcnQgaW50ZXJmYWNlIEluamVjdGVkTG9nU3RyZWFtU3RvcmUge1xuICBsb2dTdHJlYW1TdG9yZTogTG9nU3RyZWFtU3RvcmU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWN0aXZlUXVlcnkge1xuICBkYXRhc2V0SWQ/OiBzdHJpbmc7XG4gIHF1ZXJ5U3RyaW5nPzogc3RyaW5nO1xuICB0aW1lc3RhbXBTdGFydD86IG51bWJlcjtcbiAgdGltZXN0YW1wRW5kPzogbnVtYmVyO1xuICBjYXNlU2Vuc2l0aXZlPzogYm9vbGVhbjtcbiAgaW50ZWdyYXRpb25zRmlsdGVyPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIExvZ0RhdGEge1xuICBba2V5OiBzdHJpbmddOiBhbnk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTG9nQmFzZSB7XG4gIF90aW1lOiBzdHJpbmc7XG4gIF9zeXNUaW1lOiBzdHJpbmc7XG4gIF9yb3dJZDogc3RyaW5nO1xuICBmb3JtYXR0ZWREYXRlPzogc3RyaW5nO1xuICBmb3JtYXR0ZWREYXRlVGltZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMb2cgZXh0ZW5kcyBMb2dCYXNlIHtcbiAgZGF0YTogTG9nRGF0YTtcbiAgZGF0YUtleXM6IHN0cmluZ1tdO1xuICBob3N0bmFtZT86IHN0cmluZztcbiAgYXBwbGljYXRpb24/OiBzdHJpbmc7XG4gIHRleHQ/OiBzdHJpbmc7XG4gIHNldmVyaXR5OiBTZXZlcml0eTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMb2dTdHJlYW1RdWVyeVBhcmFtcyB7XG4gIHRpbWVzdGFtcFN0YXJ0PzogRmFuY3lUaW1lO1xuICB0aW1lc3RhbXBFbmQ/OiBGYW5jeVRpbWU7XG4gIHF1aWNrUmFuZ2U/OiBRdWlja1JhbmdlO1xuICBxdWVyeVN0cmluZz86IHN0cmluZztcbiAgc2F2ZWRRdWVyeUlkPzogc3RyaW5nO1xuICBjYXNlU2Vuc2l0aXZlPzogYm9vbGVhbjtcbiAgaW50ZWdyYXRpb25zRmlsdGVyPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIExvZ1NlYXJjaFJlc3VsdCB7XG4gIGlzUGFydGlhbD86IGJvb2xlYW47XG4gIGNvbnRpbnVhdGlvblRva2VuPzogc3RyaW5nO1xuICBtaW5CbG9ja1RpbWU/OiBzdHJpbmc7XG4gIG1heEJsb2NrVGltZT86IHN0cmluZztcbiAgbWF0Y2hlc0NvdW50QmVmb3JlRGVkdXA6IG51bWJlcjtcbiAgbG9nczogTG9nW107XG4gIHJvd3NFeGFtaW5lZDogbnVtYmVyO1xuICBmaWVsZFZhbHVlRm9ybWF0dGVycz86IEZpZWxkVmFsdWVGb3JtYXR0ZXJzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIExvZ3NBdXRvY29tcGxldGVSZXN1bHQge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWFya2VyIGV4dGVuZHMgTG9nQmFzZSB7XG4gIG1hcmtlclR5cGU6IE1hcmtlclR5cGU7XG59XG5cbmV4cG9ydCB0eXBlIExvZ1N0cmVhbSA9IE1hcmtlciB8IExvZztcblxuZXhwb3J0IGZ1bmN0aW9uIGlzTG9nKGFyZzogTG9nU3RyZWFtIHwgdW5kZWZpbmVkKTogYXJnIGlzIExvZyB7XG4gIHJldHVybiAhIWFyZyAmJiAoYXJnIGFzIExvZykuZGF0YSAhPT0gdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgY2xhc3MgTG9nU3RyZWFtU3RvcmUgZXh0ZW5kcyBTdG9yZUJhc2Uge1xuICBAb2JzZXJ2YWJsZVxuICBwdWJsaWMgaGlnaGxpZ2h0SW46IGJvb2xlYW4gPSBmYWxzZTtcbiAgQG9ic2VydmFibGVcbiAgcHVibGljIGhpZ2hsaWdodFJvd0lkOiBzdHJpbmcgPSAnJztcbiAgLy8gQ3VycmVudGx5IG5vIG5lZWQgdG8gb2JzZXJ2ZSBlYWNoIGluZGl2aWR1YWwgbG9nIG9iamVjdC4gT2JzZXJ2aW5nIGp1c3QgdGhlIGFycmF5IGlzIGVub3VnaC5cbiAgQG9ic2VydmFibGUuc2hhbGxvd1xuICBwdWJsaWMgbG9nczogTG9nU3RyZWFtW10gPSBbXTtcbiAgQG9ic2VydmFibGVcbiAgcHVibGljIGZpZWxkVmFsdWVGb3JtYXR0ZXJzPzogRmllbGRWYWx1ZUZvcm1hdHRlcnM7XG4gIEBvYnNlcnZhYmxlXG4gIHB1YmxpYyBxdWVyeVBhcmFtczogTG9nU3RyZWFtUXVlcnlQYXJhbXMgPSB7XG4gICAgLy8gTmVlZCB0byBpbml0aWFsaXplIHRvIHVuZGVmaW5lZCBzbyBNb2J4IGNhbiBvYnNlcnZlIGl0LlxuICAgIHRpbWVzdGFtcFN0YXJ0OiB1bmRlZmluZWQsXG4gICAgdGltZXN0YW1wRW5kOiB1bmRlZmluZWQsXG4gICAgcXVpY2tSYW5nZTogdW5kZWZpbmVkLFxuICAgIHF1ZXJ5U3RyaW5nOiB1bmRlZmluZWQsXG4gICAgY2FzZVNlbnNpdGl2ZTogdW5kZWZpbmVkLFxuICAgIGludGVncmF0aW9uc0ZpbHRlcjogdW5kZWZpbmVkLFxuICB9O1xuICBAb2JzZXJ2YWJsZVxuICBwdWJsaWMgcXVlcnlQYXJzZXJFcnJvcjogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICBAb2JzZXJ2YWJsZVxuICBwdWJsaWMgcmVhY2hlZE9sZGVzdDogYm9vbGVhbiA9IGZhbHNlO1xuICBAb2JzZXJ2YWJsZVxuICBwdWJsaWMgcmVhY2hlZE5ld2VzdDogYm9vbGVhbiA9IGZhbHNlO1xuICBAb2JzZXJ2YWJsZVxuICBwdWJsaWMgc2Nyb2xsVG9BbGlnbm1lbnQ/OiBTY3JvbGxUb0FsaWdubWVudDtcbiAgQG9ic2VydmFibGVcbiAgcHVibGljIHNjcm9sbFRvSW5kZXg/OiBudW1iZXI7XG4gIEBvYnNlcnZhYmxlXG4gIHB1YmxpYyBzY3JvbGxlZFRvQm90dG9tOiBib29sZWFuID0gZmFsc2U7XG4gIEBvYnNlcnZhYmxlXG4gIHB1YmxpYyBzY3JvbGxlZFRvVG9wOiBib29sZWFuID0gdHJ1ZTtcbiAgQG9ic2VydmFibGVcbiAgcHVibGljIHNjcm9sbFRvcDogbnVtYmVyID0gMDtcbiAgQG9ic2VydmFibGVcbiAgcHVibGljIGdldExvZ3NEZWxheTogbnVtYmVyID0gMDtcbiAgQG9ic2VydmFibGVcbiAgcHVibGljIHN0cmVhbWluZ0VuYWJsZWQ6IGJvb2xlYW4gPSB0cnVlO1xuICBAb2JzZXJ2YWJsZVxuICBwdWJsaWMgYWN0aXZlUm93SWQ6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgQG9ic2VydmFibGVcbiAgcHVibGljIGlnbm9yZUVuZFRpbWU6IGJvb2xlYW4gPSBmYWxzZTtcbiAgQG9ic2VydmFibGVcbiAgcHVibGljIGlzUGFydGlhbDogYm9vbGVhbiA9IGZhbHNlO1xuICBAb2JzZXJ2YWJsZVxuICBwdWJsaWMgbWF4QmxvY2tUaW1lOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gIEBvYnNlcnZhYmxlXG4gIHB1YmxpYyBtaW5CbG9ja1RpbWU6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgQG9ic2VydmFibGVcbiAgcHVibGljIHJvd3NFeGFtaW5lZDogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICBAb2JzZXJ2YWJsZVxuICBwdWJsaWMgb3ZlcmZsb3dzOiBib29sZWFuID0gZmFsc2U7XG4gIEBvYnNlcnZhYmxlXG4gIHB1YmxpYyBzZWFyY2hEaXJlY3Rpb246ICdwYXN0JyB8ICdmdXR1cmUnID0gJ3Bhc3QnO1xuICBAb2JzZXJ2YWJsZVxuICBwdWJsaWMgc3RyZWFtaW5nSW50ZXJ2YWw6IG51bWJlciA9IExPR1NfUkVGUkVTSF9SQVRFO1xuICBAb2JzZXJ2YWJsZVxuICBwdWJsaWMgaXNQb2xsaW5nOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHVibGljIGdldExvZ3NPcCA9IG5ldyBTaW1wbGVPcGVyYXRpb25zVHJhY2tlcignZ2V0TG9nc09wJyk7XG5cbiAgcHVibGljIGRhdGFzZXRTdG9yZTogRGF0YXNldFN0b3JlO1xuXG4gIHByb3RlY3RlZCBpc0luaXRpYWxMb2FkID0gdHJ1ZTtcblxuICBwcml2YXRlIGNhbmNlbEVuYWJsZVN0cmVhbWluZyA9IGZhbHNlO1xuICBwcml2YXRlIGRpc3Bvc2luZzogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIGdldExvZ3NSZXRyeVRpbWVyOiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gIC8vIFRoZSBuZXh0IHR3byB2YXJpYWJsZXMgcHJldmVudCBtdWx0aXBsZSByZXF1ZXN0cyBmcm9tIGhhcHBlbmluZyBiZWNhdXNlIGxvYWRNb3JlTG9nc0luKiBjYW4gYmUgY2FsbGVkIG11bHRpcGxlIHRpbWVzLlxuICBwcml2YXRlIGxhc3RMb2dJbkZ1dHVyZVRpbWVzdGFtcDogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIGxhc3RMb2dJblBhc3RUaW1lc3RhbXA6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBxdWVyeVBhcmFtc1JlYWN0aW9uOiBJUmVhY3Rpb25EaXNwb3NlcjtcbiAgcHJpdmF0ZSBwcmV2aW91c09uU2Nyb2xsTG9nc0NvdW50OiBudW1iZXIgPSAwO1xuICBwcml2YXRlIHByZXZpb3VzUXVlcnlQYXJhbXM6IExvZ1N0cmVhbVF1ZXJ5UGFyYW1zIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIHByZXZpb3VzU2VsZWN0ZWREYXRhc2V0SWQ6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBzaG91bGRSZUVuYWJsZVN0cmVhbWluZzogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIHN0cmVhbWluZ1RpbWVyOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIHZpc2liaWxpdHlDaGFuZ2VSZWFjdGlvbjogSVJlYWN0aW9uRGlzcG9zZXI7XG4gIHByaXZhdGUgdmlzaWJpbGl0eUNoYW5nZVRpbWVyOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIHdhc1N0cmVhbWluZ0VuYWJsZWRXaGVuSGlkZGVuOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSBsYXN0UXVlcnlJZDogbnVtYmVyID0gMDtcblxuICBwcml2YXRlIHBvbGxMb2dTZWFyY2hUaW1lb3V0OiBudW1iZXIgPSAwO1xuXG4gIGNvbnN0cnVjdG9yKGRhdGFzZXRTdG9yZTogRGF0YXNldFN0b3JlLCBnZXRMb2dzRGVsYXk6IG51bWJlciA9IDApIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5kYXRhc2V0U3RvcmUgPSBkYXRhc2V0U3RvcmU7XG4gICAgdGhpcy5nZXRMb2dzRGVsYXkgPSBnZXRMb2dzRGVsYXk7XG5cbiAgICAvLyBTZXR1cCBhIHJlYWN0aW9uIHRvIGNhbGwgZ2V0TG9ncyB3aGVuZXZlciB0aGUgcXVlcnlQYXJhbXMgY2hhbmdlLlxuICAgIHRoaXMucXVlcnlQYXJhbXNSZWFjdGlvbiA9IHJlYWN0aW9uKFxuICAgICAgKCkgPT4ge1xuICAgICAgICAvLyBSZWFjdCB0byBhbnkgcXVlcnlQYXJhbXMgcHJvcCBjaGFuZ2luZywgb3IgdGhlIHNlbGVjdGVkRGF0YXNldElkLlxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIHRoaXMuZGF0YXNldFN0b3JlLnNlbGVjdGVkRGF0YXNldElkLFxuICAgICAgICAgIHRoaXMuZGF0YXNldFN0b3JlLmdldFZpcnR1YWxGaWVsZHNPcHMub3BlcmF0aW9uLmhhc1J1bixcbiAgICAgICAgICB7IC4uLnRoaXMucXVlcnlQYXJhbXMgfSxcbiAgICAgICAgXTtcbiAgICAgIH0sXG4gICAgICAoKSA9PiB7XG4gICAgICAgIC8vIE9ubHkgY2FsbCBgZ2V0TG9nc2AgaWYgc29tZXRoaW5nIGNoYW5nZWQgYW5kIHRoZXJlIGlzIGEgc2VsZWN0ZWREYXRhc2V0SWQuXG4gICAgICAgIC8vIGBzZXRRdWVyeVBhcmFtc2AgY2FuIGJlIGNhbGxlZCBtdWx0aXBsZSB0aW1lcyBhbmQgZW5kIHVwIHRoZSBzYW1lLlxuICAgICAgICAvLyBFc3BlY2lhbGx5IGluIGBMb2dTdHJlYW1WaWV3U3RvcmUudXJsUmVhY3Rpb25zYFxuICAgICAgICBjb25zdCBqc1F1ZXJ5UGFyYW1zID0gdG9KUyh0aGlzLnF1ZXJ5UGFyYW1zKTtcbiAgICAgICAgaWYgKHRoaXMuZGF0YXNldFN0b3JlLnNlbGVjdGVkRGF0YXNldElkKSB7XG4gICAgICAgICAgaWYgKHRoaXMuZGF0YXNldFN0b3JlLmdldFZpcnR1YWxGaWVsZHNPcHMub3BlcmF0aW9uLmhhc1J1bikge1xuICAgICAgICAgICAgY29uc3QgZGF0YXNldENoYW5nZWQgPSB0aGlzLmRhdGFzZXRTdG9yZS5zZWxlY3RlZERhdGFzZXRJZCAhPT0gdGhpcy5wcmV2aW91c1NlbGVjdGVkRGF0YXNldElkO1xuICAgICAgICAgICAgaWYgKGRhdGFzZXRDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgIC8vIEZldGNoIERhdGFzZXQgZGV0YWlscy5cbiAgICAgICAgICAgICAgdGhpcy5kYXRhc2V0U3RvcmUuZ2V0QWN0aXZlRGF0YXNldCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZGF0YXNldENoYW5nZWQgfHwgIWlzRXF1YWwodGhpcy5wcmV2aW91c1F1ZXJ5UGFyYW1zLCBqc1F1ZXJ5UGFyYW1zKSkge1xuICAgICAgICAgICAgICAvLyBDYW5jZWwgYW55IGluLWZsaWdodCByZXF1ZXN0c1xuICAgICAgICAgICAgICB0aGlzLmNhbmNlbEdldExvZ3MoKTtcbiAgICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5zdHJlYW1pbmdUaW1lcik7XG5cbiAgICAgICAgICAgICAgLy8gS2ljayBvZmYgYSBuZXcgcXVlcnkuXG4gICAgICAgICAgICAgIHRoaXMuZ2V0TG9ncygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnByZXZpb3VzU2VsZWN0ZWREYXRhc2V0SWQgPSB0aGlzLmRhdGFzZXRTdG9yZS5zZWxlY3RlZERhdGFzZXRJZDtcbiAgICAgICAgICAgIHRoaXMucHJldmlvdXNRdWVyeVBhcmFtcyA9IGpzUXVlcnlQYXJhbXM7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEZJWE1FOiBXaGVuIHZpZXdpbmcgYSBkYXRhc2V0J3Mgc3RyZWFtLCB0aGlzIGdldHMgY2FsbGVkIHR3aWNlLlxuICAgICAgICAgICAgLy8gT25jZSBoZXJlIGFuZCBvbmNlIGluIExvZ3NTdHJlYW1GaWx0ZXJcbiAgICAgICAgICAgIC8vIEZpeCBvbmNlIHZpcnR1YWwgZmllbGRzIGFyZSByZXR1cm5lZCB3aXRoIHRoZSBEYXRhc2V0IGluZm8gKGdldEFjdGl2ZURhdGFzZXQpXG4gICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYXhpb21ocS9heGlvbS9pc3N1ZXMvMTk2MlxuICAgICAgICAgICAgdGhpcy5kYXRhc2V0U3RvcmUuZ2V0QWN0aXZlRGF0YXNldFZpcnR1YWxGaWVsZHMoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gQ2xlYXIgdGltZXJzIGFuZCBzdHJlYW1pbmcgc2luY2UgdGhlcmUgaXMgbm8gbG9uZ2VyIGEgc2VsZWN0ZWREYXRhc2V0SWQuXG4gICAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLmdldExvZ3NSZXRyeVRpbWVyKTtcbiAgICAgICAgICB0aGlzLmRpc2FibGVTdHJlYW1pbmcoKTtcbiAgICAgICAgICB0aGlzLmNhbmNlbEdldExvZ3MoKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8vIFNpbmNlIG91ciBkZWZhdWx0IHRpbWVzdGFtcCBpcyB1bmRlZmluZWQsIHNvbWV0aGluZyBzaG91bGQgY2FsbCBgc2V0UXVlcnlQYXJhbXNgIHRvIGtpY2sgdGhpcyBvZmYuXG4gICAgICB7IGZpcmVJbW1lZGlhdGVseTogZmFsc2UgfVxuICAgICk7XG5cbiAgICB0aGlzLnZpc2liaWxpdHlDaGFuZ2VSZWFjdGlvbiA9IHJlYWN0aW9uKFxuICAgICAgKCkgPT4gW3ZpZXdTdG9yZS5pc0hpZGRlbl0sXG4gICAgICAoKSA9PiB7XG4gICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy52aXNpYmlsaXR5Q2hhbmdlVGltZXIpO1xuXG4gICAgICAgIGlmICh2aWV3U3RvcmUuaXNIaWRkZW4pIHtcbiAgICAgICAgICAvLyBUYWIgaXMgTk9UIGFjdGl2ZS5cbiAgICAgICAgICB0aGlzLndhc1N0cmVhbWluZ0VuYWJsZWRXaGVuSGlkZGVuID0gdGhpcy5zdHJlYW1pbmdFbmFibGVkO1xuXG4gICAgICAgICAgaWYgKHRoaXMuc3RyZWFtaW5nRW5hYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5zdHJlYW1pbmdJbnRlcnZhbCA9IDUwMDA7XG4gICAgICAgICAgICAvLyBOZWVkIHRvIHJlLWNhbGwgZW5hYmxlU3RyZWFtaW5nIHRvIHNldHVwIGEgbmV3IGBzZXRJbnRlcnZhbGAuXG4gICAgICAgICAgICB0aGlzLmVuYWJsZVN0cmVhbWluZygpO1xuXG4gICAgICAgICAgICAvLyBUdXJuIG9mZiBzdHJlYW1pbmcgYWx0b2dldGhlciBhZnRlciBhIGJpdC5cbiAgICAgICAgICAgIHRoaXMudmlzaWJpbGl0eUNoYW5nZVRpbWVyID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLmRpc2FibGVTdHJlYW1pbmcoKTtcbiAgICAgICAgICAgIH0sIDYwMDAwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gVGFiIGlzIGFjdGl2ZSBhZ2Fpbi5cbiAgICAgICAgICBpZiAodGhpcy53YXNTdHJlYW1pbmdFbmFibGVkV2hlbkhpZGRlbikge1xuICAgICAgICAgICAgdGhpcy5zdHJlYW1pbmdJbnRlcnZhbCA9IExPR1NfUkVGUkVTSF9SQVRFO1xuICAgICAgICAgICAgdGhpcy5lbmFibGVTdHJlYW1pbmcoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAvLyBEb24ndCBmaXJlIGltbWVkaWF0ZWx5IG90aGVyd2lzZSBpZiB0aGUgdGFiIGlzIFwiaGlkZGVuXCIgb24gbG9hZFxuICAgICAgLy8gYHdhc1N0cmVhbWluZ0VuYWJsZWRXaGVuSGlkZGVuYCB3aWxsIGJlIGB0cnVlYCBhbmQgd2hlbiB5b3UgZmluYWxseVxuICAgICAgLy8gdmlldyB0aGUgdGFiIGVuYWJsZVN0cmVhbWluZyB3aWxsIGJlIGNhbGxlZCBhbmQgYSBkYXRhc2V0IG1heSBub3QgYmUgc2VsZWN0ZWQuXG4gICAgICB7IGZpcmVJbW1lZGlhdGVseTogZmFsc2UgfVxuICAgICk7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpIHtcbiAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuZ2V0TG9nc1JldHJ5VGltZXIpO1xuICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy52aXNpYmlsaXR5Q2hhbmdlVGltZXIpO1xuICAgIHRoaXMuZGlzcG9zaW5nID0gdHJ1ZTtcbiAgICB0aGlzLmRpc2FibGVTdHJlYW1pbmcoKTtcbiAgICB0aGlzLnF1ZXJ5UGFyYW1zUmVhY3Rpb24oKTtcbiAgICB0aGlzLnZpc2liaWxpdHlDaGFuZ2VSZWFjdGlvbigpO1xuICAgIHRoaXMuY2FuY2VsR2V0TG9ncygpO1xuICB9XG5cbiAgQGNvbXB1dGVkXG4gIHB1YmxpYyBnZXQgaXNMaXZlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnN0cmVhbWluZ1N0YXRlID09PSBTdHJlYW1pbmdTdGF0ZS5MaXZlO1xuICB9XG5cbiAgQGNvbXB1dGVkXG4gIHB1YmxpYyBnZXQgaXNEYXRlUmFuZ2UoKTogYm9vbGVhbiB7XG4gICAgY29uc3QgdGltZXN0YW1wU3RhcnQgPSBjdXJyZW50VGltZXN0YW1wU3RhcnQodGhpcy5xdWVyeVBhcmFtcy5xdWlja1JhbmdlLCB0aGlzLnF1ZXJ5UGFyYW1zLnRpbWVzdGFtcFN0YXJ0KTtcblxuICAgIHJldHVybiAhIXRpbWVzdGFtcFN0YXJ0O1xuICB9XG5cbiAgQGNvbXB1dGVkXG4gIHB1YmxpYyBnZXQgc2Nyb2xsVG9Sb3dJZCgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgIGlmIChpc051bWVyaWModGhpcy5zY3JvbGxUb0luZGV4KSAmJiB0aGlzLnNjcm9sbFRvSW5kZXghIDwgdGhpcy5sb2dzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHRoaXMubG9nc1t0aGlzLnNjcm9sbFRvSW5kZXghXSAmJiB0aGlzLmxvZ3NbdGhpcy5zY3JvbGxUb0luZGV4IV0uX3Jvd0lkO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIEBjb21wdXRlZFxuICBwdWJsaWMgZ2V0IHN0cmVhbWluZ1N0YXRlKCk6IFN0cmVhbWluZ1N0YXRlIHtcbiAgICBpZiAodGhpcy5zdHJlYW1pbmdFbmFibGVkKSB7XG4gICAgICByZXR1cm4gU3RyZWFtaW5nU3RhdGUuTGl2ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMuc2Nyb2xsZWRUb0JvdHRvbSkge1xuICAgICAgICAvLyBJZiBkYXRlIHJhbmdlIGhhcyBhbiBcImVuZFwiIHRoYXQgaXNuJ3QgXCJub3dcIiB0aGVuIGZvcmNlIFBhdXNlZFNjcm9sbGluZyBzdGF0ZSxcbiAgICAgICAgLy8gc28gdGhhdCB0aGUgXCJKdW1wIHRvIExpdmVcIiBhcnJvdyBpcyBkaXNwbGF5ZWQuXG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcEVuZCA9IHBhcnNlVGltZXN0YW1wTm90Tm93KHRoaXMucXVlcnlQYXJhbXMudGltZXN0YW1wRW5kKTtcbiAgICAgICAgaWYgKHRpbWVzdGFtcEVuZCkge1xuICAgICAgICAgIHJldHVybiBTdHJlYW1pbmdTdGF0ZS5QYXVzZWRTY3JvbGxpbmc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFN0cmVhbWluZ1N0YXRlLlBhdXNlZE1hbnVhbGx5O1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gU3RyZWFtaW5nU3RhdGUuUGF1c2VkU2Nyb2xsaW5nO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIEBjb21wdXRlZFxuICBwdWJsaWMgZ2V0IGFjdGl2ZVJvdygpOiBMb2cgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IGxvZyA9IHRoaXMuYWN0aXZlUm93SWQgJiYgdGhpcy5sb2dzLmZpbmQoKGwpID0+IGwuX3Jvd0lkID09PSB0aGlzLmFjdGl2ZVJvd0lkKTtcblxuICAgIHJldHVybiAobG9nICYmIGlzTG9nKGxvZykgJiYgbG9nKSB8fCB1bmRlZmluZWQ7XG4gIH1cblxuICBAY29tcHV0ZWRcbiAgcHVibGljIGdldCBuZXdlclJvdygpOiBMb2cgfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLmFjdGl2ZVJvd0lkKSB7XG4gICAgICBsZXQgaW5kZXggPSB0aGlzLmxvZ3MuZmluZEluZGV4KChsbCkgPT4gbGwuX3Jvd0lkID09PSB0aGlzLmFjdGl2ZVJvd0lkKTtcbiAgICAgIGluZGV4ICs9IDE7XG4gICAgICB3aGlsZSAoaW5kZXggPj0gMCAmJiBpbmRleCA8IHRoaXMubG9ncy5sZW5ndGgpIHtcbiAgICAgICAgaWYgKGlzTG9nKHRoaXMubG9nc1tpbmRleF0pKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMubG9nc1tpbmRleF0gYXMgTG9nO1xuICAgICAgICB9XG4gICAgICAgIGluZGV4ICs9IDE7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIEBjb21wdXRlZFxuICBwdWJsaWMgZ2V0IG9sZGVyUm93KCk6IExvZyB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMuYWN0aXZlUm93SWQpIHtcbiAgICAgIGxldCBpbmRleCA9IHRoaXMubG9ncy5maW5kSW5kZXgoKGxsKSA9PiBsbC5fcm93SWQgPT09IHRoaXMuYWN0aXZlUm93SWQpO1xuICAgICAgaW5kZXggLT0gMTtcbiAgICAgIHdoaWxlIChpbmRleCA+PSAwKSB7XG4gICAgICAgIGlmIChpc0xvZyh0aGlzLmxvZ3NbaW5kZXhdKSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLmxvZ3NbaW5kZXhdIGFzIExvZztcbiAgICAgICAgfVxuICAgICAgICBpbmRleCAtPSAxO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICBAY29tcHV0ZWRcbiAgcHVibGljIGdldCBhY3RpdmVRdWVyeSgpOiBBY3RpdmVRdWVyeSB7XG4gICAgY29uc3QgeyBxdWVyeVN0cmluZywgY2FzZVNlbnNpdGl2ZSwgaW50ZWdyYXRpb25zRmlsdGVyIH0gPSB0b0pTKHRoaXMucXVlcnlQYXJhbXMpO1xuXG4gICAgY29uc3QgdGltZXN0YW1wU3RhcnQgPSBjdXJyZW50VGltZXN0YW1wU3RhcnROb3dBc1VuZGVmaW5lZChcbiAgICAgIHRoaXMucXVlcnlQYXJhbXMucXVpY2tSYW5nZSxcbiAgICAgIHRoaXMucXVlcnlQYXJhbXMudGltZXN0YW1wU3RhcnRcbiAgICApO1xuICAgIGNvbnN0IHRpbWVzdGFtcEVuZCA9IGN1cnJlbnRUaW1lc3RhbXBFbmROb3dBc1VuZGVmaW5lZCh0aGlzLnF1ZXJ5UGFyYW1zLnF1aWNrUmFuZ2UsIHRoaXMucXVlcnlQYXJhbXMudGltZXN0YW1wRW5kKTtcblxuICAgIHJldHVybiB7XG4gICAgICBkYXRhc2V0SWQ6IHRoaXMuZGF0YXNldFN0b3JlLnNlbGVjdGVkRGF0YXNldElkLFxuICAgICAgcXVlcnlTdHJpbmc6IHF1ZXJ5U3RyaW5nLFxuICAgICAgdGltZXN0YW1wU3RhcnQ6IHRpbWVzdGFtcFN0YXJ0LFxuICAgICAgdGltZXN0YW1wRW5kOiB0aW1lc3RhbXBFbmQsXG4gICAgICBjYXNlU2Vuc2l0aXZlOiBjYXNlU2Vuc2l0aXZlLFxuICAgICAgaW50ZWdyYXRpb25zRmlsdGVyOiBpbnRlZ3JhdGlvbnNGaWx0ZXIsXG4gICAgfTtcbiAgfVxuXG4gIEBjb21wdXRlZCh7IGtlZXBBbGl2ZTogdHJ1ZSB9KSAvLyBBZGQga2VlcEFsaXZlIHRvIGNhY2hlIHRoZSByZXN1bHQsIGJlY2F1c2UgdGhpcyBpc24ndCBiZSBvYnNlcnZlZCBhbnl3aGVyZS5cbiAgcHVibGljIGdldCBhY3RpdmVRdWVyeVJlcXVlc3QoKTogUXVlcnlSZXF1ZXN0V2l0aE9wdGlvbnMge1xuICAgIGNvbnN0IHsgcXVlcnlTdHJpbmcsIHRpbWVzdGFtcFN0YXJ0LCB0aW1lc3RhbXBFbmQsIGNhc2VTZW5zaXRpdmUsIGludGVncmF0aW9uc0ZpbHRlciB9ID0gdGhpcy5hY3RpdmVRdWVyeTtcblxuICAgIGNvbnN0IHF1ZXJ5T3B0aW9uczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHt9O1xuXG4gICAgY29uc3QgcXVlcnlQYXJhbXM6IFF1ZXJ5UmVxdWVzdFdpdGhPcHRpb25zID0ge1xuICAgICAgcmVzb2x1dGlvbjogJ2F1dG8nLFxuICAgICAgLy8gV291bGQgYmUgbmljZSBub3QgdG8gaGF2ZSB0byBkZWZhdWx0IGJ1dCB3ZSBsaXZlIGluIGEgd29ybGQgd2hlcmUgbm9ib2R5IGdpdmVzIGEgY3JhcCBhYm91dCBtYWtpbmcgdGhpbmdzIGVhc2llciBmb3IgdGhlIGZyb250ZW5kLlxuICAgICAgLy8gV2UnbGwgZ2V0IHRvIGNvbnZlcnQgdGhlc2UgYmFjayBpbnRvIHVuZGVmaW5lZC9ibGFuayBsYXRlciBzaW5jZSB0aGUgdmFsdWVzIHdpbGwgZ2V0IHB1dCBpbnRvIFNhdmVkIFF1ZXJpZXMuXG4gICAgICBzdGFydFRpbWU6IHRpbWVzdGFtcFN0YXJ0ID8gbmV3IERhdGUodGltZXN0YW1wU3RhcnQpLnRvSVNPU3RyaW5nKCkgOiBNSU5fREFURS50b0lTT1N0cmluZygpLFxuICAgICAgZW5kVGltZTogdGltZXN0YW1wRW5kID8gbmV3IERhdGUodGltZXN0YW1wRW5kKS50b0lTT1N0cmluZygpIDogTUFYX0RBVEUudG9JU09TdHJpbmcoKSxcbiAgICAgIHF1ZXJ5T3B0aW9uczogcXVlcnlPcHRpb25zLFxuICAgIH07XG5cbiAgICAvLyBPbmx5IGFkZCBxdWVyeU9wdGlvbnMgaWYgdGhlIHVzZXIgZXhwbGljaXRseSBhZGRlZCB0aGVtLCBvdGhlcndpc2UgaXQncyBoYXJkZXIgdG8gZGV0ZWN0IGxhdGVyIGlmIHF1ZXJ5UGFyYW1zIGNoYW5nZWQuXG4gICAgaWYgKGNhc2VTZW5zaXRpdmUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8g8J+QifCfkInwn5CJXG4gICAgICAvLyBPcHRpb25zIHBlcnRhaW4gdG8gZmlsdGVyaW5nIG9ubHkgcmlnaHQgbm93IGFuZCBzbyBtaWdodCBub3QgYmUgbmVlZGVkIGFuZCBhcmUgZGVsZXRlZCBiZWxvd1xuICAgICAgcXVlcnlPcHRpb25zLmNhc2VTZW5zaXRpdmUgPSBTdHJpbmcoY2FzZVNlbnNpdGl2ZSk7XG4gICAgfVxuXG4gICAgaWYgKHF1ZXJ5U3RyaW5nKSB7XG4gICAgICBsZXQgYWN0dWFsUXVlcnlTdHJpbmcgPSBxdWVyeVN0cmluZztcbiAgICAgIC8vIEZVVFVSRTogUmVtb3ZlIHNvbWVkYXk/XG4gICAgICAvLyBNYWtlIG9sZCBVcmxzIHdpdGggYEF4aW9tRmlsdGVyOmAgaW4gdGhlbSB3b3JrLlxuICAgICAgaWYgKHF1ZXJ5U3RyaW5nLnN0YXJ0c1dpdGgoJ0F4aW9tRmlsdGVyOicpKSB7XG4gICAgICAgIGFjdHVhbFF1ZXJ5U3RyaW5nID0gcXVlcnlTdHJpbmcuc2xpY2UoMTIpO1xuICAgICAgfVxuICAgICAgdGhpcy5idWlsZEZpbHRlcihxdWVyeVBhcmFtcywgYWN0dWFsUXVlcnlTdHJpbmcpO1xuICAgIH1cblxuICAgIC8vIFJlbW92ZSBlbXB0eSBxdWVyeU9wdGlvbnMgdG8ga2VlcCBmcm9tIGNsdXR0ZXJpbmcgdXAgdGhlIHJlcXVlc3RcbiAgICBpZiAocXVlcnlQYXJhbXMucXVlcnlPcHRpb25zICYmICFPYmplY3Qua2V5cyhxdWVyeVBhcmFtcy5xdWVyeU9wdGlvbnMpLmxlbmd0aCkge1xuICAgICAgZGVsZXRlIHF1ZXJ5UGFyYW1zLnF1ZXJ5T3B0aW9ucztcbiAgICB9XG5cbiAgICBpZiAoaW50ZWdyYXRpb25zRmlsdGVyKSB7XG4gICAgICBxdWVyeU9wdGlvbnMuaW50ZWdyYXRpb25zRmlsdGVyID0gaW50ZWdyYXRpb25zRmlsdGVyO1xuICAgIH1cblxuICAgIHJldHVybiBxdWVyeVBhcmFtcztcbiAgfVxuXG4gIEBhY3Rpb24uYm91bmRcbiAgcHVibGljIHNjcm9sbFRvQm90dG9tKCkge1xuICAgIHRoaXMuc2Nyb2xsVG9JbmRleCA9IHRoaXMubG9ncy5sZW5ndGggLSAxO1xuICAgIHRoaXMuc2Nyb2xsVG9BbGlnbm1lbnQgPSAnYm90dG9tJztcbiAgICB0aGlzLnNjcm9sbGVkVG9Cb3R0b20gPSB0cnVlO1xuICAgIHRoaXMuZGVsYXllZENsZWFyU2Nyb2xsVG9JbmRleCgpO1xuICB9XG5cbiAgLy8gU2luY2Ugd2Ugb3ZlcnJpZGUgaW4gYExvZ1N0cmVhbVZpZXdTdG9yZWAsIGRvbid0IGFkZCBhIGRlY29yYXRvciwgb3RoZXJ3aXNlIHRoZSBwYXJlbnQgd29uJ3QgYmUgY2FsbGVkLlxuICBwdWJsaWMgc2V0SGlnaGxpZ2h0Um93SWQoaGlnaGxpZ2h0Um93SWQ/OiBzdHJpbmcpIHtcbiAgICBydW5JbkFjdGlvbigoKSA9PiB7XG4gICAgICB0aGlzLmhpZ2hsaWdodFJvd0lkID0gaGlnaGxpZ2h0Um93SWQgfHwgJyc7XG4gICAgfSk7XG4gIH1cblxuICAvLyBTaW5jZSB3ZSBvdmVycmlkZSBpbiBgTG9nU3RyZWFtVmlld1N0b3JlYCwgZG9uJ3QgYWRkIGEgZGVjb3JhdG9yLCBvdGhlcndpc2UgdGhlIHBhcmVudCB3b24ndCBiZSBjYWxsZWQuXG4gIHB1YmxpYyBzZXRBY3RpdmVEYXRhUm93SWQocm93SWQ6IHN0cmluZyB8IHVuZGVmaW5lZCkge1xuICAgIHJ1bkluQWN0aW9uKCgpID0+IHtcbiAgICAgIHRoaXMuYWN0aXZlUm93SWQgPSByb3dJZDtcblxuICAgICAgLy8gV2UgbmVlZCB0byBkaXNhYmxlIHN0cmVhbWluZyB3aGVuIGEgcm93IGlzIGFjdGl2ZSBvciBlbHNlIGl0XG4gICAgICAvLyBjYW4gc3VkZGVubHkgbm90IGJlIGFjdGl2ZSBhcyBuZXcgZGF0YSBzdHJlYW1zIGluIGFuZCBpdCBnZXRzIGF1dG9tYXRpY2FsbHlcbiAgICAgIC8vIGRyb3BwZWQuXG4gICAgICBpZiAocm93SWQgJiYgdGhpcy5zdHJlYW1pbmdFbmFibGVkKSB7XG4gICAgICAgIHRoaXMuc2hvdWxkUmVFbmFibGVTdHJlYW1pbmcgPSAhdGhpcy5pc0luaXRpYWxMb2FkOyAvLyByZS1lbmFibGVkIGJ5IGRlZmF1bHQsIHVubGVzcyB0aGlzIGlzIHRoZSBpbml0aWFsIGxvYWQuXG4gICAgICAgIHRoaXMuZGlzYWJsZVN0cmVhbWluZygpO1xuICAgICAgfSBlbHNlIGlmICghcm93SWQgJiYgdGhpcy5zaG91bGRSZUVuYWJsZVN0cmVhbWluZykge1xuICAgICAgICB0aGlzLnNob3VsZFJlRW5hYmxlU3RyZWFtaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZW5hYmxlU3RyZWFtaW5nKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBSZWxvYWQgaWYgcm93SWQgZG9lc24ndCBleGlzdC5cbiAgICAvLyDwn5CJ8J+QifCfkIlcbiAgICAvLyBIb3BpbmcgdGhpcyBkb2Vzbid0IGNhdXNlIGlzc3VlcyDwn6Se77iPXG4gICAgLy8gSXQncyBkZWJhdGFibGUgd2hldGhlciB3ZSB3YW50IHRoaXMuXG4gICAgaWYgKHRoaXMuYWN0aXZlUm93SWQgJiYgIXRoaXMuYWN0aXZlUm93ICYmICF0aGlzLmlzSW5pdGlhbExvYWQpIHtcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICB9XG4gIH1cblxuICBAYWN0aW9uLmJvdW5kXG4gIHB1YmxpYyBzZXRHZXRMb2dzRGVsYXkoZGVsYXk6IG51bWJlcikge1xuICAgIHRoaXMuZ2V0TG9nc0RlbGF5ID0gZGVsYXk7XG4gIH1cblxuICAvLyBTaW5jZSB3ZSBvdmVycmlkZSBpbiBgTG9nU3RyZWFtVmlld1N0b3JlYCwgZG9uJ3QgYWRkIGEgZGVjb3JhdG9yLCBvdGhlcndpc2UgdGhlIHBhcmVudCB3b24ndCBiZSBjYWxsZWQuXG4gIHB1YmxpYyBzZXRRdWVyeVBhcmFtcyhcbiAgICB0aW1lc3RhbXBTdGFydD86IEZhbmN5VGltZSxcbiAgICB0aW1lc3RhbXBFbmQ/OiBGYW5jeVRpbWUsXG4gICAgcXVpY2tSYW5nZT86IFF1aWNrUmFuZ2UsXG4gICAgcXVlcnlTdHJpbmc/OiBzdHJpbmcsXG4gICAgYXBwZW5kUXVlcnlTdHJpbmc/OiBib29sZWFuLFxuICAgIGNhc2VTZW5zaXRpdmU/OiBib29sZWFuXG4gICkge1xuICAgIC8vIE9ubHkgY2hhbmdlIHF1ZXJ5UGFyYW1zIGlmIHRoZXkncmUgbm90IGB1bmRlZmluZWRgLCBiZWNhdXNlIHBsYWNlcyBsaWtlIGBqdW1wVG9MaXZlYCB3YW50XG4gICAgLy8gdG8gY2hhbmdlIHRoZSB0aW1lc3RhbXAgYnV0IGtlZXAgdGhlIHJlc3Qgb2YgdGhlIHF1ZXJ5UGFyYW1zIHRoZSBzYW1lLlxuICAgIHJ1bkluQWN0aW9uKCgpID0+IHtcbiAgICAgIGlmICh0aW1lc3RhbXBTdGFydCAhPT0gdW5kZWZpbmVkIHx8IHRpbWVzdGFtcEVuZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMucXVlcnlQYXJhbXMudGltZXN0YW1wU3RhcnQgPSB0aW1lc3RhbXBTdGFydDtcbiAgICAgICAgdGhpcy5xdWVyeVBhcmFtcy50aW1lc3RhbXBFbmQgPSB0aW1lc3RhbXBFbmQ7XG5cbiAgICAgICAgLy8gQ2xlYXIgdGhlIHF1aWNrUmFuZ2Ugc2V0dGluZyBpZiBhIHRpbWVzdGFtcFN0YXJ0IG9yIHRpbWVzdGFtcEVuZCBpcyBzZXQuXG4gICAgICAgIHRoaXMucXVlcnlQYXJhbXMucXVpY2tSYW5nZSA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgaWYgKHF1aWNrUmFuZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLnF1ZXJ5UGFyYW1zLnF1aWNrUmFuZ2UgPSBxdWlja1JhbmdlO1xuXG4gICAgICAgIC8vIENsZWFyIHRpbWVzdGFtcFN0YXJ0IGFuZCB0aW1lc3RhbXBFbmQgc2V0dGluZyBpZiBhIHF1aWNrUmFuZ2UgaXMgc2V0LlxuICAgICAgICB0aGlzLnF1ZXJ5UGFyYW1zLnRpbWVzdGFtcFN0YXJ0ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnF1ZXJ5UGFyYW1zLnRpbWVzdGFtcEVuZCA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgaWYgKHF1ZXJ5U3RyaW5nICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKGFwcGVuZFF1ZXJ5U3RyaW5nICYmIHRoaXMucXVlcnlQYXJhbXMucXVlcnlTdHJpbmcpIHtcbiAgICAgICAgICAvLyBTZXBhcmF0ZSB3aXRoIGEgc3BhY2UuXG4gICAgICAgICAgdGhpcy5xdWVyeVBhcmFtcy5xdWVyeVN0cmluZyArPSBgICR7cXVlcnlTdHJpbmd9YDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnF1ZXJ5UGFyYW1zLnF1ZXJ5U3RyaW5nID0gcXVlcnlTdHJpbmc7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGNhc2VTZW5zaXRpdmUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLnF1ZXJ5UGFyYW1zLmNhc2VTZW5zaXRpdmUgPSBjYXNlU2Vuc2l0aXZlO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLy8gU2luY2Ugd2Ugb3ZlcnJpZGUgaW4gYExvZ1N0cmVhbVZpZXdTdG9yZWAsIGRvbid0IGFkZCBhIGRlY29yYXRvciwgb3RoZXJ3aXNlIHRoZSBwYXJlbnQgd29uJ3QgYmUgY2FsbGVkLlxuICAvLyBTaW1pbGFyIHRvIHNldFF1ZXJ5UGFyYW1zIGV4Y2VwdCB3ZSBkb24ndCBpZ25vcmUgYHVuZGVmaW5lZGAgdmFsdWVzIHdlJ2xsIHNldCB0aGVtLlxuICBwdWJsaWMgc2V0UXVlcnlQYXJhbXNEYXRlUmFuZ2UodGltZXN0YW1wU3RhcnQ/OiBGYW5jeVRpbWUsIHRpbWVzdGFtcEVuZD86IEZhbmN5VGltZSwgcXVpY2tSYW5nZT86IFF1aWNrUmFuZ2UpIHtcbiAgICBydW5JbkFjdGlvbigoKSA9PiB7XG4gICAgICB0aGlzLnF1ZXJ5UGFyYW1zLnRpbWVzdGFtcFN0YXJ0ID0gdGltZXN0YW1wU3RhcnQ7XG4gICAgICB0aGlzLnF1ZXJ5UGFyYW1zLnRpbWVzdGFtcEVuZCA9IHRpbWVzdGFtcEVuZDtcbiAgICAgIHRoaXMucXVlcnlQYXJhbXMucXVpY2tSYW5nZSA9IHF1aWNrUmFuZ2U7XG4gICAgfSk7XG4gIH1cblxuICAvLyBTaW5jZSB3ZSBvdmVycmlkZSBpbiBgTG9nU3RyZWFtVmlld1N0b3JlYCwgZG9uJ3QgYWRkIGEgZGVjb3JhdG9yLCBvdGhlcndpc2UgdGhlIHBhcmVudCB3b24ndCBiZSBjYWxsZWQuXG4gIHB1YmxpYyBzZXRRdWVyeVBhcmFtc0ZpbHRlcihmaWx0ZXI/OiBGaWx0ZXIpIHtcbiAgICBydW5JbkFjdGlvbigoKSA9PiB7XG4gICAgICB0aGlzLnF1ZXJ5UGFyYW1zLnF1ZXJ5U3RyaW5nID0gZmlsdGVyID8gSlNPTi5zdHJpbmdpZnkoZmlsdGVyKSA6IGZpbHRlcjtcbiAgICB9KTtcbiAgfVxuXG4gIEBhY3Rpb24uYm91bmRcbiAgcHVibGljIHNldE92ZXJmbG93cyhvdmVyZmxvd3M6IGJvb2xlYW4pIHtcbiAgICB0aGlzLm92ZXJmbG93cyA9IG92ZXJmbG93cztcblxuICAgIC8vIElmIHRoZSBMb2dTdHJlYW0gcGFnZSBpc24ndCBvdmVyZmxvd2luZyB3ZSBzaG91bGQgZWl0aGVyIGVuYWJsZSBzdHJlYW1pbmdcbiAgICAvLyBvciBrZWVwaW5nIGxvYWRpbmcgbG9ncyBpbiB0aGUgZnV0dXJlIHVudGlsIGl0IGRvZXMuXG4gICAgLy8gT3RoZXJ3aXNlIHRoZSBVSSB3aWxsIGp1c3QgZ2V0IHN0dWNrIGJlY2F1c2UgdGhlcmUgaXMgbm90IEJvdHRvbSByb3cgdG8gc2Nyb2xsIGRvd24gdG8uXG4gICAgLy8gVGhpcyBjYW4gYmUgdGVzdGVkIGJ5IHNldHRpbmcgTE9HU19QRVJfUEFHRSB0byBhIGxvdyBudW1iZXIuXG4gICAgaWYgKCFvdmVyZmxvd3MpIHtcbiAgICAgIGlmICh0aGlzLnJlYWNoZWROZXdlc3QpIHtcbiAgICAgICAgLy8gUmVzcGVjdCBpZiB0aGUgVXNlciBwcmVzc2VkIHRoZSBwYXVzZSBidXR0b24gKGNhbmNlbEVuYWJsZVN0cmVhbWluZyA9PT0gdHJ1ZSkuXG4gICAgICAgIGlmICghdGhpcy5zdHJlYW1pbmdFbmFibGVkICYmICF0aGlzLmNhbmNlbEVuYWJsZVN0cmVhbWluZykge1xuICAgICAgICAgIHRoaXMuZW5hYmxlU3RyZWFtaW5nKCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubG9hZE1vcmVMb2dzSW5GdXR1cmUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBAYWN0aW9uLmJvdW5kXG4gIHB1YmxpYyBlbmFibGVTdHJlYW1pbmcoKSB7XG4gICAgLy8gQ2FuY2VsIGFueSBwb2xsaW5nXG4gICAgdGhpcy5jYW5jZWxHZXRMb2dzKCk7XG5cbiAgICAvLyBDbGVhciBwYXJ0aWFsIGZsYWdzIGJlY2F1c2UgdGFpbGluZyBsb2dzIHdvbid0IHRyZWF0IGFueSBhcyBwYXJ0aWFsIHJlc3VsdHNcbiAgICB0aGlzLmlzUGFydGlhbCA9IGZhbHNlO1xuXG4gICAgLy8gRG9uJ3QgZW5hYmxlIHN0cmVhbWluZyBpZiB0aGUgZGF0ZSByYW5nZSBoYXMgYW4gXCJlbmRcIiB0aGF0IGlzbid0IFwibm93XCIuXG4gICAgY29uc3QgdGltZXN0YW1wRW5kID0gcGFyc2VUaW1lc3RhbXBOb3ROb3codGhpcy5xdWVyeVBhcmFtcy50aW1lc3RhbXBFbmQpO1xuXG4gICAgLy8gTmV2ZXIgc3RyZWFtIHdoZW4gRTJFX1RFU1RJTkcuIEl0IGNhdXNlcyBhbGwgdHlwZXMgb2YgY2hhb3MuXG4gICAgaWYgKCF0aGlzLmRpc3Bvc2luZyAmJiAhdGltZXN0YW1wRW5kICYmIHByb2Nlc3MuZW52LkUyRV9URVNUSU5HICE9PSAndHJ1ZScpIHtcbiAgICAgIHRoaXMuc3RyZWFtaW5nRW5hYmxlZCA9IHRydWU7XG4gICAgICB0aGlzLmNhbmNlbEVuYWJsZVN0cmVhbWluZyA9IGZhbHNlO1xuICAgICAgdGhpcy5zZWFyY2hEaXJlY3Rpb24gPSAnZnV0dXJlJztcblxuICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5zdHJlYW1pbmdUaW1lcik7XG5cbiAgICAgIHRoaXMuc3RyZWFtaW5nVGltZXIgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoXG4gICAgICAgIGFjdGlvbigoKSA9PiB7XG4gICAgICAgICAgaWYgKCF0aGlzLmRhdGFzZXRTdG9yZS5zZWxlY3RlZERhdGFzZXRJZCkge1xuICAgICAgICAgICAgLy8gU2hvdWxkbid0IGhhcHBlbiBidXQgaXQgc2VlbXMgdG8gYmUuXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ3NlbGVjdGVkRGF0YXNldElkIG5vdCBzZXQnKTtcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZVN0cmVhbWluZygpO1xuXG4gICAgICAgICAgICAvLyBFeGl0IGVhcmx5IHNpbmNlIHdlIGRvbid0IGhhdmUgYSBkYXRhc2V0SWQuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHRoaXMuZ2V0TG9nc09wICYmICF0aGlzLmdldExvZ3NPcC5zdGF0dXMuZmluaXNoZWQpIHtcbiAgICAgICAgICAgIC8vIHdhaXQgdGhlIGxhc3QgZmV0Y2hcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBuZXdlc3RMb2cgPSB0aGlzLmZpbmROZXdlc3RMb2coKTtcblxuICAgICAgICAgIHRoaXMuc2Nyb2xsVG9JbmRleCA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgICAgICB0aGlzLm9wZXJhdGUoXG4gICAgICAgICAgICB0aGlzLmdldExvZ3NPcC5vcGVyYXRpb24sXG4gICAgICAgICAgICB0aGlzLnBlcmZvcm1Mb2dTZWFyY2gobmV3ZXN0TG9nPy5fcm93SWQsIExPR1NfUEVSX1BBR0UsIG5ld2VzdExvZyA/ICdhc2MnIDogJ2Rlc2MnLCB1bmRlZmluZWQsIHRydWUpLFxuICAgICAgICAgICAgKHJlc3VsdHMpID0+IHtcbiAgICAgICAgICAgICAgLy8gQ2xlYXIgb2xkIGVycm9ycy5cbiAgICAgICAgICAgICAgbm90aWZpY2F0aW9uLmRpc21pc3MoVE9BU1RfSUQpO1xuXG4gICAgICAgICAgICAgIC8vIERvbid0IGFkZCB0aGUgbG9ncyBpZiB0aGUgdXNlciBwYXVzZWQgc3RyZWFtaW5nIHdoaWxlIHdlIHdlcmUgZmV0Y2hpbmcsIG90aGVyd2lzZVxuICAgICAgICAgICAgICAvLyBpdCB3aWxsIGltbWVkaWF0ZWx5IHJlLWVuYWJsZSBzdHJlYW1pbmcgd2hlbiBvblNjcm9sbCBpcyB0cmlnZ2VyZWQgYnkgdXMgYWRkaW5nIHRoZXNlIGxvZ3MuXG4gICAgICAgICAgICAgIGlmICh0aGlzLnN0cmVhbWluZ0VuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBsb29rdXAgdGFibGUgdG8gZGVkdXBlIHBhcnRpYWwgcmVzdWx0c1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hcFJvd0lkTG9nID0gdGhpcy5sb2dzLnJlZHVjZSgobWFwLCBsbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgbWFwW2xsLl9yb3dJZF0gPSBsbDtcblxuICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hcDtcbiAgICAgICAgICAgICAgICB9LCB7fSk7XG5cbiAgICAgICAgICAgICAgICAvLyBGaWx0ZXIgb3V0IGxvZ3MgdGhhdCBhcmUgYWxyZWFkeSBkaXNwbGF5ZWRcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdMb2dzID0gcmVzdWx0cy5sb2dzLmZpbHRlcigobGwpID0+ICFtYXBSb3dJZExvZ1tsbC5fcm93SWRdKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0SW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkTG9ncyhuZXdMb2dzKTtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmxvZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVPbGRlc3RMb2dzKCk7XG5cbiAgICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9Cb3R0b20oKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUgYXJlbid0IHJlc3VsdHMsIG5vIHJlYXNvbiB0byBrZWVwIGhhbW1lcmluZyB0aGUgc2VydmVyLlxuICAgICAgICAgICAgICAgICAgLy8gSSBndWVzcyB3ZSB3YW50IHRvIGRvIHRoaXMgbm93OlxuICAgICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2F4aW9taHEvYXhpb20vaXNzdWVzLzg1MVxuICAgICAgICAgICAgICAgICAgLy8gdGhpcy5kaXNhYmxlU3RyZWFtaW5nKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgIC8vIElmIGl0J3MgYSBOZXR3b3JrIEVycm9yLCByZXRyeSBhZnRlciBhIGRlbGF5XG4gICAgICAgICAgICAgIGlmICh0aGlzLmdldExvZ3NPcC5vcGVyYXRpb24uZGlzY29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRMb2dzUmV0cnlUaW1lciA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlU3RyZWFtaW5nKCk7XG4gICAgICAgICAgICAgICAgfSwgNTAwMCk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBUT0FTVF9JRFxuICAgICAgICAgICk7XG4gICAgICAgIH0pLFxuICAgICAgICB0aGlzLnN0cmVhbWluZ0ludGVydmFsXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIEBhY3Rpb24uYm91bmRcbiAgcHVibGljIGRpc2FibGVTdHJlYW1pbmcoKSB7XG4gICAgdGhpcy5oaWdobGlnaHRJbiA9IGZhbHNlO1xuICAgIHRoaXMuc3RyZWFtaW5nRW5hYmxlZCA9IGZhbHNlO1xuICAgIHRoaXMuY2FuY2VsRW5hYmxlU3RyZWFtaW5nID0gdHJ1ZTtcblxuICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuc3RyZWFtaW5nVGltZXIpO1xuXG4gICAgLy8gRG9uJ3QgZG8gdGhpcyBoZXJlIG9yIGxvYWRpbmcgbG9ncyBpbiB0aGUgcGFzdCB3b24ndCB3b3JrLlxuICAgIC8vIENsZWFyIGFueSBwb2xsaW5nXG4gICAgLy8gdGhpcy5jYW5jZWxHZXRMb2dzKCk7XG4gIH1cblxuICBAYWN0aW9uLmJvdW5kXG4gIHB1YmxpYyBqdW1wVG9MaXZlKHJlc2V0PzogYm9vbGVhbikge1xuICAgIC8vIENERVVUU0NIIDIwMjAwNzI4OiBBdHRlbXB0IHRvIHJlbW92ZSBiZWNhdXNlIGBnZXRMb2dzYCByZXNldHMgc3RyZWFtaW5nRW5hYmxlZC5cbiAgICAvLyAvLyBTZXQgdGhlIHN0cmVhbWluZyBlbmFibGVkIGZsYWcgc28gd2UnbGwgc2Nyb2xsIHRvIHRoZSBib3R0b20gYWZ0ZXIgdGhlIG5leHQgZmV0Y2hcbiAgICAvLyB0aGlzLnN0cmVhbWluZ0VuYWJsZWQgPSB0cnVlO1xuXG4gICAgLy8gVXNpbmcgYHJlc2V0YCB3aWxsIGZvcmNlIHVzIHRvIGNsZWFyIHRoZSBvdGhlciBxdWVyeSBwYXJhbXMgYW5kIGdldCB0byB0aGUgbGF0ZXN0LsOfXG4gICAgaWYgKCFyZXNldCAmJiB0aGlzLnJlYWNoZWROZXdlc3QpIHtcbiAgICAgIC8vIHNjcm9sbFRvQm90dG9tIGRvZXNuJ3Qgd29yayBpZiB0aGVyZSBhcmVuJ3QgYW55IGxvZ3Mgb3IgaWYgdGhlcmUgaXNuJ3QgYW4gb3ZlcmZsb3cuXG4gICAgICBpZiAodGhpcy5sb2dzLmxlbmd0aCA9PT0gMCB8fCAhdGhpcy5vdmVyZmxvd3MpIHtcbiAgICAgICAgdGhpcy5lbmFibGVTdHJlYW1pbmcoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsVG9Cb3R0b20oKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gV2UgZG9uJ3Qga25vdyBob3cgbWFueSBsb2dzIHdlJ2QgbmVlZCB0byBsb2FkIHRvIGdldCBiYWNrIHRvIGxpdmUsIHNvXG4gICAgICAvLyBqdW1wIHRvIHJpZ2h0IG5vdy5cbiAgICAgIC8vXG4gICAgICAvLyBUaGVyZSBhcmUgY2FzZXMgd2hlcmUgYHF1ZXJ5UGFyYW1zLnF1aWNrUmFuZ2VgLCBgdGhpcy5xdWVyeVBhcmFtcy50aW1lc3RhbXBTdGFydGAsXG4gICAgICAvLyBhbmQgYHRoaXMucXVlcnlQYXJhbXMudGltZXN0YW1wRW5kYCB3aWxsIGFscmVhZHkgYmUgdW5kZWZpbmVkLCBzbyB3ZSBuZWVkIHRvIGNoZWNrXG4gICAgICAvLyBpZiB3ZSBzaG91bGQgZm9yY2UgYSBjYWxsIHRvIGBnZXRMb2dzYC5cbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5xdWVyeVBhcmFtcy5xdWlja1JhbmdlID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgdGhpcy5xdWVyeVBhcmFtcy50aW1lc3RhbXBTdGFydCA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgIHRoaXMucXVlcnlQYXJhbXMudGltZXN0YW1wRW5kID09PSB1bmRlZmluZWRcbiAgICAgICkge1xuICAgICAgICB0aGlzLmdldExvZ3MoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2V0UXVlcnlQYXJhbXNEYXRlUmFuZ2UodW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgQGFjdGlvbi5ib3VuZFxuICBwdWJsaWMgb25TY3JvbGwoY2xpZW50SGVpZ2h0OiBudW1iZXIsIHNjcm9sbEhlaWdodDogbnVtYmVyLCBzY3JvbGxUb3A6IG51bWJlciwgcHJldlNjcm9sbFRvcDogbnVtYmVyKSB7XG4gICAgLy8gVG9nZ2xlIHN0cmVhbWluZyBiYXNlZCBvbiBpZiB0aGUgdXNlciBpcyBhdCB0aGUgYm90dG9tLlxuICAgIC8vIFVzZSAtMSBhcyBhIHNsaWdodCBidWZmZXIuXG4gICAgLy8gcHJldHRpZXItaWdub3JlXG4gICAgY29uc3QgaXNCb3R0b20gPSAoY2xpZW50SGVpZ2h0ICsgc2Nyb2xsVG9wIC0gc2Nyb2xsSGVpZ2h0KSA+PSAtMTtcbiAgICB0aGlzLnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcblxuICAgIGlmIChpc0JvdHRvbSkge1xuICAgICAgdGhpcy5zY3JvbGxlZFRvQm90dG9tID0gdHJ1ZTtcbiAgICAgIHRoaXMuc2Nyb2xsZWRUb1RvcCA9IGZhbHNlO1xuXG4gICAgICAvLyBJZ25vcmUgc2Nyb2xsaW5nIGR1ZSB0byBsb2dzIGJlaW5nIGFkZGVkLlxuICAgICAgLy9cbiAgICAgIC8vIENERVVUU0NIOiBJIGNhbid0IHJlcGxpY2F0ZSBcInNjcm9sbGluZyBkdWUgdG8gbG9ncyBiZWluZyBhZGRlZFwiIGJ5IHNlYXJjaGluZyBpbiB0aGUgcGFzdCBhbmQgc2Nyb2xsaW5nIGRvd24gb24gYSBsYXJnZSBkYXRhc2V0LlxuICAgICAgLy8gTm90IHN1cmUgaWYgdGhlIGBwcmV2aW91c09uU2Nyb2xsTG9nc0NvdW50YCBpcyBmb3IgYSBkaWZmZXJlbnQgc2NlbmFyaW8uIExpa2UgZmV3IGxvZyByZXN1bHRzIGV2ZW50dWFsbHkgaGl0dGluZyB0aGUgYm90dG9tP1xuICAgICAgLy8gVGhlIHdheSBpdCB3YXMgcHJldmlvdXNseSB3YXMgIHByZXZlbnRpbmcgYGxvYWRNb3JlTG9nc0luRnV0dXJlYCBmcm9tIGZpcmluZyBpZiB5b3Ugc2Nyb2xsIHJlYWxseSBmYXN0LiBQYXJ0aWN1bGFybHlcbiAgICAgIC8vIGlmIHlvdSBoYXZlIGEgbW91c2Ugd2l0aCBhIHNwaW5uaW5nIHNjcm9sbCB3aGVlbCBhbmQgbGV0IGl0IGp1c3Qga2VlcCBzcGlubmluZy5cbiAgICAgIC8vIEdvaW5nIHRvIHRyeSBtb3ZlIHRoZSBcImlmIHN0YXRlbWVudFwiIHRvIGp1c3QgcHJvdGVjdCBgZW5hYmxlU3RyZWFtaW5nYC5cbiAgICAgIC8vIEZVVFVSRTogV2UgY2FuIHBvc3NpYmx5IHRyeSByZW1vdmUgYHByZXZpb3VzT25TY3JvbGxMb2dzQ291bnRgIGFsdG9nZXRoZXIuXG4gICAgICBpZiAodGhpcy5yZWFjaGVkTmV3ZXN0ICYmIHRoaXMubG9ncy5sZW5ndGggPT09IHRoaXMucHJldmlvdXNPblNjcm9sbExvZ3NDb3VudCkge1xuICAgICAgICBpZiAoIXRoaXMuc3RyZWFtaW5nRW5hYmxlZCkge1xuICAgICAgICAgIHRoaXMuZW5hYmxlU3RyZWFtaW5nKCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoIXRoaXMucmVhY2hlZE5ld2VzdCkge1xuICAgICAgICB0aGlzLmxvYWRNb3JlTG9nc0luRnV0dXJlKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2Nyb2xsZWRUb0JvdHRvbSA9IGZhbHNlO1xuICAgICAgdGhpcy5kaXNhYmxlU3RyZWFtaW5nKCk7XG5cbiAgICAgIHRoaXMuc2Nyb2xsZWRUb1RvcCA9IHNjcm9sbFRvcCA8PSAzO1xuICAgIH1cblxuICAgIHRoaXMuY2xlYXJTY3JvbGxUb0luZGV4KCk7XG4gICAgdGhpcy5wcmV2aW91c09uU2Nyb2xsTG9nc0NvdW50ID0gdGhpcy5sb2dzLmxlbmd0aDtcbiAgfVxuXG4gIEBhY3Rpb24uYm91bmRcbiAgcHVibGljIGxvYWRNb3JlTG9nc0luUGFzdCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5pc1BvbGxpbmcgJiYgdGhpcy5zZWFyY2hEaXJlY3Rpb24gPT09ICdwYXN0Jykge1xuICAgICAgLy8gQWxyZWFkeSBmZXRjaGluZyBwYXJ0aWFsIHJlc3VsdHMgc28gZG8gbm90aGluZ1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5nZXRMb2dzUmV0cnlUaW1lcik7XG4gICAgY29uc3Qgb2xkZXN0TG9nID0gdGhpcy5maW5kT2xkZXN0TG9nKCk7XG5cbiAgICAvLyBNYWtlIHN1cmUgd2UgaGF2ZW4ndCBhbHJlYWR5IGZldGNoZWQgbG9ncyBiZWZvcmUgdGhpcyB0aW1lc3RhbXAuXG4gICAgLy8gQW5kIG1ha2Ugc3VyZSB3ZSBoYXZlbid0IHJlYWNoZWQgdGhlIFwib2xkZXN0XCIgKGByZWFjaGVkT2xkZXN0YCBjb3VsZCBhbHNvIG1lYW4gdGhlIHN0YXJ0IG9mIHRoZSBkYXRlIHJhbmdlKS5cbiAgICBpZiAob2xkZXN0TG9nICYmICF0aGlzLnJlYWNoZWRPbGRlc3QgJiYgdGhpcy5sYXN0TG9nSW5QYXN0VGltZXN0YW1wICE9PSBvbGRlc3RMb2cuX3Jvd0lkKSB7XG4gICAgICB0aGlzLnNlYXJjaERpcmVjdGlvbiA9ICdwYXN0JztcblxuICAgICAgdGhpcy5sYXN0TG9nSW5QYXN0VGltZXN0YW1wID0gb2xkZXN0TG9nLl9yb3dJZDtcblxuICAgICAgLy8gQ2xlYXIgbGFzdExvZ0luRnV0dXJlVGltZXN0YW1wLCBub3cgdGhhdCB3ZSdyZSBnb2luZyB0aGUgb3Bwb3NpdGUgZGlyZWN0aW9uLCBvdGhlcndpc2UgbG9hZE1vcmVMb2dzSW5GdXR1cmUgbWF5IG5vdCBydW4uXG4gICAgICB0aGlzLmxhc3RMb2dJbkZ1dHVyZVRpbWVzdGFtcCA9IHVuZGVmaW5lZDtcblxuICAgICAgdGhpcy5zY3JvbGxUb0luZGV4ID0gdW5kZWZpbmVkO1xuXG4gICAgICBjb25zdCBudW1OZXdMb2dzUmVxdWVzdGVkID0gTE9HU19QRVJfUEFHRTtcblxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgdGhpcy5wb2xsTG9nU2VhcmNoKFxuICAgICAgICBvbGRlc3RMb2cuX3Jvd0lkLFxuICAgICAgICBudW1OZXdMb2dzUmVxdWVzdGVkLFxuICAgICAgICAnZGVzYycsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAocmVzdWx0czogTG9nU2VhcmNoUmVzdWx0KSA9PiB7XG4gICAgICAgICAgY29uc3QgbmV3TG9ncyA9IHJlc3VsdHMubG9ncztcblxuICAgICAgICAgIHRoaXMuaXNQYXJ0aWFsID0gQm9vbGVhbihyZXN1bHRzLmlzUGFydGlhbCk7XG4gICAgICAgICAgdGhpcy5taW5CbG9ja1RpbWUgPSByZXN1bHRzLm1pbkJsb2NrVGltZTtcbiAgICAgICAgICB0aGlzLm1heEJsb2NrVGltZSA9IHJlc3VsdHMubWF4QmxvY2tUaW1lO1xuICAgICAgICAgIHRoaXMucm93c0V4YW1pbmVkID0gcmVzdWx0cy5yb3dzRXhhbWluZWQ7XG4gICAgICAgICAgdGhpcy5maWVsZFZhbHVlRm9ybWF0dGVycyA9IHJlc3VsdHMuZmllbGRWYWx1ZUZvcm1hdHRlcnM7XG5cbiAgICAgICAgICBpZiAoIXRoaXMuaXNQYXJ0aWFsKSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSBnb3QgZmV3ZXIgcmVzdWx0cyB0aGVuIHdlIGFza2VkIGZvciwgd2UncmUgYXQgdGhlIG9sZGVzdC5cbiAgICAgICAgICAgIGlmIChyZXN1bHRzLm1hdGNoZXNDb3VudEJlZm9yZURlZHVwIDwgbnVtTmV3TG9nc1JlcXVlc3RlZCkge1xuICAgICAgICAgICAgICB0aGlzLnJlYWNoZWRPbGRlc3QgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5zY3JvbGxlZFRvVG9wICYmIG5ld0xvZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgIC8vIElmIHdlJ3JlIHN0aWxsIHNjcm9sbGVkIHRvIHRoZSB0b3AgYW5kIGRpZG4ndCBsb2FkIGFueSBtb3JlIGxvZ3MsIHRoZW4gXCJMb2FkIG1vcmVcIiBpcyBzdGlsbCBzaG93aW5nLFxuICAgICAgICAgICAgICAvLyBzbyB3ZSBuZWVkIHRvIGtpY2sgaXQgb2ZmIGFnYWluLlxuICAgICAgICAgICAgICB0aGlzLmxvYWRNb3JlTG9nc0luUGFzdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIE5vIG5lZWQgdG8gZG8gYW55IG1vcmUgd29yayBpZiB0aGVyZSBhcmVuJ3QgbG9ncyB0byBhZGQuXG4gICAgICAgICAgaWYgKG5ld0xvZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLy8gU2V0IHRvIHRoZSBsb2cgYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgYXJyYXksIHNpbmNlIHRoYXQgc2hvdWxkIGJlIHRoZSBvbmUgdmlzaWJsZSBhZnRlciB0aGUgXCJMb2FkIG1vcmVcIiByb3cuXG4gICAgICAgICAgICBjb25zdCBzY3JvbGxUb0xvZyA9IHRoaXMubG9ncy5sZW5ndGggPiAwID8gdGhpcy5sb2dzWzBdIDogdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICB0aGlzLmFkZExvZ3MobmV3TG9ncyk7XG5cbiAgICAgICAgICAgIC8vIEhhdmUgdG8gY2hlY2sgc2Nyb2xsIHBvc2l0aW9uIGJlY2F1c2UgaXQgY291bGQgY2hhbmdlIGlmIHRoZSB1c2VyIHNjcm9sbHMgd2hpbGUgd2FpdGluZyBmb3IgcGFydGlhbCByZXN1bHRzLlxuICAgICAgICAgICAgLy8gVXNlIHNjcm9sbFRvcCBpbnN0ZWFkIG9mIHNjcm9sbGVkVG9Ub3AgYmVjYXVzZSB3ZSBuZWVkIGEgYnVmZmVyIHRvIGFjY29tbW9kYXRlIGhvdyBicm93c2VycyByZWFjdCB0byBuZXdcbiAgICAgICAgICAgIC8vIHJvd3MgYmVpbmcgYWRkZWQgd2hlbiB5b3UncmUgaW4gYW4gb3ZlcmZsb3dpbmcgZGl2LlxuICAgICAgICAgICAgLy8gSWYgeW91J3JlIHNjcm9sbGVkIHRvbyBjbG9zZSB0byB0aGUgdG9wIHRoZXkgd2FudCB0byBrZWVwIHRoZSBzY3JvbGxpbmcgcG9zaXRpb24gd2hlcmUgaXQgaXMsIHRoZXJlZm9yZVxuICAgICAgICAgICAgLy8gd2UgbmVlZCB0byBtYW51YWxseSBhZGp1c3QgdGhlIHBvc2l0aW9uIGluIHRoYXQgc2NlbmFyaW8uXG4gICAgICAgICAgICBpZiAodGhpcy5zY3JvbGxUb3AgPD0gOTApIHtcbiAgICAgICAgICAgICAgLy8gU2V0IHNjcm9sbFRvSW5kZXggdG8gd2hlcmUgdGhlIFwiZm9ybWVyIG9sZGVzdFwiIGxvZyBpcyB0byBhdm9pZCBqdW1waW5nIHdoZW4gd2UgcHJlcGVuZCBsb2dzLlxuICAgICAgICAgICAgICB0aGlzLnNjcm9sbFRvSW5kZXggPSB0aGlzLmxvZ3MuZmluZEluZGV4KChsbCkgPT4gbGwuX3Jvd0lkID09PSBzY3JvbGxUb0xvZz8uX3Jvd0lkKTtcbiAgICAgICAgICAgICAgaWYgKHRoaXMuc2Nyb2xsVG9JbmRleCA8IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFRvSW5kZXggPSAwO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9BbGlnbm1lbnQgPSAndG9wJztcbiAgICAgICAgICAgICAgdGhpcy5kZWxheWVkQ2xlYXJTY3JvbGxUb0luZGV4KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmxvZ3MubGVuZ3RoID4gTUFYX05VTV9MT0dTKSB7XG4gICAgICAgICAgICAgIC8vIFJlbW92ZSBsb2dzIGZyb20gdGhlIFwiZnV0dXJlXCIgKGVuZCBvZiBhcnJheSkgc2luY2Ugd2UncmUgbG9hZGluZyBpbiB0aGUgcGFzdC5cbiAgICAgICAgICAgICAgdGhpcy5sb2dzLnNwbGljZShNQVhfTlVNX0xPR1MsIHRoaXMubG9ncy5sZW5ndGggLSBNQVhfTlVNX0xPR1MpO1xuXG4gICAgICAgICAgICAgIHRoaXMucmVhY2hlZE5ld2VzdCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEFsd2F5cyBjYWxsIHRoaXMgKGV2ZW4gaWYgd2UgZG9uJ3QgaGF2ZSBuZXcgbG9ncyksIGJlY2F1c2UgYHJlYWNoZWRPbGRlc3RgIGNvdWxkIGhhdmUgY2hhbmdlZC5cbiAgICAgICAgICB0aGlzLmFkZERhdGVSYW5nZVN0YXJ0TWFya2VyKCk7XG4gICAgICAgIH0sXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICAvLyBJZiBpdCdzIGEgTmV0d29yayBFcnJvciwgcmV0cnkgYWZ0ZXIgYSBkZWxheVxuICAgICAgICAgIGlmICh0aGlzLmdldExvZ3NPcC5vcGVyYXRpb24uZGlzY29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLmdldExvZ3NSZXRyeVRpbWVyID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLmxvYWRNb3JlTG9nc0luUGFzdCgpO1xuICAgICAgICAgICAgfSwgNTAwMCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgQGFjdGlvbi5ib3VuZFxuICBwdWJsaWMgbG9hZE1vcmVMb2dzSW5GdXR1cmUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaXNQb2xsaW5nICYmIHRoaXMuc2VhcmNoRGlyZWN0aW9uID09PSAnZnV0dXJlJykge1xuICAgICAgLy8gQWxyZWFkeSBmZXRjaGluZyBwYXJ0aWFsIHJlc3VsdHMgc28gZG8gbm90aGluZ1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5nZXRMb2dzUmV0cnlUaW1lcik7XG4gICAgY29uc3QgbmV3ZXN0TG9nID0gdGhpcy5maW5kTmV3ZXN0TG9nKCk7XG5cbiAgICAvLyBNYWtlIHN1cmUgd2UgaGF2ZW4ndCBhbHJlYWR5IGZldGNoZWQgbG9ncyBhZnRlciB0aGlzIHRpbWVzdGFtcC5cbiAgICAvLyBBbHNvIG1ha2Ugc3VyZSB3ZSBoYXZlbid0IHJlYWNoZWQgdGhlIFwibmV3ZXN0XCIgKGByZWFjaGVkTmV3ZXN0YCBjb3VsZCBhbHNvIG1lYW4gdGhlIGVuZCBvZiB0aGUgZGF0ZSByYW5nZSkuXG4gICAgaWYgKG5ld2VzdExvZyAmJiAhdGhpcy5yZWFjaGVkTmV3ZXN0ICYmIHRoaXMubGFzdExvZ0luRnV0dXJlVGltZXN0YW1wICE9PSBuZXdlc3RMb2cuX3Jvd0lkKSB7XG4gICAgICB0aGlzLnNlYXJjaERpcmVjdGlvbiA9ICdmdXR1cmUnO1xuXG4gICAgICB0aGlzLmxhc3RMb2dJbkZ1dHVyZVRpbWVzdGFtcCA9IG5ld2VzdExvZy5fcm93SWQ7XG5cbiAgICAgIC8vIENsZWFyIGxhc3RMb2dJblBhc3RUaW1lc3RhbXAsIG5vdyB0aGF0IHdlJ3JlIGdvaW5nIHRoZSBvcHBvc2l0ZSBkaXJlY3Rpb24sIG90aGVyd2lzZSBsb2FkTW9yZUxvZ3NJblBhc3QgbWF5IG5vdCBydW4uXG4gICAgICB0aGlzLmxhc3RMb2dJblBhc3RUaW1lc3RhbXAgPSB1bmRlZmluZWQ7XG5cbiAgICAgIHRoaXMuc2Nyb2xsVG9JbmRleCA9IHVuZGVmaW5lZDtcblxuICAgICAgY29uc3QgbnVtTmV3TG9nc1JlcXVlc3RlZCA9IExPR1NfUEVSX1BBR0U7XG5cbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgIHRoaXMucG9sbExvZ1NlYXJjaChcbiAgICAgICAgbmV3ZXN0TG9nLl9yb3dJZCxcbiAgICAgICAgbnVtTmV3TG9nc1JlcXVlc3RlZCxcbiAgICAgICAgJ2FzYycsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAocmVzdWx0czogTG9nU2VhcmNoUmVzdWx0KSA9PiB7XG4gICAgICAgICAgY29uc3QgbmV3TG9ncyA9IHJlc3VsdHMubG9ncztcblxuICAgICAgICAgIHRoaXMuaXNQYXJ0aWFsID0gQm9vbGVhbihyZXN1bHRzLmlzUGFydGlhbCk7XG4gICAgICAgICAgdGhpcy5taW5CbG9ja1RpbWUgPSByZXN1bHRzLm1pbkJsb2NrVGltZTtcbiAgICAgICAgICB0aGlzLm1heEJsb2NrVGltZSA9IHJlc3VsdHMubWF4QmxvY2tUaW1lO1xuICAgICAgICAgIHRoaXMucm93c0V4YW1pbmVkID0gcmVzdWx0cy5yb3dzRXhhbWluZWQ7XG4gICAgICAgICAgdGhpcy5maWVsZFZhbHVlRm9ybWF0dGVycyA9IHJlc3VsdHMuZmllbGRWYWx1ZUZvcm1hdHRlcnM7XG5cbiAgICAgICAgICBpZiAoIXRoaXMuaXNQYXJ0aWFsKSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSBnb3QgZmV3ZXIgcmVzdWx0cyB0aGVuIHdlIGFza2VkIGZvciwgd2UncmUgYXQgdGhlIG5ld2VzdC5cbiAgICAgICAgICAgIGlmIChyZXN1bHRzLm1hdGNoZXNDb3VudEJlZm9yZURlZHVwIDwgbnVtTmV3TG9nc1JlcXVlc3RlZCkge1xuICAgICAgICAgICAgICB0aGlzLnJlYWNoZWROZXdlc3QgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5zY3JvbGxlZFRvQm90dG9tICYmIHRoaXMucmVhY2hlZE5ld2VzdCkge1xuICAgICAgICAgICAgICB0aGlzLmVuYWJsZVN0cmVhbWluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIE5vIG5lZWQgdG8gZG8gYW55IG1vcmUgd29yayBpZiB0aGVyZSBhcmVuJ3QgbG9ncyB0byBhZGQuXG4gICAgICAgICAgaWYgKG5ld0xvZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLy8gU2V0IHRvIHRoZSBsb2cgYXQgdGhlIGVuZCBvZiB0aGUgYXJyYXksIHNpbmNlIHRoYXQgc2hvdWxkIGJlIHRoZSBvbmUgdmlzaWJsZSBiZWZvcmUgdGhlIFwiTG9hZCBtb3JlXCIgcm93LlxuICAgICAgICAgICAgY29uc3Qgc2Nyb2xsVG9Mb2cgPSB0aGlzLmxvZ3MubGVuZ3RoID4gMCA/IHRoaXMubG9nc1t0aGlzLmxvZ3MubGVuZ3RoIC0gMV0gOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIHRoaXMuYWRkTG9ncyhuZXdMb2dzKTtcblxuICAgICAgICAgICAgdGhpcy5yZW1vdmVPbGRlc3RMb2dzKCk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnNjcm9sbGVkVG9Cb3R0b20pIHtcbiAgICAgICAgICAgICAgLy8gU2V0IHNjcm9sbFRvSW5kZXggdG8gd2hlcmUgdGhlIFwiZm9ybWVyIG9sZGVzdFwiIGxvZyBpcyB0byBhdm9pZCBqdW1waW5nIHdoZW4gd2UgcHJlcGVuZCBsb2dzLlxuICAgICAgICAgICAgICB0aGlzLnNjcm9sbFRvSW5kZXggPSB0aGlzLmxvZ3MuZmluZEluZGV4KChsbCkgPT4gbGwuX3Jvd0lkID09PSBzY3JvbGxUb0xvZz8uX3Jvd0lkKTtcbiAgICAgICAgICAgICAgaWYgKHRoaXMuc2Nyb2xsVG9JbmRleCA8IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFRvSW5kZXggPSAwO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9BbGlnbm1lbnQgPSAnYm90dG9tJztcbiAgICAgICAgICAgICAgdGhpcy5kZWxheWVkQ2xlYXJTY3JvbGxUb0luZGV4KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gQWx3YXlzIGNhbGwgdGhpcyAoZXZlbiBpZiB3ZSBkb24ndCBoYXZlIG5ldyBsb2dzKSwgYmVjYXVzZSBgcmVhY2hlZE5ld2VzdGAgY291bGQgaGF2ZSBjaGFuZ2VkLlxuICAgICAgICAgIHRoaXMuYWRkRGF0ZVJhbmdlRW5kTWFya2VyKCk7XG4gICAgICAgIH0sXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICAvLyBJZiBpdCdzIGEgTmV0d29yayBFcnJvciwgcmV0cnkgYWZ0ZXIgYSBkZWxheVxuICAgICAgICAgIGlmICh0aGlzLmdldExvZ3NPcC5vcGVyYXRpb24uZGlzY29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLmdldExvZ3NSZXRyeVRpbWVyID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLmxvYWRNb3JlTG9nc0luRnV0dXJlKCk7XG4gICAgICAgICAgICB9LCA1MDAwKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBAYWN0aW9uLmJvdW5kXG4gIHB1YmxpYyBmb3JjZUxvYWRNb3JlTG9nc0luRnV0dXJlKCk6IHZvaWQge1xuICAgIC8vIFNpZ25hbHMgdGhhdCB3ZSBzaG91bGQgaWdub3JlIHF1ZXJ5UGFyYW1zLmVuZFRpbWUgc28gdGhhdCB3ZSBjYW4gYWN0dWFsbHkgbG9hZCBtb3JlIGxvZ3MgcGFzdCB0aGUgY3VycmVudCBlbmQgdGltZS5cbiAgICB0aGlzLmlnbm9yZUVuZFRpbWUgPSB0cnVlO1xuICAgIC8vIFJlc2V0IHNvbWUgc3RhdGUuXG4gICAgdGhpcy5yZWFjaGVkTmV3ZXN0ID0gZmFsc2U7XG4gICAgdGhpcy5zY3JvbGxlZFRvQm90dG9tID0gdHJ1ZTtcbiAgICB0aGlzLnNjcm9sbGVkVG9Ub3AgPSBmYWxzZTtcblxuICAgIC8vIFJlbW92ZSBEYXRlUmFuZ2VFbmQgbWFya2VyLlxuICAgIGNvbnN0IGxhc3RMb2cgPSB0aGlzLmxvZ3NbdGhpcy5sb2dzLmxlbmd0aCAtIDFdO1xuICAgIGNvbnN0IGRhdGVSYW5nZUVuZEV4aXN0cyA9IGxhc3RMb2cgJiYgIWlzTG9nKGxhc3RMb2cpICYmIGxhc3RMb2cubWFya2VyVHlwZSA9PT0gTWFya2VyVHlwZS5EYXRlUmFuZ2VFbmQ7XG4gICAgaWYgKGRhdGVSYW5nZUVuZEV4aXN0cykge1xuICAgICAgdGhpcy5sb2dzLnBvcCgpO1xuICAgIH1cblxuICAgIHRoaXMubG9hZE1vcmVMb2dzSW5GdXR1cmUoKTtcbiAgfVxuXG4gIEBhY3Rpb24uYm91bmRcbiAgcHVibGljIGNsZWFyU2Nyb2xsVG9JbmRleCgpIHtcbiAgICB0aGlzLnNjcm9sbFRvQWxpZ25tZW50ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuc2Nyb2xsVG9JbmRleCA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIEBhY3Rpb24uYm91bmRcbiAgcHVibGljIGNhbmNlbEdldExvZ3MoKSB7XG4gICAgLy8gQ2xlYXIgcG9sbGluZyB2YXJzXG4gICAgdGhpcy5pc1BvbGxpbmcgPSBmYWxzZTtcbiAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMucG9sbExvZ1NlYXJjaFRpbWVvdXQpO1xuXG4gICAgLy8gTmV2ZXIgZW5hYmxlIHRoaXMuXG4gICAgLy8gSXQgd2lsbCBjYXVzZSBwb2xsTG9nU2VhcmNoIHRvIGhhdmUgdW5leHBlY3RlZCByZXN1bHRzIGJlY2F1c2UgYHF1ZXJ5SWRgIGNhbiBoYXZlIHJlcGVhdGVkIHZhbHVlcy5cbiAgICAvLyB0aGlzLmxhc3RRdWVyeUlkID0gMDtcblxuICAgIC8vIENsZWFyIGFueSBmZXRjaGluZyByZWxhdGVkIHZhcnNcbiAgICB0aGlzLmxhc3RMb2dJblBhc3RUaW1lc3RhbXAgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5sYXN0TG9nSW5GdXR1cmVUaW1lc3RhbXAgPSB1bmRlZmluZWQ7XG4gIH1cblxuICAvLyDwn5CJ8J+QifCfkIlcbiAgLy8gTk9URTogQ2FsbGluZyB3aXRoIHRoZSBzdHJpbmcgYG5vd2Agd2lsbCBoYXZlIGEgZGlmZmVyZW50IHNjcm9sbCBiZWhhdmlvciB0aGFuIHdpdGggYERhdGUubm93KClgXG4gIEBhY3Rpb24uYm91bmRcbiAgcHJpdmF0ZSBnZXRMb2dzKCkge1xuICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5nZXRMb2dzUmV0cnlUaW1lcik7XG5cbiAgICAvLyBSZXNldCB0aGUgc3RhdGUgb2YgZ2V0TG9nc09wIGV2ZXJ5IHRpbWUgZ2V0TG9ncyBpcyBjYWxsZWQuXG4gICAgLy8gV2Ugd2FudCBpdCB0byBsb29rIGxpa2UgaXQgaGFzbid0IHJ1bi4gKCFoYXNSdW4pXG4gICAgdGhpcy5nZXRMb2dzT3AgPSBuZXcgU2ltcGxlT3BlcmF0aW9uc1RyYWNrZXIoJ2dldExvZ3NPcCcpO1xuXG4gICAgLy8gQ2xlYXIgYGxhc3RgIHZhcmlhYmxlcywgb3RoZXJ3aXNlIGxvYWRNb3JlTG9nc0luKiBtYXkgbm90IHJ1bi5cbiAgICB0aGlzLmxhc3RMb2dJbkZ1dHVyZVRpbWVzdGFtcCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmxhc3RMb2dJblBhc3RUaW1lc3RhbXAgPSB1bmRlZmluZWQ7XG5cbiAgICAvLyBSZXNldCBhbGwgdGhlIHN0YXRlLCBzaW5jZSB3ZSB3YW50IHRoaXMgdG8gYmVoYXZlIGxpa2UgYSBmcmVzaCBsb2FkaW5nIG9mIHRoZSBMb2dzU3RyZWFtUGFnZS5cbiAgICB0aGlzLmxvZ3MgPSBbXTtcbiAgICB0aGlzLmhpZ2hsaWdodEluID0gZmFsc2U7XG4gICAgdGhpcy5pZ25vcmVFbmRUaW1lID0gZmFsc2U7XG4gICAgdGhpcy5yZWFjaGVkT2xkZXN0ID0gZmFsc2U7XG4gICAgdGhpcy5yZWFjaGVkTmV3ZXN0ID0gZmFsc2U7XG4gICAgdGhpcy5zY3JvbGxUb0luZGV4ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuaXNQYXJ0aWFsID0gZmFsc2U7XG4gICAgdGhpcy5taW5CbG9ja1RpbWUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5tYXhCbG9ja1RpbWUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5yb3dzRXhhbWluZWQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5wcmV2aW91c09uU2Nyb2xsTG9nc0NvdW50ID0gMDtcbiAgICB0aGlzLnN0cmVhbWluZ0VuYWJsZWQgPSBmYWxzZTsgLy8gVGhpcyB1c2VkIHRvIGJlIGB0cnVlYCwgYnV0IHdpdGggcGFydGlhbCByZXN1bHRzIHdlIG5lZWQgdG8gd2FpdCBmb3IgdGhvc2UgdG8gZmluaXNoIChJIHRoaW5rKVxuICAgIHRoaXMuY2FuY2VsRW5hYmxlU3RyZWFtaW5nID0gZmFsc2U7XG5cbiAgICAvLyBGb3IgZGF0ZVJhbmdlcywgbG9hZCByZWNvcmRzIGluIHRoZSBmdXR1cmUgcmVsYXRpdmUgdG8gdGhlIHJlcXVlc3RlZCB0aW1lc3RhbXAgKGFzYylcbiAgICAvLyBGb3IgXCJsaXZlXCIsIGxvYWQgcmVjb3JkcyBpbiB0aGUgcGFzdCAoZGVzYykuXG4gICAgY29uc3Qgb3JkZXI6IE9yZGVyRGlyZWN0aW9uID0gdGhpcy5pc0RhdGVSYW5nZSA/ICdhc2MnIDogJ2Rlc2MnO1xuICAgIHRoaXMuc2VhcmNoRGlyZWN0aW9uID0gb3JkZXIgPT09ICdhc2MnID8gJ2Z1dHVyZScgOiAncGFzdCc7XG5cbiAgICBsZXQgc2Nyb2xsZWQgPSBmYWxzZTtcblxuICAgIGNvbnN0IGN1cnNvclJvd0lkID0gdGhpcy5hY3RpdmVSb3dJZDtcblxuICAgIGlmIChjdXJzb3JSb3dJZCkge1xuICAgICAgdGhpcy5jYW5jZWxFbmFibGVTdHJlYW1pbmcgPSB0cnVlO1xuICAgIH1cblxuICAgIC8vIHRoZSBkZWxheSBhbGxvd3MgdGhlIHNsaWRlLXVwIGFuaW1hdGlvbiB0byBmaW5pc2ggd2hpbGUgc3RpbGwgZGlzcGxheWluZyB0aGUgbG9hZGluZyBzcGlubmVyLlxuICAgIGNvbnN0IGZldGNoID0gYWN0aW9uKCgpID0+IHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgIHRoaXMucG9sbExvZ1NlYXJjaChcbiAgICAgICAgY3Vyc29yUm93SWQsXG4gICAgICAgIExPR1NfUEVSX1BBR0UsXG4gICAgICAgIG9yZGVyLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHRydWUsXG4gICAgICAgIGFjdGlvbigocmVzdWx0czogTG9nU2VhcmNoUmVzdWx0KSA9PiB7XG4gICAgICAgICAgY29uc3QgbmV3TG9ncyA9IHJlc3VsdHMubG9ncztcblxuICAgICAgICAgIC8vIFNldCBwYXJ0aWFsIHJlc3VsdHMgcHJvcGVydGllc1xuICAgICAgICAgIHRoaXMuaXNQYXJ0aWFsID0gQm9vbGVhbihyZXN1bHRzLmlzUGFydGlhbCk7XG4gICAgICAgICAgdGhpcy5taW5CbG9ja1RpbWUgPSByZXN1bHRzLm1pbkJsb2NrVGltZTtcbiAgICAgICAgICB0aGlzLm1heEJsb2NrVGltZSA9IHJlc3VsdHMubWF4QmxvY2tUaW1lO1xuICAgICAgICAgIHRoaXMucm93c0V4YW1pbmVkID0gcmVzdWx0cy5yb3dzRXhhbWluZWQ7XG4gICAgICAgICAgdGhpcy5maWVsZFZhbHVlRm9ybWF0dGVycyA9IHJlc3VsdHMuZmllbGRWYWx1ZUZvcm1hdHRlcnM7XG5cbiAgICAgICAgICBpZiAodGhpcy5pc0RhdGVSYW5nZSkge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHNwZWNpZmllZCByb3cgaXMgb3V0IG9mIHRoZSBib3VuZHMgb2YgdGhlIGRhdGUgcmFuZ2UuXG4gICAgICAgICAgICBpZiAoY3Vyc29yUm93SWQpIHtcbiAgICAgICAgICAgICAgY29uc3QgY3Vyc29yID0gbmV3TG9ncy5maW5kKChsbCkgPT4gbGwuX3Jvd0lkID09PSBjdXJzb3JSb3dJZCk7XG4gICAgICAgICAgICAgIGlmIChjdXJzb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJzb3JEYXRlVGltZXN0YW1wID0gbmV3IERhdGUoY3Vyc29yLl90aW1lKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgY3Vyc29yRGF0ZVRpbWVzdGFtcCA8ICh0aGlzLmFjdGl2ZVF1ZXJ5LnRpbWVzdGFtcFN0YXJ0IHx8IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSKSB8fFxuICAgICAgICAgICAgICAgICAgY3Vyc29yRGF0ZVRpbWVzdGFtcCA+ICh0aGlzLmFjdGl2ZVF1ZXJ5LnRpbWVzdGFtcEVuZCB8fCBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUilcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIHJ1bkluQWN0aW9uKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRRdWVyeVBhcmFtc0RhdGVSYW5nZSgpO1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghdGhpcy5pc1BhcnRpYWwpIHtcbiAgICAgICAgICAgICAgdGhpcy5yZWFjaGVkTmV3ZXN0ID0gcmVzdWx0cy5tYXRjaGVzQ291bnRCZWZvcmVEZWR1cCA8IExPR1NfUEVSX1BBR0U7XG4gICAgICAgICAgICAgIC8vIFNpbmNlIHRoaXMgaXMgYSB0aW1lIHJhbmdlLCBgcmVhY2hlZE9sZGVzdGAgbmVlZHMgdG8gYmUgc2V0IHRvIHRydWUsXG4gICAgICAgICAgICAgIC8vIHVubGVzcyBhIGN1cnNvciB3YXMgc3BlY2lmaWVkIHRoZW4gd2UgbmVlZCB0byBkbyBhbm90aGVyIGZldGNoIHRvIGNoZWNrLlxuICAgICAgICAgICAgICBpZiAoIWN1cnNvclJvd0lkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWFjaGVkT2xkZXN0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBObyBuZWVkIHRvIGRvIGFueSBtb3JlIHdvcmsgaWYgdGhlcmUgYXJlbid0IGxvZ3MgdG8gYWRkLlxuICAgICAgICAgICAgaWYgKG5ld0xvZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAvLyBGb3IgdGhlIGNhc2Ugd2hlcmUgdGhlIHVzZXIgaGFzIHNjcm9sbGVkIHRvIHRoZSB0b3AsIHNldCB0byB0aGVcbiAgICAgICAgICAgICAgLy8gbG9nIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGFycmF5LCBzaW5jZSB0aGF0IHNob3VsZCBiZSB0aGUgb25lIHZpc2libGUgYWZ0ZXIgdGhlIFwiU2VhcmNoZWQgYmFjayB0b1wiIHJvdy5cbiAgICAgICAgICAgICAgY29uc3Qgc2Nyb2xsVG9Mb2cgPSB0aGlzLmxvZ3MubGVuZ3RoID4gMCA/IHRoaXMubG9nc1swXSA6IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgICB0aGlzLmFkZExvZ3MobmV3TG9ncyk7XG5cbiAgICAgICAgICAgICAgLy8gU2luY2UgYSBzcGVjaWZpYyBkYXRlIHdhcyByZXF1ZXN0ZWQsIGluc2VydCBhIExpbmUgdG8gaW5kaWNhdGUgdGhlXG4gICAgICAgICAgICAgIC8vIHN0YXJ0IG9mIHRoZSBkYXRlIHJhbmdlLlxuICAgICAgICAgICAgICB0aGlzLmFkZERhdGVSYW5nZVN0YXJ0TWFya2VyKCFjdXJzb3JSb3dJZCk7XG5cbiAgICAgICAgICAgICAgaWYgKCFzY3JvbGxlZCkge1xuICAgICAgICAgICAgICAgIHNjcm9sbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAvLyBEZWZhdWx0IHRvIGZhbHNlIHNpbmNlIGEgdGltZXN0YW1wIHdhcyBzcGVjaWZpZWQuXG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxlZFRvQm90dG9tID0gZmFsc2U7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zY3JvbGxlZFRvVG9wKSB7XG4gICAgICAgICAgICAgICAgLy8gU2V0IHNjcm9sbFRvSW5kZXggdG8gd2hlcmUgdGhlIFwiZm9ybWVyIG9sZGVzdFwiIGxvZyBpcyB0byBhdm9pZCBqdW1waW5nIHdoZW4gd2UgcHJlcGVuZCBsb2dzLlxuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9JbmRleCA9IHRoaXMubG9ncy5maW5kSW5kZXgoKGxsKSA9PiBsbC5fcm93SWQgPT09IHNjcm9sbFRvTG9nPy5fcm93SWQpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNjcm9sbFRvSW5kZXggPCAwKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFRvSW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFRvQWxpZ25tZW50ID0gJ3RvcCc7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWxheWVkQ2xlYXJTY3JvbGxUb0luZGV4KCk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB0aGlzLmFkZERhdGVSYW5nZUVuZE1hcmtlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNQYXJ0aWFsKSB7XG4gICAgICAgICAgICAgIC8vIFRoaXMgbGlrZWx5IHdvbid0IGJlIHRydWUgaXMgYSBjdXJzb3JSb3dJZCBpcyBzZXQgc28gd2Ugc2tpcCB0aGUgY2hlY2suXG4gICAgICAgICAgICAgIGlmICghY3Vyc29yUm93SWQpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiBhIFwibm93XCIgdGltZXN0YW1wIHdhcyBzcGVjaWZpZWQsIHdlIGp1c3QgcmV0dXJuZWQgdGhlIG1vc3QgcmVjZW50IGRhdGEgc28gd2UncmUgYXQgdGhlIGVuZC5cbiAgICAgICAgICAgICAgICB0aGlzLnJlYWNoZWROZXdlc3QgPSB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRoaXMucmVhY2hlZE9sZGVzdCA9IHJlc3VsdHMubWF0Y2hlc0NvdW50QmVmb3JlRGVkdXAgPCBMT0dTX1BFUl9QQUdFOyAvLyBJZiB3ZSBkaWRuJ3QgZ2V0IHRoZSByZXF1ZXN0ZWQgbnVtYmVyIG9mIHJvd3Mgd2UgaGl0IHRoZSBiZWdpbm5pbmcuXG5cbiAgICAgICAgICAgICAgLy8gVGhpcyBjYWxsIHdhcyB0cmlnZ2VyZWQgd2l0aCB0aGUgaW50ZW50aW9uIHRvIGJlZ2luIHN0cmVhbWluZyxcbiAgICAgICAgICAgICAgLy8gYnV0IHdlIG5lZWRlZCB0byBsZXQgcGFydGlhbCByZXN1bHRzIGZpbmlzaCBmaXJzdC4gTm93IHRoYXRcbiAgICAgICAgICAgICAgLy8gdGhleSdyZSBmaW5pc2hlZCBjaGVjayBpZiB3ZSdyZSBpbiB0aGUgY29ycmVjdCBzY3JvbGxpbmcgcG9zaXRpb247IEJVVCBmaXJzdFxuICAgICAgICAgICAgICAvLyBoYW5kbGUgb25lIG1vcmUgZWRnZSBjYXNlIHdoZXJlIHRoZSBcIkxvYWRpbmcgbW9yZSBpbiBwYXN0XCIgcm93IGlzIHZpc2libGUuXG4gICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gcHJpb3JpdGl6ZSBsb2FkaW5nIGluIHRoZSBwYXN0IGJlY2F1c2UgdGhlcmUgd29uJ3QgYmUgYSB3YXkgdG8gc2Nyb2xsIHRvIGl0IGluIHRoZSBjYXNlXG4gICAgICAgICAgICAgIC8vIHdoZXJlIGFsbCByb3dzIGFyZSB2aXNpYmxlLlxuICAgICAgICAgICAgICAvLyBJZiB0aGVyZSBhcmUgemVybyBsb2dzIHRvdGFsLCB0aGVuIHdlIHdhbnQgdG8gZW5hYmxlIHN0cmVhbWluZyBzbyB0aGF0IHdlIGtlZXBcbiAgICAgICAgICAgICAgLy8gY2hlY2tpbmcgZm9yIGxvZ3MgaW4gdGhlIGJhY2tncm91bmQuXG4gICAgICAgICAgICAgIGlmICh0aGlzLnNjcm9sbGVkVG9Ub3AgJiYgbmV3TG9ncy5sZW5ndGggPT09IDAgJiYgdGhpcy5sb2dzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB3ZSdyZSBzY3JvbGxlZCB0byB0aGUgdG9wIGFuZCBkaWRuJ3QgbG9hZCBhbnkgbW9yZSBsb2dzLCB0aGVuIFwiU2VhcmNoaW5nIGJhY2sgdG9cIiBpcyBzaG93aW5nLFxuICAgICAgICAgICAgICAgIC8vIGFuZCBpdCdzIGFib3V0IHRvIHN3aXRjaCB0byB0aGUgXCJMb2FkaW5nIG1vcmVcIiBwbGFjZWhvbGRlciwgYnV0IGl0IHdvbid0IGxvYWQgbW9yZSB1bmxlc3Mgd2UgYWN0dWFsbHlcbiAgICAgICAgICAgICAgICAvLyBjYWxsIHRoaXMuXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkTW9yZUxvZ3NJblBhc3QoKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAhY3Vyc29yUm93SWQgJiYgLy8gRG9uJ3QgZW5hYmxlIHN0cmVhbWluZyBpZiB0aGVyZSB3YXMgYSBzcGVjaWZpYyByb3cgcmVxdWVzdGVkLlxuICAgICAgICAgICAgICAgICgoIXRoaXMuY2FuY2VsRW5hYmxlU3RyZWFtaW5nICYmIHRoaXMuc2Nyb2xsZWRUb0JvdHRvbSkgfHwgdGhpcy5sb2dzLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmFibGVTdHJlYW1pbmcoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBObyBuZWVkIHRvIGRvIGFueSBtb3JlIHdvcmsgaWYgdGhlcmUgYXJlbid0IGxvZ3MgdG8gYWRkLlxuICAgICAgICAgICAgaWYgKG5ld0xvZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAvLyBGb3IgdGhlIGNhc2Ugd2hlcmUgdGhlIHVzZXIgaGFzIHNjcm9sbGVkIHRvIHRoZSB0b3AsIHNldCB0byB0aGVcbiAgICAgICAgICAgICAgLy8gbG9nIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGFycmF5LCBzaW5jZSB0aGF0IHNob3VsZCBiZSB0aGUgb25lIHZpc2libGUgYWZ0ZXIgdGhlIFwiU2VhcmNoZWQgYmFjayB0b1wiIHJvdy5cbiAgICAgICAgICAgICAgY29uc3Qgc2Nyb2xsVG9Mb2cgPSB0aGlzLmxvZ3MubGVuZ3RoID4gMCA/IHRoaXMubG9nc1swXSA6IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgICB0aGlzLmFkZExvZ3MobmV3TG9ncyk7XG5cbiAgICAgICAgICAgICAgLy8gT25seSBzY3JvbGwgdGhlIGZpcnN0IHRpbWUgd2UgaGF2ZSBzb21lIHJlc3VsdHMuXG4gICAgICAgICAgICAgIGlmICghc2Nyb2xsZWQpIHtcbiAgICAgICAgICAgICAgICBzY3JvbGxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxUb0JvdHRvbSgpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzUGFydGlhbCAmJiAhY3Vyc29yUm93SWQpIHtcbiAgICAgICAgICAgICAgICAgIC8vIEVuYWJsZSBzdHJlYW1pbmcgaWYgd2UgaGF2ZSBhIGZ1bGwgcmVzdWx0IHNldC5cbiAgICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlU3RyZWFtaW5nKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2Nyb2xsZWRUb1RvcCkge1xuICAgICAgICAgICAgICAgIC8vIFNldCBzY3JvbGxUb0luZGV4IHRvIHdoZXJlIHRoZSBcImZvcm1lciBvbGRlc3RcIiBsb2cgaXMgdG8gYXZvaWQganVtcGluZyB3aGVuIHdlIHByZXBlbmQgbG9ncy5cbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFRvSW5kZXggPSB0aGlzLmxvZ3MuZmluZEluZGV4KChsbCkgPT4gbGwuX3Jvd0lkID09PSBzY3JvbGxUb0xvZz8uX3Jvd0lkKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zY3JvbGxUb0luZGV4IDwgMCkge1xuICAgICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxUb0luZGV4ID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxUb0FsaWdubWVudCA9ICd0b3AnO1xuICAgICAgICAgICAgICAgIHRoaXMuZGVsYXllZENsZWFyU2Nyb2xsVG9JbmRleCgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gR2l2ZSB0aGUgaW5pdGlhbCBzZXQgb2Ygcm93cyBhIG1vbWVudCB0byBsb2FkLiBXZSBkb24ndCBuZWVkIHRvIGhpZ2hsaWdodCB0aG9zZS5cbiAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChcbiAgICAgICAgICAgIGFjdGlvbigoKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0SW4gPSB0cnVlO1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICA1MDBcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgdGhpcy5pc0luaXRpYWxMb2FkID0gZmFsc2U7XG4gICAgICAgIH0pLFxuICAgICAgICBhY3Rpb24oKGVycjogYW55KSA9PiB7XG4gICAgICAgICAgLy8gSWYgaXQncyBhIE5ldHdvcmsgRXJyb3IsIHJldHJ5IGFmdGVyIGEgZGVsYXlcbiAgICAgICAgICBpZiAodGhpcy5nZXRMb2dzT3Aub3BlcmF0aW9uLmRpc2Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgdGhpcy5nZXRMb2dzUmV0cnlUaW1lciA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5nZXRMb2dzKCk7XG4gICAgICAgICAgICB9LCA1MDAwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaWYgKHRoaXMuZ2V0TG9nc0RlbGF5KSB7XG4gICAgICB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGZldGNoKCk7XG4gICAgICB9LCB0aGlzLmdldExvZ3NEZWxheSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZldGNoKCk7XG4gICAgfVxuXG4gICAgLy8gcmVzZXQgdG8gemVybyBhZnRlciBldmVyeSBjYWxsLlxuICAgIHRoaXMuc2V0R2V0TG9nc0RlbGF5KDApO1xuICB9XG5cbiAgQGFjdGlvbi5ib3VuZFxuICBwdWJsaWMgcmVzZXRTdG9yZSgpIHtcbiAgICB0aGlzLnByZXZpb3VzU2VsZWN0ZWREYXRhc2V0SWQgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBwcml2YXRlIGRlbGF5ZWRDbGVhclNjcm9sbFRvSW5kZXgoKSB7XG4gICAgLy8gQ2xlYXIgc2Nyb2xsVG9JbmRleCBhZnRlciBhIGxvbmcgZW5vdWdoIHRpbWUgd2hlcmUgdGhlIGNvbXBvbmVudHMgaGF2ZSB1cGRhdGVkLCBidXQgYmVmb3JlIGFub3RoZXIgcGFydGlhbCByZXN1bHQgY29tZXMgaW4uXG4gICAgLy8gVGhpcyBhbGxvd3MgdXMgdG8gc2V0IHNjcm9sbFRvSW5kZXggdG8gdGhlIHNhbWUgYHJvd0lkYCB3aXRob3V0IGBMb2dTdHJlYW0udHN4YCByZWplY3RpbmcgaXQuXG4gICAgd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5jbGVhclNjcm9sbFRvSW5kZXgoKTtcbiAgICB9LCA1MCk7XG4gIH1cblxuICBwcml2YXRlIGZpbmRPbGRlc3RMb2coKTogTG9nIHwgdW5kZWZpbmVkIHtcbiAgICAvLyBTaW5jZSBsb2dzIGFyZSBzb3J0ZWQgb2xkZXN0IHRvIG5ld2VzdCwgc3RhcnQgc2VhcmNoIGZyb20gdGhlIHN0YXJ0IG9mIHRoZSBhcnJheS5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubG9ncy5sZW5ndGg7IGkgPSBpICsgMSkge1xuICAgICAgY29uc3QgaXRlbSA9IHRoaXMubG9nc1tpXTtcbiAgICAgIGlmIChpc0xvZyhpdGVtKSkge1xuICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgcHJpdmF0ZSBmaW5kTmV3ZXN0TG9nKCk6IExvZyB8IHVuZGVmaW5lZCB7XG4gICAgLy8gU2luY2UgbG9ncyBhcmUgc29ydGVkIG9sZGVzdCB0byBuZXdlc3QsIHN0YXJ0IHNlYXJjaCBmcm9tIHRoZSBlbmQgb2YgdGhlIGFycmF5LlxuICAgIGZvciAobGV0IGkgPSB0aGlzLmxvZ3MubGVuZ3RoIC0gMTsgaSA+PSAwOyBpID0gaSAtIDEpIHtcbiAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmxvZ3NbaV07XG4gICAgICBpZiAoaXNMb2coaXRlbSkpIHtcbiAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRGaWx0ZXIocXVlcnlSZXF1ZXN0OiBRdWVyeVJlcXVlc3RXaXRoT3B0aW9ucywgcXVlcnk6IHN0cmluZykge1xuICAgIHF1ZXJ5UmVxdWVzdC5maWx0ZXIgPSBKU09OLnBhcnNlKHF1ZXJ5KTtcblxuICAgIC8vIFdlIG5lZWQgdG8gbWFudWFsbHkgYWRkIGFsbCBWaXJ0dWFsRmllbGRzIHRoYXQgd2VyZSByZWZlcmVuY2VkIGluIHRoZSBmaWx0ZXIgdG8gdGhlIGZpbmFsIHF1ZXJ5UmVxdWVzdCB0byBwcmV2ZW50IHRoZSBzZXJ2ZXIgZnJvbSBoYXZpbmcgdG8gZG8gYW55IGV4dHJhIHdvcmsuXG4gICAgY29uc3QgY29udGFpbnNWaXJ0dWFsRmllbGQgPSAoZmlsdGVyPzogRmlsdGVyLCB2aXJ0dWFsRmllbGROYW1lPzogc3RyaW5nKTogYm9vbGVhbiA9PiB7XG4gICAgICBpZiAoIWZpbHRlcikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChmaWx0ZXIuZmllbGQgPT09IHZpcnR1YWxGaWVsZE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGVsc2UgaWYgKGZpbHRlci5jaGlsZHJlbikge1xuICAgICAgICByZXR1cm4gZmlsdGVyLmNoaWxkcmVuLnNvbWUoKGNoaWxkKSA9PiBjb250YWluc1ZpcnR1YWxGaWVsZChjaGlsZCwgdmlydHVhbEZpZWxkTmFtZSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBxdWVyeVZpcnR1YWxGaWVsZHMgPSB0aGlzLmRhdGFzZXRTdG9yZS52aXJ0dWFsRmllbGRzLmZpbHRlcigodmYpID0+XG4gICAgICBjb250YWluc1ZpcnR1YWxGaWVsZChxdWVyeVJlcXVlc3QuZmlsdGVyLCB2Zi5uYW1lKVxuICAgICk7XG5cbiAgICAvLyBNYXAgdmlydHVhbCBmaWVsZHMgdG8gY29sdW1uc1xuICAgIGNvbnN0IHZpcnR1YWxDb2x1bW5zID0gT2JqZWN0LnZhbHVlcyhxdWVyeVZpcnR1YWxGaWVsZHMpLm1hcCgoeyBuYW1lLCBleHByZXNzaW9uIH0pID0+ICh7XG4gICAgICBhbGlhczogbmFtZSxcbiAgICAgIGV4cHI6IGV4cHJlc3Npb24sXG4gICAgfSkpO1xuXG4gICAgcXVlcnlSZXF1ZXN0LnZpcnR1YWxGaWVsZHMgPSB2aXJ0dWFsQ29sdW1ucy5sZW5ndGggPyB2aXJ0dWFsQ29sdW1ucyA6IHVuZGVmaW5lZDtcblxuICAgIHNldENhc2VTZW5zaXRpdmUocXVlcnlSZXF1ZXN0LmZpbHRlciwgcXVlcnlSZXF1ZXN0Py5xdWVyeU9wdGlvbnM/LmNhc2VTZW5zaXRpdmUgPT09ICd0cnVlJyk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHBlcmZvcm1Mb2dTZWFyY2goXG4gICAgY3Vyc29yUm93SWQ/OiBzdHJpbmcsIC8vIEN1cnNvciBpcyBvbiBhbiBldmVudCBiYXNpcywgc28geW91IGNhbiB0ZWxsIGF4aW9tZGIgdG8gc2tpcCBhbGwgZXZlbnRzIHVudGlsIGFmdGVyIHRoZSBjdXJzb3IgKHVzZWZ1bCB0byBwcmV2ZW50IGR1cGxpY2F0ZXMgb24gdGhlIFN0cmVhbSB2aWV3KVxuICAgIGxpbWl0PzogbnVtYmVyLFxuICAgIG9yZGVyPzogT3JkZXJEaXJlY3Rpb24sXG4gICAgY29udGludWF0aW9uVG9rZW4/OiBzdHJpbmcsIC8vIENvbnRpbnVhdGlvblRva2VuIGlzIG9uIGEgcXVlcnkgYmFzaXMsIGkuZS4gYXhpb21kYiBjb3VsZG7igJl0IGJ1aWxkIGEgY29tcGxldGUgcmVzdWx0IHNvIGl0cyBzZW5kaW5nIHlvdSBhIGZpcnN0IHBhcnQgYW5kIGEg4oCcY3Vyc29y4oCdIHdoaWNoIHlvdSBjYW4gc2V0IG9uIHRoZSBzYW1lIHJlcXVlc3QgYW5kIHNlbmQgaXQgYWdhaW4gdG8gZ2V0IGEgKG1vcmUpIGNvbXBsZXRlIHJlc3VsdCAoYWthIHN0cmVhbWluZyBxdWVyeSlcbiAgICBzdHJlYW0/OiBib29sZWFuLFxuICAgIGluY2x1ZGVDdXJzb3I/OiBib29sZWFuXG4gICk6IFByb21pc2U8TG9nU2VhcmNoUmVzdWx0PiB7XG4gICAgY29uc3QgeyBkYXRhc2V0SWQgfSA9IHRoaXMuYWN0aXZlUXVlcnk7XG5cbiAgICBpZiAoIWRhdGFzZXRJZCkge1xuICAgICAgLy8gVGhpcyBzaG91bGRuJ3QgaGFwcGVuIChpbiB0aGVvcnkpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RhdGFzZXRJZCBub3Qgc2V0Jyk7XG4gICAgfVxuXG4gICAgY29uc3QgcGF5bG9hZDogUXVlcnlSZXF1ZXN0V2l0aE9wdGlvbnMgPSB7XG4gICAgICAuLi50aGlzLmFjdGl2ZVF1ZXJ5UmVxdWVzdCxcbiAgICAgIGxpbWl0OiBsaW1pdCxcbiAgICAgIG9yZGVyOiBbeyBmaWVsZDogJ190aW1lJywgZGVzYzogb3JkZXIgPT09ICdkZXNjJyB9XSxcbiAgICB9O1xuXG4gICAgLy8gVXNlZCB3aGVuIGEgY3VzdG9tZXIgd2FudHMgdG8gXCJsb2FkIG1vcmUgaW4gZnV0dXJlXCIgb24gYSBjdXN0b20gZGF0ZSByYW5nZS5cbiAgICBpZiAodGhpcy5pZ25vcmVFbmRUaW1lKSB7XG4gICAgICBwYXlsb2FkLmVuZFRpbWUgPSBNQVhfREFURS50b0lTT1N0cmluZygpO1xuICAgIH1cblxuICAgIGlmIChjdXJzb3JSb3dJZCkge1xuICAgICAgcGF5bG9hZC5jdXJzb3IgPSBjdXJzb3JSb3dJZDtcbiAgICB9XG5cbiAgICBpZiAoY29udGludWF0aW9uVG9rZW4pIHtcbiAgICAgIHBheWxvYWQuY29udGludWF0aW9uVG9rZW4gPSBjb250aW51YXRpb25Ub2tlbjtcbiAgICB9XG5cbiAgICBwYXlsb2FkLmluY2x1ZGVDdXJzb3IgPSBpbmNsdWRlQ3Vyc29yO1xuXG4gICAgY29uc3QgcGFyYW1zOiBRdWVyeURhdGFzZXRQYXJhbXMgPSB7IGlkOiBkYXRhc2V0SWQgfTtcblxuICAgIGlmIChzdHJlYW0pIHtcbiAgICAgIHBhcmFtc1snc3RyZWFtaW5nLWR1cmF0aW9uJ10gPSAnMXMnO1xuICAgIH1cblxuICAgIC8vIEFsbG93IEF4aW9tIHRvIHNldCBub2NhY2hlIHZpYSB0aGUgcGFnZSBVcmwgZm9yIGRlYnVnZ2luZy5cbiAgICBjb25zdCB7IGFjdGl2ZVF1ZXJ5IH0gPSB2aWV3U3RvcmU7XG4gICAgcGFyYW1zLm5vY2FjaGUgPSBhY3RpdmVRdWVyeS5ub2NhY2hlID09PSAndHJ1ZSc7XG5cbiAgICBjb25zdCBzdHJlYW1pbmdFbmFibGVkID0gdGhpcy5zdHJlYW1pbmdFbmFibGVkO1xuXG4gICAgLy8gSGF2ZSB0byBkbyBgcGF5bG9hZCBhcyBhbnlgIGJlY2F1c2Ugb2YgRmlsdGVyIG1pc21hdGNoLlxuICAgIHJldHVybiBkYXNoQXBpLnF1ZXJ5RGF0YXNldChwYXJhbXMsIHBheWxvYWQgYXMgYW55KS50aGVuKChyZXN1bHRzKSA9PiB7XG4gICAgICAvLyBTa2lwIHBhcnNpbmcgc2VydmVyIGVycm9yIG1lc3NhZ2VzIGlmIHdlJ3JlIHN0cmVhbWluZy4gKHByZXZlbnRzIGVycm9ycyBjb250aW51aW5nIHRvIHBvcHVwIGFmdGVyIHlvdSBkaXNtaXNzIHRoZW0pXG4gICAgICBpZiAoIXN0cmVhbWluZ0VuYWJsZWQpIHtcbiAgICAgICAgcGFyc2VRdWVyeU1lc3NhZ2VzKHJlc3VsdHMpO1xuICAgICAgfVxuXG4gICAgICBsZXQgcnNsdHMgPSAocmVzdWx0cy5tYXRjaGVzIHx8IFtdKS5tYXAoKGl0ZW06IEVudHJ5KSA9PiB7XG4gICAgICAgIGNvbnN0IGRhdGVUaW1lID0gbmV3IERhdGUoaXRlbS5fdGltZSk7XG5cbiAgICAgICAgY29uc3QgZGF0YTogYW55ID0gaXRlbS5kYXRhIHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IGRhdGFLZXlzID0gcGlja1Jhd0tleXMoZGF0YSk7XG5cbiAgICAgICAgY29uc3QgbDogTG9nID0ge1xuICAgICAgICAgIF90aW1lOiBpdGVtLl90aW1lLFxuICAgICAgICAgIF9zeXNUaW1lOiBpdGVtLl9zeXNUaW1lLFxuICAgICAgICAgIF9yb3dJZDogaXRlbS5fcm93SWQsXG4gICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICBkYXRhS2V5czogZGF0YUtleXMsXG4gICAgICAgICAgaG9zdG5hbWU6IGRhdGEuaG9zdG5hbWUsXG4gICAgICAgICAgYXBwbGljYXRpb246IGRhdGEuYXBwbGljYXRpb24sXG4gICAgICAgICAgdGV4dDogZGF0YS50ZXh0LFxuICAgICAgICAgIHNldmVyaXR5OiBnZXRTZXZlcml0eShpdGVtLmRhdGEpLFxuICAgICAgICAgIC8vIEZvcm1hdCB0aGUgZGF0ZS90aW1lIG9uY2Uvbm93LCBzbyB3ZSBkb24ndCBoYXZlIHRvIGtlZXAgZG9pbmcgaXQgaW5zaWRlIHRoZSBjb21wb25lbnRzIHdoZW4gcmUtcmVuZGVyaW5nLlxuICAgICAgICAgIGZvcm1hdHRlZERhdGU6IHRoaXMuZm9ybWF0RGF0ZShkYXRlVGltZSksXG4gICAgICAgICAgZm9ybWF0dGVkRGF0ZVRpbWU6IHRoaXMuZm9ybWF0RGF0ZVRpbWUoZGF0ZVRpbWUpLFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBsO1xuICAgICAgfSk7XG4gICAgICAvLyB3ZSBhbHdheXMgd2FudCBhc2NlbmRpbmcgbG9nc1xuICAgICAgaWYgKG9yZGVyID09PSAnZGVzYycpIHtcbiAgICAgICAgcnNsdHMgPSByc2x0cy5yZXZlcnNlKCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHN0YXR1cyA9IHJlc3VsdHMuc3RhdHVzO1xuXG4gICAgICBjb25zdCBmaWVsZFZhbHVlRm9ybWF0dGVycyA9IGZpZWxkc01ldGFUb0ZpZWxkVmFsdWVGb3JtYXR0ZXJzKHJlc3VsdHMuZmllbGRzTWV0YSk7XG5cbiAgICAgIGNvbnN0IHNlYXJjaFJlc3VsdDogTG9nU2VhcmNoUmVzdWx0ID0ge1xuICAgICAgICBpc1BhcnRpYWw6IHN0YXR1cy5pc1BhcnRpYWwsXG4gICAgICAgIGNvbnRpbnVhdGlvblRva2VuOiBzdGF0dXMuY29udGludWF0aW9uVG9rZW4sXG4gICAgICAgIG1hdGNoZXNDb3VudEJlZm9yZURlZHVwOiByZXN1bHRzLm1hdGNoZXM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBtaW5CbG9ja1RpbWU6IHN0YXR1cy5taW5CbG9ja1RpbWUsXG4gICAgICAgIG1heEJsb2NrVGltZTogc3RhdHVzLm1heEJsb2NrVGltZSxcbiAgICAgICAgcm93c0V4YW1pbmVkOiBzdGF0dXMucm93c0V4YW1pbmVkLFxuICAgICAgICBsb2dzOiByc2x0cyxcbiAgICAgICAgZmllbGRWYWx1ZUZvcm1hdHRlcnM6IGZpZWxkVmFsdWVGb3JtYXR0ZXJzLFxuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHNlYXJjaFJlc3VsdDtcbiAgICB9KTtcbiAgfVxuXG4gIEBhY3Rpb24uYm91bmRcbiAgcHJpdmF0ZSBwb2xsTG9nU2VhcmNoKFxuICAgIGN1cnNvclJvd0lkPzogc3RyaW5nLFxuICAgIGxpbWl0PzogbnVtYmVyLFxuICAgIG9yZGVyPzogT3JkZXJEaXJlY3Rpb24sXG4gICAgY29udGludWF0aW9uVG9rZW4/OiBzdHJpbmcsXG4gICAgaW5jbHVkZUN1cnNvcj86IGJvb2xlYW4sXG4gICAgbmV4dD86IChkYXRhOiBMb2dTZWFyY2hSZXN1bHQpID0+IHZvaWQsXG4gICAgb25FcnJvcj86IChlcnJvcjogYW55LCBvcGVyYXRpb246IE9wZXJhdGlvbikgPT4gYm9vbGVhbiB8IHVuZGVmaW5lZCB8IHZvaWRcbiAgKSB7XG4gICAgaWYgKCF0aGlzLmRhdGFzZXRTdG9yZS5zZWxlY3RlZERhdGFzZXRJZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdzZWxlY3RlZERhdGFzZXRJZCBub3Qgc2V0Jyk7XG4gICAgfVxuXG4gICAgdGhpcy5pc1BvbGxpbmcgPSB0cnVlO1xuXG4gICAgLy8gY2xlYXIgdGltZW91dFxuICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5wb2xsTG9nU2VhcmNoVGltZW91dCk7XG4gICAgY29uc3QgcXVlcnlJZCA9IHRoaXMubGFzdFF1ZXJ5SWQgKyAxO1xuICAgIHRoaXMubGFzdFF1ZXJ5SWQgPSBxdWVyeUlkO1xuXG4gICAgY29uc3Qgc2VhcmNoID0gdGhpcy5wZXJmb3JtTG9nU2VhcmNoKGN1cnNvclJvd0lkLCBsaW1pdCwgb3JkZXIsIGNvbnRpbnVhdGlvblRva2VuLCB0cnVlLCBpbmNsdWRlQ3Vyc29yKS50aGVuKFxuICAgICAgKHJlc3VsdHM6IExvZ1NlYXJjaFJlc3VsdCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5sYXN0UXVlcnlJZCA9PT0gcXVlcnlJZCkge1xuICAgICAgICAgIGlmIChyZXN1bHRzLmlzUGFydGlhbCAmJiAhRTJFX1RFU1RJTkcpIHtcbiAgICAgICAgICAgIHRoaXMucG9sbExvZ1NlYXJjaFRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMucG9sbExvZ1NlYXJjaChjdXJzb3JSb3dJZCwgbGltaXQsIG9yZGVyLCByZXN1bHRzLmNvbnRpbnVhdGlvblRva2VuLCBpbmNsdWRlQ3Vyc29yLCBuZXh0LCBvbkVycm9yKTtcbiAgICAgICAgICAgIH0sIDI1MCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJ1bkluQWN0aW9uKCgpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5pc1BvbGxpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgfVxuICAgICk7XG5cbiAgICAvLyBDYWxsIGZuIHdpdGggc3Vic2VxdWVudCBwYXJ0aWFsIHJlc3VsdHMgaWYgbm8gb3RoZXIgcmVxdWVzdCBoYXMgYmVlbiBtYWRlLlxuICAgIGNvbnN0IG5leHRXcmFwcGVkID0gKHJlc3VsdHM6IExvZ1NlYXJjaFJlc3VsdCkgPT4ge1xuICAgICAgaWYgKHRoaXMubGFzdFF1ZXJ5SWQgPT09IHF1ZXJ5SWQgJiYgbmV4dCkge1xuICAgICAgICAvLyBDbGVhciBvbGQgZXJyb3JzLlxuICAgICAgICBub3RpZmljYXRpb24uZGlzbWlzcyhUT0FTVF9JRCk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGEgbG9va3VwIHRhYmxlIHRvIGRlZHVwZSBwYXJ0aWFsIHJlc3VsdHNcbiAgICAgICAgY29uc3QgbWFwUm93SWRMb2cgPSB0aGlzLmxvZ3MucmVkdWNlKChtYXAsIGxsKSA9PiB7XG4gICAgICAgICAgbWFwW2xsLl9yb3dJZF0gPSBsbDtcblxuICAgICAgICAgIHJldHVybiBtYXA7XG4gICAgICAgIH0sIHt9KTtcblxuICAgICAgICAvLyBGaWx0ZXIgb3V0IGxvZ3MgdGhhdCBhcmUgYWxyZWFkeSBkaXNwbGF5ZWRcbiAgICAgICAgcmVzdWx0cy5sb2dzID0gcmVzdWx0cy5sb2dzLmZpbHRlcigobGwpID0+ICFtYXBSb3dJZExvZ1tsbC5fcm93SWRdKTtcblxuICAgICAgICBuZXh0KHJlc3VsdHMpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgdGhpcy5vcGVyYXRlKFxuICAgICAgdGhpcy5nZXRMb2dzT3Aub3BlcmF0aW9uLFxuICAgICAgc2VhcmNoLFxuICAgICAgbmV4dFdyYXBwZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICBUT0FTVF9JRCxcbiAgICAgIGFjdGlvbigoZXJyOiBhbnkpID0+IHtcbiAgICAgICAgLy8gSWdub3JlIHN0YWxlIHF1ZXJ5IGVycm9ycy5cbiAgICAgICAgaWYgKHRoaXMubGFzdFF1ZXJ5SWQgPT09IHF1ZXJ5SWQpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVFcnJvcih0aGlzLmdldExvZ3NPcC5vcGVyYXRpb24sIGVyciwgZmFsc2UsIG9uRXJyb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkTG9ncyhuZXdMb2dzOiBMb2dbXSkge1xuICAgIC8vIEFkZCBuZXcgbG9ncy5cbiAgICB0aGlzLmxvZ3MucHVzaCguLi5uZXdMb2dzKTtcblxuICAgIC8vIFJlbW92ZSBvbGQgZGF5IGRpdmlkZXJzLlxuICAgIHRoaXMubG9ncyA9IHRoaXMubG9ncy5maWx0ZXIoKGxvZykgPT4gaXNMb2cobG9nKSB8fCBsb2cubWFya2VyVHlwZSAhPT0gTWFya2VyVHlwZS5EYXlEaXZpZGVyKTtcblxuICAgIC8vIFNvcnQgbG9ncy5cbiAgICB0aGlzLmxvZ3MgPSB0aGlzLmxvZ3Muc2xpY2UoKS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAvLyBBY2NvcmRpbmcgdG8gbWhyMyBcInJvd0lkIGlzIGxleGljb2dyYXBoaWNhbGx5IHNvcnRhYmxlXCJcbiAgICAgIHJldHVybiBhLl9yb3dJZC5sb2NhbGVDb21wYXJlKGIuX3Jvd0lkKTtcbiAgICB9KTtcblxuICAgIC8vIFJlLWFkZCBkYXkgZGl2aWRlcnMuXG4gICAgdGhpcy5hZGREYXlEaXZpZGVycygpO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGREYXlEaXZpZGVycyhzdGFydD86IG51bWJlciwgZW5kPzogbnVtYmVyKSB7XG4gICAgY29uc3QgbG9ncyA9IHRoaXMubG9ncztcblxuICAgIGNvbnN0IHN0YXJ0SW5kZXggPSAhc3RhcnQgfHwgc3RhcnQgPCAwID8gMCA6IHN0YXJ0O1xuICAgIGxldCBlbmRJbmRleCA9ICFlbmQgfHwgZW5kID4gbG9ncy5sZW5ndGggPyBsb2dzLmxlbmd0aCA6IGVuZDtcblxuICAgIGZvciAobGV0IHh4ID0gc3RhcnRJbmRleDsgeHggPCBlbmRJbmRleDsgeHggKz0gMSkge1xuICAgICAgY29uc3QgcHJldkxvZyA9IHh4ID4gMCA/IGxvZ3NbeHggLSAxXSA6IGxvZ3NbeHhdO1xuICAgICAgLy8gU2tpcCBTdGFydCBhbmQgRW5kIE1hcmtlcnMuXG4gICAgICBpZiAoXG4gICAgICAgIGlzTG9nKHByZXZMb2cpIHx8XG4gICAgICAgIChwcmV2TG9nLm1hcmtlclR5cGUgIT09IE1hcmtlclR5cGUuRGF0ZVJhbmdlU3RhcnQgJiYgcHJldkxvZy5tYXJrZXJUeXBlICE9PSBNYXJrZXJUeXBlLkRhdGVSYW5nZUVuZClcbiAgICAgICkge1xuICAgICAgICBjb25zdCBpc1NhbWVEYXkgPSBtb21lbnRcbiAgICAgICAgICAudHoobG9nc1t4eF0uX3RpbWUsIHVzZXJQcm9maWxlU3RvcmUudGltZVpvbmUpXG4gICAgICAgICAgLmlzU2FtZShtb21lbnQudHoocHJldkxvZy5fdGltZSwgdXNlclByb2ZpbGVTdG9yZS50aW1lWm9uZSksICdkYXknKTtcblxuICAgICAgICBpZiAoIWlzU2FtZURheSAmJiAobG9nc1t4eF0gYXMgTWFya2VyKS5tYXJrZXJUeXBlICE9PSBNYXJrZXJUeXBlLkRheURpdmlkZXIpIHtcbiAgICAgICAgICAvLyBpbnNlcnQgYSBkYXkgZGl2aWRlciBtYXJrZXJcbiAgICAgICAgICBjb25zdCBkYXRlVGltZSA9IG5ldyBEYXRlKGxvZ3NbeHhdLl90aW1lKTtcblxuICAgICAgICAgIGNvbnN0IGlzb1N0cmluZyA9IGRhdGVUaW1lLnRvSVNPU3RyaW5nKCk7XG5cbiAgICAgICAgICBjb25zdCBtYXJrZXI6IE1hcmtlciA9IHtcbiAgICAgICAgICAgIF90aW1lOiBpc29TdHJpbmcsXG4gICAgICAgICAgICBfc3lzVGltZTogaXNvU3RyaW5nLFxuICAgICAgICAgICAgX3Jvd0lkOiBkYXRlVG9UaW1lc3RhbXAzNihkYXRlVGltZSksXG4gICAgICAgICAgICBtYXJrZXJUeXBlOiBNYXJrZXJUeXBlLkRheURpdmlkZXIsXG4gICAgICAgICAgICBmb3JtYXR0ZWREYXRlOiB0aGlzLmZvcm1hdERhdGUoZGF0ZVRpbWUpLFxuICAgICAgICAgICAgZm9ybWF0dGVkRGF0ZVRpbWU6IHRoaXMuZm9ybWF0RGF0ZVRpbWUoZGF0ZVRpbWUpLFxuICAgICAgICAgIH07XG4gICAgICAgICAgbG9ncy5zcGxpY2UoeHgsIDAsIG1hcmtlcik7XG4gICAgICAgICAgLy8gd2UndmUganVzdCBpbnNlcnRlZCBuZXcgXCJsb2dcIlxuICAgICAgICAgIGVuZEluZGV4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFkZERhdGVSYW5nZVN0YXJ0TWFya2VyKHJlYWNoZWRPbGRlc3RPdmVycmlkZT86IGJvb2xlYW4pIHtcbiAgICAvLyBBZGQgYSBtYXJrZXIgaWYgdGhlcmUgaXMgYSB0aW1lc3RhbXBTdGFydCBhbmQgd2UgcmVhY2hlZCB0aGUgb2xkZXN0IG9uZS5cbiAgICBjb25zdCB0aW1lc3RhbXBTdGFydCA9IHRoaXMuYWN0aXZlUXVlcnkudGltZXN0YW1wU3RhcnQ7XG4gICAgY29uc3QgZmlyc3RMb2cgPSB0aGlzLmxvZ3NbMF07XG4gICAgY29uc3QgZGF0ZVJhbmdlU3RhcnRFeGlzdHMgPSBmaXJzdExvZyAmJiAhaXNMb2coZmlyc3RMb2cpICYmIGZpcnN0TG9nLm1hcmtlclR5cGUgPT09IE1hcmtlclR5cGUuRGF0ZVJhbmdlU3RhcnQ7XG4gICAgaWYgKFxuICAgICAgIWRhdGVSYW5nZVN0YXJ0RXhpc3RzICYmXG4gICAgICB0aGlzLmxvZ3MubGVuZ3RoID4gMCAmJlxuICAgICAgdGltZXN0YW1wU3RhcnQgJiZcbiAgICAgICh0aGlzLnJlYWNoZWRPbGRlc3QgfHwgcmVhY2hlZE9sZGVzdE92ZXJyaWRlKVxuICAgICkge1xuICAgICAgY29uc3QgZGF0ZVRpbWUgPSBuZXcgRGF0ZSh0aW1lc3RhbXBTdGFydCk7XG5cbiAgICAgIGNvbnN0IGlzb1N0cmluZyA9IGRhdGVUaW1lLnRvSVNPU3RyaW5nKCk7XG5cbiAgICAgIGNvbnN0IG1hcmtlcjogTWFya2VyID0ge1xuICAgICAgICBfdGltZTogaXNvU3RyaW5nLFxuICAgICAgICBfc3lzVGltZTogaXNvU3RyaW5nLFxuICAgICAgICBfcm93SWQ6IGRhdGVUb1RpbWVzdGFtcDM2KGRhdGVUaW1lKSxcbiAgICAgICAgbWFya2VyVHlwZTogTWFya2VyVHlwZS5EYXRlUmFuZ2VTdGFydCxcbiAgICAgICAgZm9ybWF0dGVkRGF0ZTogdGhpcy5mb3JtYXREYXRlKGRhdGVUaW1lKSxcbiAgICAgICAgZm9ybWF0dGVkRGF0ZVRpbWU6IHRoaXMuZm9ybWF0RGF0ZVRpbWUoZGF0ZVRpbWUpLFxuICAgICAgfTtcbiAgICAgIHRoaXMubG9ncy51bnNoaWZ0KG1hcmtlcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhZGREYXRlUmFuZ2VFbmRNYXJrZXIoKSB7XG4gICAgLy8gSWdub3JlIHF1aWNrUmFuZ2UgYmVjYXVzZSBcImVuZFwiIGlzIGFsd2F5cyBnb2luZyB0byBiZSBcIm5vd1wiLlxuICAgIGNvbnN0IHF1ZXJ5UGFyYW1zVGltZXN0YW1wRW5kID0gcGFyc2VUaW1lc3RhbXBOb3ROb3codGhpcy5xdWVyeVBhcmFtcy50aW1lc3RhbXBFbmQpO1xuXG4gICAgLy8gQWRkIGEgbWFya2VyIGlmIHRoZXJlIGlzIGEgdGltZXN0YW1wRW5kIGFuZCB3ZSByZWFjaGVkIHRoZSBuZXdlc3Qgb25lLlxuICAgIGNvbnN0IGxhc3RMb2cgPSB0aGlzLmxvZ3NbdGhpcy5sb2dzLmxlbmd0aCAtIDFdO1xuICAgIGNvbnN0IGRhdGVSYW5nZUVuZEV4aXN0cyA9IGxhc3RMb2cgJiYgIWlzTG9nKGxhc3RMb2cpICYmIGxhc3RMb2cubWFya2VyVHlwZSA9PT0gTWFya2VyVHlwZS5EYXRlUmFuZ2VFbmQ7XG4gICAgaWYgKCFkYXRlUmFuZ2VFbmRFeGlzdHMgJiYgdGhpcy5sb2dzLmxlbmd0aCA+IDAgJiYgcXVlcnlQYXJhbXNUaW1lc3RhbXBFbmQgJiYgdGhpcy5yZWFjaGVkTmV3ZXN0KSB7XG4gICAgICBjb25zdCBkYXRlVGltZSA9IG5ldyBEYXRlKHF1ZXJ5UGFyYW1zVGltZXN0YW1wRW5kKTtcblxuICAgICAgY29uc3QgaXNvU3RyaW5nID0gZGF0ZVRpbWUudG9JU09TdHJpbmcoKTtcblxuICAgICAgY29uc3QgbWFya2VyOiBNYXJrZXIgPSB7XG4gICAgICAgIF90aW1lOiBpc29TdHJpbmcsXG4gICAgICAgIF9zeXNUaW1lOiBpc29TdHJpbmcsXG4gICAgICAgIF9yb3dJZDogZGF0ZVRvVGltZXN0YW1wMzYoZGF0ZVRpbWUpLFxuICAgICAgICBtYXJrZXJUeXBlOiBNYXJrZXJUeXBlLkRhdGVSYW5nZUVuZCxcbiAgICAgICAgZm9ybWF0dGVkRGF0ZTogdGhpcy5mb3JtYXREYXRlKGRhdGVUaW1lKSxcbiAgICAgICAgZm9ybWF0dGVkRGF0ZVRpbWU6IHRoaXMuZm9ybWF0RGF0ZVRpbWUoZGF0ZVRpbWUpLFxuICAgICAgfTtcbiAgICAgIHRoaXMubG9ncy5wdXNoKG1hcmtlcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXREYXRlKGRhdGVUaW1lOiBEYXRlKSB7XG4gICAgcmV0dXJuIGZvcm1hdHRlZERhdGVTaG9ydCh1c2VyUHJvZmlsZVN0b3JlLnRpbWVab25lLCBkYXRlVGltZSk7XG4gIH1cblxuICBwcml2YXRlIGZvcm1hdERhdGVUaW1lKGRhdGVUaW1lOiBEYXRlKSB7XG4gICAgcmV0dXJuIGZvcm1hdHRlZERhdGVTaG9ydCh1c2VyUHJvZmlsZVN0b3JlLnRpbWVab25lLCBkYXRlVGltZSwge1xuICAgICAgaG91cjogJzItZGlnaXQnLFxuICAgICAgbWludXRlOiAnMi1kaWdpdCcsXG4gICAgICBzZWNvbmQ6ICcyLWRpZ2l0JyxcbiAgICAgIGhvdXJDeWNsZTogJ2gyMycsXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbW92ZU9sZGVzdExvZ3MoKTogbnVtYmVyIHtcbiAgICBpZiAodGhpcy5sb2dzLmxlbmd0aCA+IE1BWF9OVU1fTE9HUykge1xuICAgICAgLy8gUmVtb3ZlIGxvZ3MgZnJvbSB0aGUgXCJwYXN0XCIgKGJlZ2lubmluZyBvZiBhcnJheSkgc2luY2Ugd2UncmUgbG9hZGluZyBpbiB0aGUgZnV0dXJlLlxuICAgICAgY29uc3QgcmVtb3ZlZExvZ3MgPSB0aGlzLmxvZ3Muc3BsaWNlKDAsIHRoaXMubG9ncy5sZW5ndGggLSBNQVhfTlVNX0xPR1MpO1xuXG4gICAgICB0aGlzLnJlYWNoZWRPbGRlc3QgPSBmYWxzZTtcblxuICAgICAgcmV0dXJuIHJlbW92ZWRMb2dzLmxlbmd0aDtcbiAgICB9XG5cbiAgICByZXR1cm4gMDtcbiAgfVxufVxuXG4vLyBFbmNvZGUgdGhlIFRpbWVTdGFtcCBzbyBpdCBtYXRjaGVzIHRoZSBmaXJzdCBjaHVuayBvZiBvdXIgYHJvd0lkYC5cbmV4cG9ydCBmdW5jdGlvbiBkYXRlVG9UaW1lc3RhbXAzNihkYXRlOiBEYXRlKSB7XG4gIGNvbnN0IG5hbm9TZWNzID0gQmlnSW50KGRhdGUudmFsdWVPZigpKSAqIEJpZ0ludCgxMDAwMDAwKTtcbiAgY29uc3QgdHMgPSBuYW5vU2Vjcy50b1N0cmluZygzNikucGFkU3RhcnQoMTMsICcwJyk7XG5cbiAgcmV0dXJuIGAke3RzfS0wMDAwMDAwMDAwMDAwMDAwLTAwMDBgO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VRdWVyeU1lc3NhZ2VzKHJlc3BvbnNlOiB7IHN0YXR1cz86IFN0YXR1cyB9KSB7XG4gIGNvbnN0IG1lc3NhZ2VzID0gcmVzcG9uc2Uuc3RhdHVzPy5tZXNzYWdlcyB8fCBbXTtcblxuICBtZXNzYWdlcy5mb3JFYWNoKChtZXNzYWdlKSA9PiB7XG4gICAgbGV0IHByaW9yaXR5ID0gJ0Vycm9yJztcbiAgICBzd2l0Y2ggKG1lc3NhZ2UucHJpb3JpdHkpIHtcbiAgICAgIC8vIFNraXAgbG9jYWxpemluZyB0aGUgZGVidWcgYW5kIHRyYWNlIHNpbmNlIHRoYXQgc2hvdWxkbid0IHJlYWxseSBoYXBwZW4uXG4gICAgICBjYXNlICd0cmFjZSc6XG4gICAgICAgIHByaW9yaXR5ID0gJ1RyYWNlJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdkZWJ1Zyc6XG4gICAgICAgIHByaW9yaXR5ID0gJ0RlYnVnJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdpbmZvJzpcbiAgICAgICAgcHJpb3JpdHkgPSAnSW5mbyc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnd2Fybic6XG4gICAgICAgIHByaW9yaXR5ID0gJ1dhcm5pbmcnO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2Vycm9yJzpcbiAgICAgICAgcHJpb3JpdHkgPSAnRXJyb3InO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2ZhdGFsJzpcbiAgICAgICAgcHJpb3JpdHkgPSAnRmF0YWwnO1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICBpZiAoWyd0cmFjZScsICdkZWJ1ZycsICdpbmZvJ10uaW5jbHVkZXMobWVzc2FnZS5wcmlvcml0eSkpIHtcbiAgICAgIG5vdGlmaWNhdGlvbi5pbmZvKHsgbWVzc2FnZTogcHJpb3JpdHksIGRlc2NyaXB0aW9uOiBtZXNzYWdlLm1zZyB9LCB7IGF1dG9DbG9zZTogZmFsc2UsIHRvYXN0SWQ6IG1lc3NhZ2UubXNnIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBub3RpZmljYXRpb24uZXJyb3IoeyBtZXNzYWdlOiBwcmlvcml0eSwgZGVzY3JpcHRpb246IG1lc3NhZ2UubXNnIH0sIHsgYXV0b0Nsb3NlOiBmYWxzZSwgdG9hc3RJZDogbWVzc2FnZS5tc2cgfSk7XG4gICAgfVxuICB9KTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///30413\n");

/***/ }),

/***/ 86051:
/*!**********************************************!*\
  !*** ./lib/dash/stores/QueryHistoryStore.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"HISTORY_DATASET\": () => (/* binding */ HISTORY_DATASET),\n/* harmony export */   \"QueryHistoryStore\": () => (/* binding */ QueryHistoryStore),\n/* harmony export */   \"mapEntryToHistoryInfo\": () => (/* binding */ mapEntryToHistoryInfo)\n/* harmony export */ });\n/* harmony import */ var mobx__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mobx */ 50265);\n/* harmony import */ var _shared_dash__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../shared/dash */ 81002);\n/* harmony import */ var _LogStreamStore__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./LogStreamStore */ 30413);\n/* harmony import */ var _StoreBase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./StoreBase */ 53769);\n/* harmony import */ var _UserStatusStore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./UserStatusStore */ 41582);\n/* harmony import */ var _ViewStore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ViewStore */ 77776);\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n// cSpell: ignore nocache\n\n\n\n\n\n\nconst PAGE_SIZE = 50;\nconst mapEntryToHistoryInfo = (entry) => {\n    var _a;\n    const query = entry.data;\n    return {\n        id: query.id,\n        dataset: query.dataset,\n        metadata: query.metadata,\n        query: query.query,\n        queryType: query.kind,\n        createdBy: query.who,\n        isMine: ((_a = _UserStatusStore__WEBPACK_IMPORTED_MODULE_1__.userStatusStore.user) === null || _a === void 0 ? void 0 : _a.id) === query.who,\n        created: new Date(query.created).getTime(),\n        name: query.name,\n        type: 'history',\n        _rowId: entry._rowId,\n    };\n};\nconst HISTORY_DATASET = 'axiom-history';\nclass QueryHistoryStore extends _StoreBase__WEBPACK_IMPORTED_MODULE_2__.StoreBase {\n    constructor() {\n        super(...arguments);\n        // Operations trackers\n        this.getQueryHistoryOps = new _StoreBase__WEBPACK_IMPORTED_MODULE_2__.SimpleOperationsTracker('getQueryHistory');\n        this.hasMore = false;\n        this.queries = [];\n    }\n    pushLocalQuery(query) {\n        this.queries.unshift(query);\n    }\n    getQueries(params) {\n        var _a;\n        // Store the query so we can set the tab\n        this.lastQuery = params;\n        // Clear the queries so we don't display any aren't relevant to the query\n        this.queries = [];\n        // Clear the operation so we don't see a none found message\n        this.getQueryHistoryOps.removeOperation('getQueryHistory');\n        const { kind, dataset, who, apl } = params;\n        const filter = {\n            op: 'and',\n            field: '',\n            children: [\n                { op: '==', field: 'kind', value: kind },\n                { op: who ? '==' : '!=', field: 'who', value: (_a = _UserStatusStore__WEBPACK_IMPORTED_MODULE_1__.userStatusStore.user) === null || _a === void 0 ? void 0 : _a.id },\n            ],\n        };\n        if (dataset) {\n            filter.children.push({ op: '==', field: 'dataset', value: dataset });\n        }\n        if (apl) {\n            filter.children.push({ op: 'contains', field: 'query.apl', value: apl });\n        }\n        const query = {\n            order: [{ field: '_time', desc: true }],\n            startTime: new Date(0).toISOString(),\n            endTime: new Date().toISOString(),\n            resolution: 'auto',\n            filter: filter, // Make TypeScript happy about Enum issues.\n        };\n        const pageSize = params.pageSize || PAGE_SIZE;\n        this.performQuery({\n            id: HISTORY_DATASET,\n            payload: Object.assign(Object.assign({}, query), { limit: pageSize }),\n            nocache: _ViewStore__WEBPACK_IMPORTED_MODULE_3__.viewStore.activeQuery.nocache === 'true', // Allow Axiom to set nocache via the page Url for debugging.\n        }); // Gave up on trying to get 'as ApiQueryRequest' working\n    }\n    loadMoreQueries() {\n        if (!this.lastParams) {\n            throw new Error('lastParams not set before calling loadMoreQueries');\n        }\n        this.performQuery(Object.assign(Object.assign({}, this.lastParams), { payload: Object.assign(Object.assign({}, this.lastParams.payload), { cursor: this.queries[this.queries.length - 1]._rowId }) }));\n    }\n    getDatasetsHistoryQuery(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const query = this.queries.find((q) => q.id === id);\n            if (query) {\n                return Promise.resolve(query);\n            }\n            return _shared_dash__WEBPACK_IMPORTED_MODULE_4__.dashApi.getDatasetsHistoryQuery(id);\n        });\n    }\n    performQuery(params) {\n        this.lastParams = params;\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\n        this.operate(this.getQueryHistoryOps.operation, _shared_dash__WEBPACK_IMPORTED_MODULE_4__.dashApi.queryDataset({\n            id: params.id,\n            'streaming-duration': params.streaming_duration,\n            nocache: params.nocache,\n            saveAsKind: params.saveAsKind,\n        }, params.payload), (result) => {\n            (0,_LogStreamStore__WEBPACK_IMPORTED_MODULE_5__.parseQueryMessages)(result);\n            if (this.lastParams === params) {\n                let { matches = [] } = result;\n                // Protect against old TitleCase vfields\n                matches = matches.filter((m) => { var _a; return ((_a = m.data) === null || _a === void 0 ? void 0 : _a.ID) === undefined; });\n                const { cursor, limit } = params.payload;\n                // If we specified a cursor then we're appending\n                if (cursor) {\n                    this.queries.push(...matches.map(mapEntryToHistoryInfo));\n                }\n                else {\n                    this.queries = matches ? matches.map(mapEntryToHistoryInfo) : [];\n                }\n                this.hasMore = matches.length === limit;\n            }\n        }, undefined);\n    }\n}\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_0__.observable\n], QueryHistoryStore.prototype, \"hasMore\", void 0);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_0__.observable\n], QueryHistoryStore.prototype, \"queries\", void 0);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_0__.observable\n], QueryHistoryStore.prototype, \"lastQuery\", void 0);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound\n], QueryHistoryStore.prototype, \"pushLocalQuery\", null);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound\n], QueryHistoryStore.prototype, \"getQueries\", null);\n__decorate([\n    mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound\n], QueryHistoryStore.prototype, \"loadMoreQueries\", null);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFPLENBQUMsR0FBRyxDQUFtQixxQkFBcUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7aUJBQ3BGO2dCQUVELElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLE1BQU0sS0FBSyxLQUFLLENBQUM7YUFDekM7UUFDSCxDQUFDLEVBQ0QsU0FBUyxDQUNWLENBQUM7SUFDSixDQUFDO0NBQ0Y7QUEvSEM7SUFEQyw0Q0FBVTtrREFDcUI7QUFHaEM7SUFEQyw0Q0FBVTtrREFDNkI7QUFHeEM7SUFEQyw0Q0FBVTtvREFDZ0Y7QUFLM0Y7SUFEQyw4Q0FBWTt1REFHWjtBQUdEO0lBREMsOENBQVk7bURBaURaO0FBR0Q7SUFEQyw4Q0FBWTt3REFVWiIsInNvdXJjZXMiOlsiZmlsZTovLy9Vc2Vycy93YXRlcm1lbG9uL1Byb2plY3RzL0F4aW9tL2NvZGUvYXhpb21ocS1hcHAvZnJvbnRlbmQvbGliL2Rhc2gvc3RvcmVzL1F1ZXJ5SGlzdG9yeVN0b3JlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGNTcGVsbDogaWdub3JlIG5vY2FjaGVcbmltcG9ydCB7IGFjdGlvbiwgb2JzZXJ2YWJsZSB9IGZyb20gJ21vYngnO1xuXG5pbXBvcnQgeyBkYXNoQXBpLCBFbnRyeSwgUXVlcnlSZXF1ZXN0IGFzIEFwaVF1ZXJ5UmVxdWVzdCB9IGZyb20gJy4uL3NoYXJlZC9kYXNoJztcblxuaW1wb3J0IHsgcGFyc2VRdWVyeU1lc3NhZ2VzIH0gZnJvbSAnLi9Mb2dTdHJlYW1TdG9yZSc7XG5pbXBvcnQgeyBRdWVyeUluZm8gfSBmcm9tICcuL1NhdmVkUXVlcnlTdG9yZSc7XG5pbXBvcnQgeyBTaW1wbGVPcGVyYXRpb25zVHJhY2tlciwgU3RvcmVCYXNlIH0gZnJvbSAnLi9TdG9yZUJhc2UnO1xuaW1wb3J0IHsgdXNlclN0YXR1c1N0b3JlIH0gZnJvbSAnLi9Vc2VyU3RhdHVzU3RvcmUnO1xuaW1wb3J0IHsgdmlld1N0b3JlIH0gZnJvbSAnLi9WaWV3U3RvcmUnO1xuXG5jb25zdCBQQUdFX1NJWkUgPSA1MDtcblxuZXhwb3J0IHR5cGUgSGlzdG9yeVNhdmVBc0tpbmQgPSAnYW5hbHl0aWNzJyB8ICdhcGwnIHwgJ3N0cmVhbSc7XG5leHBvcnQgY29uc3QgbWFwRW50cnlUb0hpc3RvcnlJbmZvID0gKGVudHJ5OiBFbnRyeSk6IEhpc3RvcnlRdWVyeUluZm8gPT4ge1xuICBjb25zdCBxdWVyeTogYW55ID0gZW50cnkuZGF0YTtcblxuICByZXR1cm4ge1xuICAgIGlkOiBxdWVyeS5pZCxcbiAgICBkYXRhc2V0OiBxdWVyeS5kYXRhc2V0LFxuICAgIG1ldGFkYXRhOiBxdWVyeS5tZXRhZGF0YSxcbiAgICBxdWVyeTogcXVlcnkucXVlcnksXG4gICAgcXVlcnlUeXBlOiBxdWVyeS5raW5kLFxuICAgIGNyZWF0ZWRCeTogcXVlcnkud2hvLFxuICAgIGlzTWluZTogdXNlclN0YXR1c1N0b3JlLnVzZXI/LmlkID09PSBxdWVyeS53aG8sXG4gICAgY3JlYXRlZDogbmV3IERhdGUocXVlcnkuY3JlYXRlZCkuZ2V0VGltZSgpLFxuICAgIG5hbWU6IHF1ZXJ5Lm5hbWUsXG4gICAgdHlwZTogJ2hpc3RvcnknLFxuICAgIF9yb3dJZDogZW50cnkuX3Jvd0lkLFxuICB9O1xufTtcblxuZXhwb3J0IGludGVyZmFjZSBRdWVyeVBhcmFtcyB7XG4gIGlkOiBzdHJpbmc7XG4gIHBheWxvYWQ6IEFwaVF1ZXJ5UmVxdWVzdDtcbiAgc2F2ZUFzS2luZD86IEhpc3RvcnlTYXZlQXNLaW5kO1xuICBzdHJlYW1pbmdfZHVyYXRpb24/OiBzdHJpbmc7XG4gIG5vY2FjaGU/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEluamVjdGVkUXVlcnlIaXN0b3J5U3RvcmUge1xuICBxdWVyeUhpc3RvcnlTdG9yZTogUXVlcnlIaXN0b3J5U3RvcmU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSGlzdG9yeVF1ZXJ5SW5mbyBleHRlbmRzIFF1ZXJ5SW5mbyB7XG4gIF9yb3dJZDogc3RyaW5nO1xufVxuXG5leHBvcnQgY29uc3QgSElTVE9SWV9EQVRBU0VUID0gJ2F4aW9tLWhpc3RvcnknO1xuXG5leHBvcnQgY2xhc3MgUXVlcnlIaXN0b3J5U3RvcmUgZXh0ZW5kcyBTdG9yZUJhc2Uge1xuICAvLyBPcGVyYXRpb25zIHRyYWNrZXJzXG4gIHB1YmxpYyBnZXRRdWVyeUhpc3RvcnlPcHMgPSBuZXcgU2ltcGxlT3BlcmF0aW9uc1RyYWNrZXIoJ2dldFF1ZXJ5SGlzdG9yeScpO1xuXG4gIEBvYnNlcnZhYmxlXG4gIHB1YmxpYyBoYXNNb3JlOiBib29sZWFuID0gZmFsc2U7XG5cbiAgQG9ic2VydmFibGVcbiAgcHVibGljIHF1ZXJpZXM6IEhpc3RvcnlRdWVyeUluZm9bXSA9IFtdO1xuXG4gIEBvYnNlcnZhYmxlXG4gIHB1YmxpYyBsYXN0UXVlcnk6IHsga2luZD86IEhpc3RvcnlTYXZlQXNLaW5kOyBkYXRhc2V0Pzogc3RyaW5nOyB3aG8/OiBzdHJpbmcgfSB8IHVuZGVmaW5lZDtcblxuICBwcml2YXRlIGxhc3RQYXJhbXM6IFF1ZXJ5UGFyYW1zIHwgdW5kZWZpbmVkO1xuXG4gIEBhY3Rpb24uYm91bmRcbiAgcHVibGljIHB1c2hMb2NhbFF1ZXJ5KHF1ZXJ5OiBIaXN0b3J5UXVlcnlJbmZvKSB7XG4gICAgdGhpcy5xdWVyaWVzLnVuc2hpZnQocXVlcnkpO1xuICB9XG5cbiAgQGFjdGlvbi5ib3VuZFxuICBwdWJsaWMgZ2V0UXVlcmllcyhwYXJhbXM6IHtcbiAgICBraW5kPzogSGlzdG9yeVNhdmVBc0tpbmQ7XG4gICAgZGF0YXNldD86IHN0cmluZztcbiAgICB3aG8/OiBzdHJpbmc7XG4gICAgcGFnZVNpemU/OiBudW1iZXI7XG4gICAgYXBsPzogc3RyaW5nO1xuICB9KTogdm9pZCB7XG4gICAgLy8gU3RvcmUgdGhlIHF1ZXJ5IHNvIHdlIGNhbiBzZXQgdGhlIHRhYlxuICAgIHRoaXMubGFzdFF1ZXJ5ID0gcGFyYW1zO1xuICAgIC8vIENsZWFyIHRoZSBxdWVyaWVzIHNvIHdlIGRvbid0IGRpc3BsYXkgYW55IGFyZW4ndCByZWxldmFudCB0byB0aGUgcXVlcnlcbiAgICB0aGlzLnF1ZXJpZXMgPSBbXTtcbiAgICAvLyBDbGVhciB0aGUgb3BlcmF0aW9uIHNvIHdlIGRvbid0IHNlZSBhIG5vbmUgZm91bmQgbWVzc2FnZVxuICAgIHRoaXMuZ2V0UXVlcnlIaXN0b3J5T3BzLnJlbW92ZU9wZXJhdGlvbignZ2V0UXVlcnlIaXN0b3J5Jyk7XG5cbiAgICBjb25zdCB7IGtpbmQsIGRhdGFzZXQsIHdobywgYXBsIH0gPSBwYXJhbXM7XG5cbiAgICBjb25zdCBmaWx0ZXIgPSB7XG4gICAgICBvcDogJ2FuZCcsXG4gICAgICBmaWVsZDogJycsXG4gICAgICBjaGlsZHJlbjogW1xuICAgICAgICB7IG9wOiAnPT0nLCBmaWVsZDogJ2tpbmQnLCB2YWx1ZToga2luZCB9LFxuICAgICAgICB7IG9wOiB3aG8gPyAnPT0nIDogJyE9JywgZmllbGQ6ICd3aG8nLCB2YWx1ZTogdXNlclN0YXR1c1N0b3JlLnVzZXI/LmlkIH0sXG4gICAgICBdLFxuICAgIH07XG5cbiAgICBpZiAoZGF0YXNldCkge1xuICAgICAgZmlsdGVyLmNoaWxkcmVuLnB1c2goeyBvcDogJz09JywgZmllbGQ6ICdkYXRhc2V0JywgdmFsdWU6IGRhdGFzZXQgfSk7XG4gICAgfVxuXG4gICAgaWYgKGFwbCkge1xuICAgICAgZmlsdGVyLmNoaWxkcmVuLnB1c2goeyBvcDogJ2NvbnRhaW5zJywgZmllbGQ6ICdxdWVyeS5hcGwnLCB2YWx1ZTogYXBsIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHF1ZXJ5OiBBcGlRdWVyeVJlcXVlc3QgPSB7XG4gICAgICBvcmRlcjogW3sgZmllbGQ6ICdfdGltZScsIGRlc2M6IHRydWUgfV0sXG4gICAgICBzdGFydFRpbWU6IG5ldyBEYXRlKDApLnRvSVNPU3RyaW5nKCksXG4gICAgICBlbmRUaW1lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICByZXNvbHV0aW9uOiAnYXV0bycsXG4gICAgICBmaWx0ZXI6IGZpbHRlciBhcyBhbnksIC8vIE1ha2UgVHlwZVNjcmlwdCBoYXBweSBhYm91dCBFbnVtIGlzc3Vlcy5cbiAgICB9O1xuXG4gICAgY29uc3QgcGFnZVNpemUgPSBwYXJhbXMucGFnZVNpemUgfHwgUEFHRV9TSVpFO1xuXG4gICAgdGhpcy5wZXJmb3JtUXVlcnkoe1xuICAgICAgaWQ6IEhJU1RPUllfREFUQVNFVCxcbiAgICAgIHBheWxvYWQ6IHsgLi4ucXVlcnksIGxpbWl0OiBwYWdlU2l6ZSB9LFxuICAgICAgbm9jYWNoZTogdmlld1N0b3JlLmFjdGl2ZVF1ZXJ5Lm5vY2FjaGUgPT09ICd0cnVlJywgLy8gQWxsb3cgQXhpb20gdG8gc2V0IG5vY2FjaGUgdmlhIHRoZSBwYWdlIFVybCBmb3IgZGVidWdnaW5nLlxuICAgIH0pOyAvLyBHYXZlIHVwIG9uIHRyeWluZyB0byBnZXQgJ2FzIEFwaVF1ZXJ5UmVxdWVzdCcgd29ya2luZ1xuICB9XG5cbiAgQGFjdGlvbi5ib3VuZFxuICBwdWJsaWMgbG9hZE1vcmVRdWVyaWVzKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5sYXN0UGFyYW1zKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2xhc3RQYXJhbXMgbm90IHNldCBiZWZvcmUgY2FsbGluZyBsb2FkTW9yZVF1ZXJpZXMnKTtcbiAgICB9XG5cbiAgICB0aGlzLnBlcmZvcm1RdWVyeSh7XG4gICAgICAuLi50aGlzLmxhc3RQYXJhbXMsXG4gICAgICBwYXlsb2FkOiB7IC4uLnRoaXMubGFzdFBhcmFtcy5wYXlsb2FkLCBjdXJzb3I6IHRoaXMucXVlcmllc1t0aGlzLnF1ZXJpZXMubGVuZ3RoIC0gMV0uX3Jvd0lkIH0sXG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0RGF0YXNldHNIaXN0b3J5UXVlcnkoaWQ6IHN0cmluZykge1xuICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy5xdWVyaWVzLmZpbmQoKHEpID0+IHEuaWQgPT09IGlkKTtcblxuICAgIGlmIChxdWVyeSkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShxdWVyeSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRhc2hBcGkuZ2V0RGF0YXNldHNIaXN0b3J5UXVlcnkoaWQpO1xuICB9XG5cbiAgcHJpdmF0ZSBwZXJmb3JtUXVlcnkocGFyYW1zOiBRdWVyeVBhcmFtcykge1xuICAgIHRoaXMubGFzdFBhcmFtcyA9IHBhcmFtcztcblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICB0aGlzLm9wZXJhdGUoXG4gICAgICB0aGlzLmdldFF1ZXJ5SGlzdG9yeU9wcy5vcGVyYXRpb24sXG4gICAgICBkYXNoQXBpLnF1ZXJ5RGF0YXNldChcbiAgICAgICAge1xuICAgICAgICAgIGlkOiBwYXJhbXMuaWQsXG4gICAgICAgICAgJ3N0cmVhbWluZy1kdXJhdGlvbic6IHBhcmFtcy5zdHJlYW1pbmdfZHVyYXRpb24sXG4gICAgICAgICAgbm9jYWNoZTogcGFyYW1zLm5vY2FjaGUsXG4gICAgICAgICAgc2F2ZUFzS2luZDogcGFyYW1zLnNhdmVBc0tpbmQsXG4gICAgICAgIH0sXG4gICAgICAgIHBhcmFtcy5wYXlsb2FkXG4gICAgICApLFxuICAgICAgKHJlc3VsdCkgPT4ge1xuICAgICAgICBwYXJzZVF1ZXJ5TWVzc2FnZXMocmVzdWx0KTtcblxuICAgICAgICBpZiAodGhpcy5sYXN0UGFyYW1zID09PSBwYXJhbXMpIHtcbiAgICAgICAgICBsZXQgeyBtYXRjaGVzID0gW10gfSA9IHJlc3VsdDtcblxuICAgICAgICAgIC8vIFByb3RlY3QgYWdhaW5zdCBvbGQgVGl0bGVDYXNlIHZmaWVsZHNcbiAgICAgICAgICBtYXRjaGVzID0gbWF0Y2hlcy5maWx0ZXIoKG0pID0+IChtIGFzIGFueSkuZGF0YT8uSUQgPT09IHVuZGVmaW5lZCk7XG5cbiAgICAgICAgICBjb25zdCB7IGN1cnNvciwgbGltaXQgfSA9IHBhcmFtcy5wYXlsb2FkO1xuXG4gICAgICAgICAgLy8gSWYgd2Ugc3BlY2lmaWVkIGEgY3Vyc29yIHRoZW4gd2UncmUgYXBwZW5kaW5nXG4gICAgICAgICAgaWYgKGN1cnNvcikge1xuICAgICAgICAgICAgdGhpcy5xdWVyaWVzLnB1c2goLi4ubWF0Y2hlcy5tYXA8SGlzdG9yeVF1ZXJ5SW5mbz4obWFwRW50cnlUb0hpc3RvcnlJbmZvKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucXVlcmllcyA9IG1hdGNoZXMgPyBtYXRjaGVzLm1hcDxIaXN0b3J5UXVlcnlJbmZvPihtYXBFbnRyeVRvSGlzdG9yeUluZm8pIDogW107XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5oYXNNb3JlID0gbWF0Y2hlcy5sZW5ndGggPT09IGxpbWl0O1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdW5kZWZpbmVkXG4gICAgKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///86051\n");

/***/ })

}]);